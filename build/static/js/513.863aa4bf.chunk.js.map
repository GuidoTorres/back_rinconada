{"version":3,"file":"static/js/513.863aa4bf.chunk.js","mappings":"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","sources":["components/planillas/Buscador.jsx","components/planillas/asistencia/ModalCrearAsistencia.jsx","components/planillas/asistencia/ListaAsistencia.jsx","helpers/tablaExcel.jsx","../node_modules/moment/locale/es-mx.js"],"sourcesContent":["import React from \"react\";\nimport { useContext, useRef, useEffect } from \"react\";\nimport { CrudContext } from \"../../context/CrudContext\";\nimport { PlanillaContext } from \"../../context/PlanillaContext\";\nimport { Input, Button, Radio } from \"antd\";\nimport { notificacion } from \"../../helpers/mensajes\";\nimport \"./style/buscador.css\";\nimport HojaTareoIndividual from \"../../helpers/HojaTareoIndividual\";\nimport {\n  handleDownloadExcel,\n  handleDownloadExcel1,\n} from \"../../helpers/tablaExcel\";\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\n\nimport Item from \"antd/es/list/Item\";\nimport { useState } from \"react\";\nconst { Search } = Input;\n\nconst Buscador = ({\n  abrirModal,\n  registrar,\n  crear,\n  exportar,\n  cargar,\n  actualizarTabla,\n  actualizarAsistencia,\n  actualizar,\n  buscador,\n  cargando,\n  setCargando,\n  data1,\n  data2,\n  validacion,\n  modal,\n  data,\n}) => {\n  const { createData, setFilterText } = useContext(CrudContext);\n  const { setControlAsistencia } = useContext(PlanillaContext);\n  const [showDownloadLink, setShowDownloadLink] = useState(false);\n  const [result2, setResult2] = useState(null);\n  const inputFileRef = useRef(null);\n\n  const handleModal = () => {\n    abrirModal(true);\n  };\n  const handleValidacion = () => {\n    modal(true);\n  };\n\n  const changeHandler = () => {\n    inputFileRef.current.click();\n  };\n\n  const excelFile = async (e) => {\n    let formData = new FormData();\n    formData.append(\"myFile\", e.target.files[0]);\n    const excel = await fetch(\n      `${process.env.REACT_APP_BASE}/asistencia/excel`,\n      {\n        method: \"post\",\n        body: formData,\n      }\n    );\n    const response = await excel.json();\n    if (response) {\n      notificacion(response.status, response.msg);\n      actualizarTabla();\n      setControlAsistencia(false);\n      inputFileRef.current.value = null;\n    }\n\n    inputFileRef.current.value = null;\n  };\n\n  const excelFileDownload = (e) => {\n    const result = data1.trabajador_asistencia?.map((dat) => {\n      return {\n        [dat?.asistencium?.fecha]:\n          dat.asistencia === \"Permiso\"\n            ? \"P\"\n            : dat.asistencia === \"Asistio\"\n            ? \"X\"\n            : dat.asistencia === \"Falto\"\n            ? \"F\"\n            : dat.asistencia === \"Dia libre\"\n            ? \"DL\"\n            : dat.asistencia === \"Comision\"\n            ? \"C\"\n            : \"F\",\n      };\n    });\n\n    const newObj = Object.assign({}, ...result);\n    const result2 = data1?.trabajador_asistencia?.slice(0, 1).map((dat, i) => {\n      return {\n        Nro: i + 1,\n        Nombre: data1?.nombre,\n        Dni: data1?.dni,\n        Celular: data1?.telefono,\n        Cargo: data1?.contratos?.puesto,\n        Área: data1?.contratos?.area,\n        ...newObj,\n      };\n    });\n\n    handleDownloadExcel1(result2, \"Hoja de tareo\", \"prueba\");\n    // setShowDownloadLink(true);\n    // setResult2(result2);\n  };\n  console.log(\"====================================\");\n  console.log(data1);\n  console.log(\"====================================\");\n  return (\n    <div\n      className=\"buscador-container\"\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n      }}\n    >\n      <input\n        type=\"file\"\n        ref={inputFileRef}\n        onChange={excelFile}\n        style={{ display: \"none\" }}\n      />\n      {buscador ? (\n        <Search\n          placeholder=\"Ingresa una nombre...\"\n          onChange={(e) => setFilterText(e.target.value)}\n          style={{\n            width: 300,\n          }}\n        />\n      ) : (\n        <div>\n          {registrar !== false ? (\n            <Button onClick={handleModal}>Registrar</Button>\n          ) : (\n            \"\"\n          )}\n          {exportar !== false &&\n          data1?.firma_gerente &&\n          data1?.firma_jefe &&\n          data1?.foto ? (\n            <Button onClick={excelFileDownload}>Descargar</Button>\n          ) : (\n            \"\"\n          )}\n          {/* {exportar !== false && result2 && (\n            <PDFDownloadLink\n              document={<HojaTareoIndividual data={result2} />}\n              fileName=\"Hoja de tareo.pdf\"\n            >\n              <Bi>Descargar </Bi>\n            </PDFDownloadLink>\n          )} */}\n          {validacion !== false ? (\n            <Button onClick={handleValidacion}>Validación </Button>\n          ) : (\n            \"\"\n          )}\n          {cargar !== false ? (\n            <Button style={{ width: \"100px\" }} onClick={changeHandler}>\n              Cargar\n            </Button>\n          ) : (\n            \"\"\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Buscador;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport Tabla from \"../../tabla/Tabla\";\nimport Buscador from \"../Buscador\";\nimport { PlanillaContext } from \"../../../context/PlanillaContext\";\nimport { CrudContext } from \"../../../context/CrudContext\";\nimport { crearAsistencia } from \"../../../data/dataTable\";\nimport \"../style/modalCrearAsistencia.css\";\nimport MainModal from \"../../modal/MainModal\";\nimport { Empty } from \"antd\";\nimport Cargando from \"../../cargando/Cargando\";\nimport { notificacion } from \"../../../helpers/mensajes\";\n\nconst ModalCrearAsistencia = ({ data, actualizarTabla, fechas }) => {\n  const { setControlAsistencia, fechaId } = useContext(PlanillaContext);\n  const {\n    getData,\n    data2,\n    setData2,\n    createData,\n    updateData,\n    modal,\n    dataToEdit,\n    setDataToEdit,\n    setModal,\n    cargando,\n    setCargando,\n  } = useContext(CrudContext);\n\n  const [id, setId] = useState(\"\");\n\n  const filtrarFechaId = () => {\n    const prueba = fechas && fechas?.filter((item) => item?.fecha == data);\n    const id = prueba && prueba?.at(-1)?.id;\n    if (id) {\n      setId(id);\n    }\n  };\n\n  useEffect(() => {\n    filtrarFechaId();\n  }, [data, fechas]);\n\n  const getTrabajadorAsistencia = async () => {\n    const route = `asistencia/trabajador/${id}`;\n    const response = await getData(route);\n    setData2(response.data);\n  };\n  useEffect(() => {\n    if (id) {\n      getTrabajadorAsistencia();\n    }\n  }, [id]);\n\n  const closeModal = () => {\n    setModal(false);\n    setData2([]);\n  };\n\n  const handleAsistencia = async (event, e) => {\n    const route = \"asistencia/trabajador\";\n    const info = {\n      asistencia_id: id,\n      trabajador_id: e.dni,\n      asistencia: event.target.value,\n    };\n    const response = await createData(info, route);\n    if (response) {\n      notificacion(response.status, response.msg);\n      actualizarTabla();\n    }\n  };\n\n  const handleIngreso = async (e) => {\n    const route = \"asistencia/hora_ingreso\";\n    let obj = {\n      hora_ingreso: e.target.value,\n    };\n\n    const response = await updateData(obj, data.id, route);\n    if (response.status === 200) {\n      actualizarTabla();\n    }\n  };\n\n  const columns = crearAsistencia(handleAsistencia);\n  return (\n    <MainModal\n      className={\"modal-asistencia\"}\n      title={dataToEdit ? \"Editar asistencia\" : \"Registrar asistencia\"}\n      open={modal}\n      width={800}\n      closeModal={closeModal}\n    >\n      <div className=\"hora-ingreso\">\n        <div>\n          <label htmlFor=\"\">Hora de ingreso: </label>\n          <input\n            type=\"time\"\n            name=\"hora_ingreso\"\n            defaultValue={data?.hora_ingreso || \"07:00\"}\n            onChange={handleIngreso}\n          />\n        </div>\n        <br />\n        <Buscador\n          registrar={false}\n          crear={false}\n          exportar={false}\n          cargar={true}\n          validacion={false}\n          buscador={false}\n          // actualizar={actualizarTabla}\n          // actualizarTabla={getTrabajadorAsistencia}\n        />\n      </div>\n      <br />\n      <Tabla columns={columns} table={data2} />\n    </MainModal>\n  );\n};\n\nexport default ModalCrearAsistencia;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport Header from \"../../header/Header\";\nimport { CrudContext } from \"../../../context/CrudContext\";\nimport ModalCrearAsistencia from \"./ModalCrearAsistencia\";\nimport useSearch from \"../../../hooks/useSearch\";\nimport { Calendar, theme, Button } from \"antd\";\nimport { BsTrash, BsPencil } from \"react-icons/bs\";\nimport { notificacion } from \"../../../helpers/mensajes\";\nimport \"moment/locale/es-mx\";\nimport locale from \"antd/es/date-picker/locale/es_ES\";\nimport \"../style/listaAsistencia.css\";\nimport dayjs from \"dayjs\";\n\nconst ListaAsistencia = () => {\n  const wrapperStyle = {\n    width: \"80%\",\n    height: \"70%\",\n    border: `1px solid lightgrey`,\n    borderRadius: \"6px\",\n    padding: \"10px\",\n  };\n\n  const { getData, setData, data, deleteData, modal, setModal, createData } =\n    useContext(CrudContext);\n  const [fechaId, setFechaId] = useState(\"\");\n\n  const { result } = useSearch(data);\n\n  const getAsistencia = async () => {\n    const route = \"asistencia\";\n    const response = await getData(route);\n    setData(response.data);\n  };\n\n  useEffect(() => {\n    getAsistencia();\n  }, []);\n\n  const handleEdit = (e, value) => {\n    e.stopPropagation();\n    setFechaId(dayjs(value).format(\"YYYY-MM-DD\"));\n    setModal(true);\n  };\n\n  const handleDelete = async (e, fecha) => {\n    e.stopPropagation();\n    const id = data\n      ?.filter((item) => item?.fecha === dayjs(fecha).format(\"YYYY-MM-DD\"))\n      .map((item) => item.id)\n      .toString();\n    const route = \"asistencia\";\n    const response = await deleteData(route, id);\n    if (response) {\n      notificacion(response.status, response.msg);\n      getAsistencia();\n    }\n  };\n  const crearAsistencia = async (fecha) => {\n\n    const route = \"asistencia\";\n    const asistencia = {\n      fecha: dayjs(fecha).format(\"YYYY-MM-DD\"),\n      hora_ingreso: \"07:30\",\n    };\n    const response = await createData(asistencia, route);\n    if (response) {\n      // notificacion(response.status, response.msg);\n      getAsistencia();\n    }\n  };\n  const renderCell = (date) => {\n    const fechaCalendario = dayjs(date).format(\"YYYY-MM-DD\");\n    const filtrarFecha = data?.filter((item) => item.fecha === fechaCalendario);\n    if (filtrarFecha.length > 0) {\n      return (\n        <div className=\"calendar-data\">\n          <label htmlFor=\"\">Asistencia creada</label>\n          <div>\n            <BsPencil onClick={(e) => handleEdit(e, date)} />\n            <BsTrash\n              onClick={(e) => handleDelete(e, date)}\n              className=\"eliminar\"\n            />\n          </div>\n        </div>\n      );\n    } else {\n      return \"\";\n    }\n  };\n  // const columns = listaAsistencia(handleEdit, handleDelete);\n\n  const onSelect = (e) => {\n    const fecha = dayjs(e).format(\"YYYY-MM-DD\");\n    crearAsistencia(e,fecha);\n    // setModal(true);\n  };\n  return (\n    <div className=\"lista-asistencia\">\n      <Header text={\"Asistencia\"} user={\"Usuario\"} ruta={\"/planilla\"} />\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          marginTop: \"50px\",\n        }}\n      >\n        <div style={wrapperStyle}>\n          <Calendar\n            fullscreen={true}\n            onChange={onSelect}\n            mode=\"month\"\n            locale={locale}\n            dateCellRender={renderCell}\n          />\n        </div>\n      </div>\n      {modal && (\n        <ModalCrearAsistencia\n          data={fechaId}\n          actualizarTabla={getAsistencia}\n          fechas={data}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ListaAsistencia;\n","import { utils, writeFileXLSX, writeFile } from \"xlsx\";\nexport const handleDownloadExcel = (dataSource, sheetName, fileName) => {\n  const wb = utils.book_new();\n  const ws = utils.json_to_sheet(dataSource);\n  utils.book_append_sheet(wb, ws, sheetName);\n  writeFileXLSX(wb, `${fileName}.xlsx`);\n};\n\nexport const handleDownloadExcel1 = (dataSource, sheetName, fileName) => {\n  const wb = utils.book_new();\n  const headers = [\n    \"Hoja de Tareo\",\n    \"Header 2\",\n    \"Header 3\",\n    \"Header 4\",\n    \"Header 5\",\n    \"Header 6\",\n  ];\n\n  // Crear un array con la cabecera y las llaves de los objetos\n  const keys = [headers, Object.keys(dataSource[0])];\n\n  // Crear un array con la cabecera, las llaves y los valores de los objetos\n  const data = [...keys, ...dataSource.map((obj) => Object.values(obj))];\n\n  // Transformar el array de arrays en un array de objetos\n  const rows = data.map((arr) =>\n    arr.reduce((acc, val, i) => {\n      acc[headers[i]] = val;\n      return acc;\n    }, {})\n  );\n\n  const ws = utils.json_to_sheet(rows);\n\n  // Establecer el ancho de las columnas de la cabecera\n  ws[\"!cols\"] = headers.map(() => ({\n    width: 20,\n    height: 40,\n    textAlign: \"center\",\n  }));\n\n  // Establecer el estilo de la cabecera\n  ws[\"!merges\"] = [{ s: { r: 0, c: 0 }, e: { r: 0, c: 1 } }];\n  ws[\"A1\"].s = { font: { bold: true } };\n  ws[\"B1\"].s = { font: { bold: true } };\n  ws[\"C1\"].s = { font: { bold: true } };\n  ws[\"D1\"].s = { font: { bold: true } };\n  ws[\"E1\"].s = { font: { bold: true } };\n  ws[\"F1\"].s = { font: { bold: true } };\n\n  utils.book_append_sheet(wb, ws, sheetName);\n  writeFileXLSX(wb, `${fileName}.xlsx`);\n};\n","//! moment.js locale configuration\n//! locale : Spanish (Mexico) [es-mx]\n//! author : JC Franco : https://github.com/jcfranco\n\n;(function (global, factory) {\n   typeof exports === 'object' && typeof module !== 'undefined'\n       && typeof require === 'function' ? factory(require('../moment')) :\n   typeof define === 'function' && define.amd ? define(['../moment'], factory) :\n   factory(global.moment)\n}(this, (function (moment) { 'use strict';\n\n    //! moment.js locale configuration\n\n    var monthsShortDot =\n            'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split(\n                '_'\n            ),\n        monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_'),\n        monthsParse = [\n            /^ene/i,\n            /^feb/i,\n            /^mar/i,\n            /^abr/i,\n            /^may/i,\n            /^jun/i,\n            /^jul/i,\n            /^ago/i,\n            /^sep/i,\n            /^oct/i,\n            /^nov/i,\n            /^dic/i,\n        ],\n        monthsRegex =\n            /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\\.?|feb\\.?|mar\\.?|abr\\.?|may\\.?|jun\\.?|jul\\.?|ago\\.?|sep\\.?|oct\\.?|nov\\.?|dic\\.?)/i;\n\n    var esMx = moment.defineLocale('es-mx', {\n        months: 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split(\n            '_'\n        ),\n        monthsShort: function (m, format) {\n            if (!m) {\n                return monthsShortDot;\n            } else if (/-MMM-/.test(format)) {\n                return monthsShort[m.month()];\n            } else {\n                return monthsShortDot[m.month()];\n            }\n        },\n        monthsRegex: monthsRegex,\n        monthsShortRegex: monthsRegex,\n        monthsStrictRegex:\n            /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,\n        monthsShortStrictRegex:\n            /^(ene\\.?|feb\\.?|mar\\.?|abr\\.?|may\\.?|jun\\.?|jul\\.?|ago\\.?|sep\\.?|oct\\.?|nov\\.?|dic\\.?)/i,\n        monthsParse: monthsParse,\n        longMonthsParse: monthsParse,\n        shortMonthsParse: monthsParse,\n        weekdays: 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),\n        weekdaysShort: 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),\n        weekdaysMin: 'do_lu_ma_mi_ju_vi_sá'.split('_'),\n        weekdaysParseExact: true,\n        longDateFormat: {\n            LT: 'H:mm',\n            LTS: 'H:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY H:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY H:mm',\n        },\n        calendar: {\n            sameDay: function () {\n                return '[hoy a la' + (this.hours() !== 1 ? 's' : '') + '] LT';\n            },\n            nextDay: function () {\n                return '[mañana a la' + (this.hours() !== 1 ? 's' : '') + '] LT';\n            },\n            nextWeek: function () {\n                return 'dddd [a la' + (this.hours() !== 1 ? 's' : '') + '] LT';\n            },\n            lastDay: function () {\n                return '[ayer a la' + (this.hours() !== 1 ? 's' : '') + '] LT';\n            },\n            lastWeek: function () {\n                return (\n                    '[el] dddd [pasado a la' +\n                    (this.hours() !== 1 ? 's' : '') +\n                    '] LT'\n                );\n            },\n            sameElse: 'L',\n        },\n        relativeTime: {\n            future: 'en %s',\n            past: 'hace %s',\n            s: 'unos segundos',\n            ss: '%d segundos',\n            m: 'un minuto',\n            mm: '%d minutos',\n            h: 'una hora',\n            hh: '%d horas',\n            d: 'un día',\n            dd: '%d días',\n            w: 'una semana',\n            ww: '%d semanas',\n            M: 'un mes',\n            MM: '%d meses',\n            y: 'un año',\n            yy: '%d años',\n        },\n        dayOfMonthOrdinalParse: /\\d{1,2}º/,\n        ordinal: '%dº',\n        week: {\n            dow: 0, // Sunday is the first day of the week.\n            doy: 4, // The week that contains Jan 4th is the first week of the year.\n        },\n        invalidDate: 'Fecha inválida',\n    });\n\n    return esMx;\n\n})));\n"],"names":["Search","Input","abrirModal","registrar","exportar","crear","cargar","actualizarTabla","buscador","actualizarAsistencia","actualizar","data1","cargando","setCargando","validacion","data2","modal","data","useContext","CrudContext","setFilterText","createData","setControlAsistencia","PlanillaContext","useState","inputFileRef","useRef","excelFile","e","formData","FormData","append","target","files","fetch","process","method","body","excel","json","response","notificacion","status","msg","current","value","console","log","className","style","display","alignItems","type","ref","onChange","placeholder","width","onClick","firma_gerente","firma_jefe","foto","result","trabajador_asistencia","map","dat","asistencium","fecha","asistencia","newObj","Object","assign","result2","slice","i","Nro","Nombre","nombre","Dni","dni","Celular","telefono","Cargo","contratos","puesto","Área","area","handleDownloadExcel1","click","fechas","fechaId","getData","setData2","updateData","dataToEdit","setModal","setDataToEdit","id","setId","useEffect","prueba","filter","item","at","filtrarFechaId","getTrabajadorAsistencia","route","handleAsistencia","event","info","asistencia_id","trabajador_id","handleIngreso","obj","hora_ingreso","columns","crearAsistencia","MainModal","title","open","closeModal","htmlFor","name","defaultValue","Buscador","Tabla","table","setData","deleteData","setFechaId","getAsistencia","useSearch","handleDelete","stopPropagation","dayjs","format","toString","Header","text","user","ruta","justifyContent","marginTop","height","border","borderRadius","padding","fullscreen","mode","locale","dateCellRender","date","fechaCalendario","length","handleEdit","handleDownloadExcel","dataSource","sheetName","fileName","wb","utils","ws","writeFileXLSX","headers","keys","rows","values","arr","reduce","acc","val","textAlign","s","r","c","font","bold","moment","monthsShortDot","split","monthsShort","monthsParse","monthsRegex","defineLocale","months","m","test","month","monthsShortRegex","monthsStrictRegex","monthsShortStrictRegex","longMonthsParse","shortMonthsParse","weekdays","weekdaysShort","weekdaysMin","weekdaysParseExact","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","this","hours","nextDay","nextWeek","lastDay","lastWeek","sameElse","relativeTime","future","past","ss","mm","h","hh","d","dd","w","ww","M","MM","y","yy","dayOfMonthOrdinalParse","ordinal","week","dow","doy","invalidDate","factory","require"],"sourceRoot":""}