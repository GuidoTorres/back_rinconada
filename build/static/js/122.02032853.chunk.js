"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[122],{91743:function(e,n,a){a.d(n,{Z:function(){return p}});var t=a(1413),i=a(93433),o=a(4942),r=a(74165),l=a(15861),s=a(29439),c=a(72791),d=a(38411),u=a(71368),v=a(300),h=a(87309),f=a(99763),x=(a(37530),a(4333),a(80184)),j=a(2541),m=v.Z.Search,p=function(e){var n=e.abrirModal,a=e.registrar,v=(e.crear,e.exportar),p=e.cargar,b=e.actualizarTabla,g=(e.actualizarAsistencia,e.actualizar,e.buscador),Z=(e.cargando,e.setCargando,e.data1),y=(e.data2,e.validacion),C=e.modal,F=(e.data,(0,c.useContext)(d.s)),w=(F.createData,F.setFilterText),k=(0,c.useContext)(u.c).setControlAsistencia,_=(0,c.useState)(!1),P=(0,s.Z)(_,2),D=(P[0],P[1],(0,c.useState)(null)),N=(0,s.Z)(D,2),T=(N[0],N[1],(0,c.useRef)(null)),H=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var a,t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("myFile",n.target.files[0]),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:a});case 4:return t=e.sent,e.next=7,t.json();case 7:(i=e.sent)&&((0,f.q)(i.status,i.msg),b(),k(!1),T.current.value=null),T.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return console.log("===================================="),console.log(Z),console.log("===================================="),(0,x.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,x.jsx)("input",{type:"file",ref:T,onChange:H,style:{display:"none"}}),g?(0,x.jsx)(m,{placeholder:"Ingresa una nombre...",onChange:function(e){return w(e.target.value)},style:{width:300}}):(0,x.jsxs)("div",{children:[!1!==a?(0,x.jsx)(h.ZP,{onClick:function(){n(!0)},children:"Registrar"}):"",!1!==v&&null!==Z&&void 0!==Z&&Z.firma_gerente&&null!==Z&&void 0!==Z&&Z.firma_jefe&&null!==Z&&void 0!==Z&&Z.foto?(0,x.jsx)(h.ZP,{onClick:function(e){var n,a,r=null===(n=Z.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var n;return(0,o.Z)({},null===e||void 0===e||null===(n=e.asistencium)||void 0===n?void 0:n.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),l=Object.assign.apply(Object,[{}].concat((0,i.Z)(r))),s=null===Z||void 0===Z||null===(a=Z.trabajador_asistencia)||void 0===a?void 0:a.slice(0,1).map((function(e,n){var a,i;return(0,t.Z)({Nro:n+1,Nombre:null===Z||void 0===Z?void 0:Z.nombre,Dni:null===Z||void 0===Z?void 0:Z.dni,Celular:null===Z||void 0===Z?void 0:Z.telefono,Cargo:null===Z||void 0===Z||null===(a=Z.contratos)||void 0===a?void 0:a.puesto,"\xc1rea":null===Z||void 0===Z||null===(i=Z.contratos)||void 0===i?void 0:i.area},l)}));(0,j.H)(s,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==y?(0,x.jsx)(h.ZP,{onClick:function(){C(!0)},children:"Validaci\xf3n "}):"",!1!==p?(0,x.jsx)(h.ZP,{style:{width:"100px"},onClick:function(){T.current.click()},children:"Cargar"}):""]})]})}},32163:function(e,n,a){var t=a(300),i=a(87309),o=a(72791),r=a(38411),l=a(71368),s=a(80184),c=t.Z.Search;n.Z=function(e){e.abrirModal;var n=e.registrar,a=(0,o.useContext)(l.c).setJuntarTeletrans,t=(0,o.useContext)(r.s).setFilterText;return(0,s.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(c,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return t(e.target.value)},style:{width:300}}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,s.jsx)("div",{children:!1!==n?(0,s.jsx)(i.ZP,{onClick:function(){a(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})}},85530:function(e,n,a){a.d(n,{Z:function(){return b}});var t=a(74165),i=a(15861),o=a(29439),r=a(72791),l=a(38411),s=a(71368),c=a(4808),d=a(91743),u=a(79260),v=(a(95579),a(69967)),h=a(17615),f=a(87309),x=a(99763),j=a(72966),m=a(80184),p=function(e){var n=e.modal,a=e.setModal,l=e.data,s=e.actualizarTabla,c=(0,r.useState)(null),d=(0,o.Z)(c,2),u=d[0],p=d[1],b=function(){a(!1)},g=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,a,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,(null===u||void 0===u?void 0:u.file)&&n.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===l||void 0===l?void 0:l.aprobacion_id),{method:"PUT",body:n});case 4:return a=e.sent,e.next=7,a.json();case 7:(i=e.sent)&&((0,x.q)(i.status,i.msg),b(),s());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(v.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:n,width:400,closeModal:b,children:(0,m.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,m.jsx)(h.Z.Item,{children:(0,m.jsx)("div",{className:"drag-container",children:(0,m.jsx)(j.Z,{avatar:u,setAvatar:p,selected:l})})}),(0,m.jsx)("div",{className:"button-container",children:(0,m.jsx)(f.ZP,{htmlType:"submit",children:"Guardar"})})]})})},b=function(e){var n,a=e.data,h=e.modal,f=e.setModal,x=e.actualizarTabla,j=(0,r.useContext)(s.c),b=(j.verificacion,j.setVerificacion,(0,r.useContext)(l.s)),g=(b.getDataById,b.data2,(0,r.useState)()),Z=(0,o.Z)(g,2),y=(Z[0],Z[1],(0,r.useState)([])),C=(0,o.Z)(y,2),F=C[0],w=(C[1],(0,r.useState)(!1)),k=(0,o.Z)(w,2),_=k[0],P=k[1],D=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){D()}),[]);var N=(0,u.MK)();return console.log("===================================="),console.log(a),console.log("===================================="),(0,m.jsxs)(v.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){f(!1)},children:[(0,m.jsxs)("div",{className:"tareo-container",children:[(0,m.jsxs)("section",{className:"tareo-datos",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Nombre: "}),null===a||void 0===a?void 0:a.nombre]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Dni: "}),null===a||void 0===a?void 0:a.dni]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Tel\xe9fono: "}),null===a||void 0===a?void 0:a.celular]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Cargo:"})," ",null===a||void 0===a?void 0:a.cargo]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===a||void 0===a?void 0:a.asistencia]})})]}),(0,m.jsx)("section",{className:"tareo-boton",children:(0,m.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!0,validacion:!0,cargar:!1,data1:a,data2:F,modal:P})})]}),(0,m.jsx)(c.Z,{columns:N,table:null===a||void 0===a||null===(n=a.asistencia_completa)||void 0===n?void 0:n.reverse()}),_&&(0,m.jsx)(p,{modal:_,setModal:P,data:a,actualizarTabla:x})]})}},38316:function(e,n,a){a.d(n,{Z:function(){return u}});var t=a(74165),i=a(15861),o=a(29439),r=a(72791),l=a(38411),s=(a(91743),a(4808),a(71368)),c=a(69967),d=a(80184),u=function(e){var n=e.data,a=e.modal,u=e.setModal,v=(0,r.useContext)(s.c),h=(v.setValidacionPagosAsociacion,v.setFechas),f=(v.fechas,v.verificacion,v.setVerificacion,(0,r.useContext)(l.s)),x=f.getData,j=f.data3,m=f.setData3,p=(f.data2,f.dataToEdit,(0,r.useState)()),b=(0,o.Z)(p,2),g=(b[0],b[1],(0,r.useState)()),Z=(0,o.Z)(g,2),y=Z[0],C=Z[1],F=(0,r.useState)([]),w=(0,o.Z)(F,2),k=(w[0],w[1],function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var a,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="planilla/tareo/asociacion/".concat(n.id),e.next=3,x(a);case 3:i=e.sent,m(i.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,r.useEffect)((function(){k()}),[]),console.log(n);return(0,r.useEffect)((function(){var e;h(j),C(null===j||void 0===j||null===(e=j.map((function(e){return e.fecha})))||void 0===e?void 0:e.filter((function(e){return void 0!==e})))}),[j]),(0,d.jsxs)(c.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:a,width:900,closeModal:function(){u(!1)},children:[(0,d.jsxs)("section",{style:{paddingLeft:"30px"},children:[(0,d.jsx)("div",{children:(0,d.jsxs)("label",{htmlFor:"",children:["Nombre: ",n&&null!==n&&void 0!==n&&n.nombre?n.nombre:"---"]})}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"5px"},children:[(0,d.jsx)("div",{children:(0,d.jsxs)("label",{htmlFor:"",children:["Dni: ",n&&null!==n&&void 0!==n&&n.dni?n.dni:"---"]})}),(0,d.jsx)("div",{style:{marginLeft:"50px"},children:(0,d.jsxs)("label",{htmlFor:"",children:["Tel\xe9fono: ",n&&null!==n&&void 0!==n&&n.telefono?n.telefono:"---"]})}),(0,d.jsx)("div",{style:{marginLeft:"50px"},children:(0,d.jsxs)("label",{htmlFor:"",children:["Cargo: ",n&&null!==n&&void 0!==n&&n.cargo?n.cargo:"---"]})})]})]}),(0,d.jsx)("section",{className:"table-container",children:(0,d.jsxs)("table",{children:[(0,d.jsxs)("tr",{style:{},children:[(0,d.jsx)("th",{children:"Nro"}),(0,d.jsx)("th",{children:"Hoja de tareo asistencia de operacion"}),null===y||void 0===y?void 0:y.map((function(e){return e.map((function(e){return(0,d.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)"},children:(0,d.jsx)("span",{children:e})})}))}))]}),null===j||void 0===j?void 0:j.map((function(e,n){var a;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:n+1}),(0,d.jsx)("td",{children:(null===e||void 0===e?void 0:e.nombre)+" "+(null===e||void 0===e?void 0:e.apellido_paterno)+" "+(null===e||void 0===e?void 0:e.apellido_materno)}),null===e||void 0===e||null===(a=e.trabajador_asistencia)||void 0===a?void 0:a.map((function(e){return(0,d.jsx)("td",{children:"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F"})}))]},n+2)}))]})})]})}},2541:function(e,n,a){a.d(n,{H:function(){return r},S:function(){return o}});var t=a(93433),i=a(34045),o=function(e,n,a){var t=i.P6.book_new(),o=i.P6.json_to_sheet(e);i.P6.book_append_sheet(t,o,n),(0,i.Fv)(t,"".concat(a,".xlsx"))},r=function(e,n,a){var o=i.P6.book_new(),r=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],l=[r,Object.keys(e[0])],s=[].concat(l,(0,t.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,n,a){return e[r[a]]=n,e}),{})})),c=i.P6.json_to_sheet(s);c["!cols"]=r.map((function(){return{width:20,height:40,textAlign:"center"}})),c["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],c.A1.s={font:{bold:!0}},c.B1.s={font:{bold:!0}},c.C1.s={font:{bold:!0}},c.D1.s={font:{bold:!0}},c.E1.s={font:{bold:!0}},c.F1.s={font:{bold:!0}},i.P6.book_append_sheet(o,c,n),(0,i.Fv)(o,"".concat(a,".xlsx"))}},97603:function(){}}]);
//# sourceMappingURL=122.02032853.chunk.js.map