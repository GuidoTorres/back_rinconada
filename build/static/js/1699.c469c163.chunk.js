"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[1699],{48658:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(4942),a=n(74165),i=n(15861),s=n(29439),o=n(72791),l=n(38411),c=n(53939),d=n(99763),u=n(83188),p=(n(4808),n(49389)),x=(n(28938),n(80184)),g=p.Z.Search,h=function(e){var t=e.setFilterText;return(0,x.jsx)("div",{className:"buscador-finanza",children:(0,x.jsx)(g,{placeholder:"Buscar",onChange:function(e){return t(e.target.value)},style:{width:300}})})},f=n(95579),m=(n(12469),n(34664)),v=n(43513),j=function(e){var t=e.columns,n=e.table;e.set;return(0,x.jsx)("div",{className:"table-container",children:(0,x.jsx)(v.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){var t=e.data;return(0,x.jsx)("div",{style:{padding:"10px 20px 10px 60px"},children:(0,x.jsxs)("div",{style:{marginTop:"5px"},children:[(0,x.jsxs)("label",{htmlFor:"",children:[(0,x.jsx)("strong",{children:"Solicitante:"})," ",t.solicitante]}),(0,x.jsx)("br",{}),(0,x.jsxs)("label",{htmlFor:"",children:[(0,x.jsx)("strong",{children:"Tel\xe9fono:"})," ",t.celular]}),(0,x.jsxs)("table",{style:{marginTop:"20px"},children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{style:{width:"140px",textAlign:"center"},children:(0,x.jsx)("strong",{children:"Fecha de pedido"})}),(0,x.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,x.jsx)("strong",{children:"Producto"})}),(0,x.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,x.jsx)("strong",{children:"Cantidad"})})]}),t.requerimiento_productos.map((function(e,n){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{style:{textAlign:"center"},children:t.fecha_pedido}),(0,x.jsx)("td",{style:{textAlign:"center"},children:e.producto.nombre}),(0,x.jsx)("td",{style:{textAlign:"center"},children:e.cantidad})]},n)}))]})]})})},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,x.jsx)(m.Z,{image:m.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})})})},Z=function(){var e=(0,o.useContext)(l.s),t=e.getData,n=e.updateData,p=(0,o.useState)([]),g=(0,s.Z)(p,2),m=g[0],v=g[1],Z=(0,o.useState)(),b=(0,s.Z)(Z,2),w=b[0],S=b[1],T=(0,o.useState)([]),y=(0,s.Z)(T,2),A=y[0],P=y[1],E=(0,o.useState)(""),R=(0,s.Z)(E,2),C=R[0],_=R[1],k=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("requerimiento");case 2:n=e.sent,v(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.Z)(m).result;(0,o.useEffect)((function(){k()}),[]),(0,o.useEffect)((function(){if(void 0!==w){k();var e=m.filter((function(e){return e.id===w.id})).filter((function(e){return!0===e.aprobacion1&&!0===e.aprobacion2&&!0===e.aprobacion3}));if(e.length>0){I(w,{estado:!0})}if(0===e){I(w,{estado:!1})}}}),[w]);var I=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",e.next=3,n(r,t.id,"requerimiento");case 3:(i=e.sent)&&((0,d.q)(i.status,i.mensaje),k());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,i){var s,o,l,c,u,p,x,g,h,f,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",S(i),"aprobacion_jefe"===t.target.name&&(!0===t.target.checked?(s=JSON.parse(localStorage.getItem("firma")),u={},(0,r.Z)(u,t.target.name,t.target.checked),(0,r.Z)(u,"firma_jefe",s),c=u):(p={},(0,r.Z)(p,t.target.name,t.target.checked),(0,r.Z)(p,"firma_jefe",""),c=p)),"aprobacion_gerente"===t.target.name&&(!0===t.target.checked?(o=JSON.parse(localStorage.getItem("firma")),x={},(0,r.Z)(x,t.target.name,t.target.checked),(0,r.Z)(x,"firma_gerente",o),c=x):(g={},(0,r.Z)(g,t.target.name,t.target.checked),(0,r.Z)(g,"firma_gerente",""),c=g)),"aprobacion_superintendente"===t.target.name&&(!0===t.target.checked?(l=JSON.parse(localStorage.getItem("firma")),h={},(0,r.Z)(h,t.target.name,t.target.checked),(0,r.Z)(h,"firma_superintendente",l),c=h):(f={},(0,r.Z)(f,t.target.name,t.target.checked),(0,r.Z)(f,"firma_superintendente",""),c=f)),e.next=7,n(c,i.id,"requerimiento");case 7:(m=e.sent)&&((0,d.q)(m.status,m.msg),k());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var e=null===m||void 0===m?void 0:m.filter((function(e){return""===C||e.id.toString()===C}));P(e)}),[C,m]);var F=(0,c.DQ)(N,(function(){}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{text:"Aprobaciones",user:"Usuario",ruta:"/logistica"}),(0,x.jsxs)("div",{className:"margenes",children:[(0,x.jsx)(h,{setFilterText:_}),(0,x.jsx)(j,{columns:F,table:A})]})]})}},4808:function(e,t,n){var r=n(29439),a=n(72791),i=n(43513),s=n(34664),o=(n(51279),n(76487),n(80184));t.Z=function(e){var t=e.columns,n=e.table,l=e.filas,c=a.useState(!0),d=(0,r.Z)(c,2),u=(d[0],d[1]),p=a.useState([]),x=(0,r.Z)(p,2),g=(x[0],x[1]);a.useEffect((function(){var e=setTimeout((function(){g(n),u(!1)}),2e3);return function(){return clearTimeout(e)}}),[]);var h=l?[l,2*l,3*l,4*l,5*l]:[10,20,30,40,50];return(0,o.jsx)("div",{className:"table-container",children:(0,o.jsx)(i.ZP,{columns:t,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,keyField:function(e,t){return t.toString()},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos",preserveSelectedOnPageChange:!0},paginationPerPage:l||10,paginationRowsPerPageOptions:h,noDataComponent:(0,o.jsx)(s.Z,{image:s.Z.PRESENTED_IMAGE_SIMPLE,description:(0,o.jsx)("span",{children:"No hay registros para mostrar."})})})})}},12469:function(e,t,n){var r=n(34664),a=(n(72791),n(43513)),i=(n(51279),n(80184));t.Z=function(e){var t=e.columns,n=e.table,s=e.set;return(0,i.jsx)("div",{className:"table-container",children:(0,i.jsx)(a.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,selectableRows:!0,expandableRows:!0,expandableRowsComponent:function(e){var t,n=e.data;return(0,i.jsx)("div",{style:{padding:"10px 20px 10px 60px"},children:(0,i.jsxs)("div",{style:{marginTop:"5px"},children:[(0,i.jsxs)("label",{htmlFor:"",children:[(0,i.jsx)("strong",{children:"Solicitante:"})," ",null===n||void 0===n?void 0:n.solicitante]}),(0,i.jsx)("br",{}),(0,i.jsxs)("label",{htmlFor:"",children:[(0,i.jsx)("strong",{children:"Tel\xe9fono:"})," ",null===n||void 0===n?void 0:n.celular]}),(0,i.jsxs)("table",{style:{marginTop:"20px"},children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{width:"140px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Fecha de pedido"})}),(0,i.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Producto"})}),(0,i.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Cantidad"})})]}),null===n||void 0===n||null===(t=n.requerimiento_productos)||void 0===t?void 0:t.map((function(e,t){var r;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{textAlign:"center"},children:null===n||void 0===n?void 0:n.fecha_pedido}),(0,i.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e||null===(r=e.producto)||void 0===r?void 0:r.nombre}),(0,i.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.cantidad})]},t)}))]})]})})},expandableRowDisabled:function(e){return 1===(null===e||void 0===e?void 0:e.completado)},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE,description:(0,i.jsx)("span",{children:"No hay registros para mostrar."})}),onSelectedRowsChange:function(e){var t=e.selectedRows;void 0!==s&&s(t)},selectableRowDisabled:function(e){return"Aprobado"!==e.estado}})})}},95579:function(e,t,n){var r=n(72791),a=n(38411);t.Z=function(e){var t=(0,r.useContext)(a.s),n=t.filterText,i=(t.filterTextModal,t.result),s=t.setResult;return(0,r.useEffect)((function(){if(""!==n){var t=e.filter((function(e){return Object.values(e).join("").toLowerCase().includes(n.toLowerCase())}));s(t)}else s(e)}),[n,e]),{result:i}}},28938:function(){}}]);
//# sourceMappingURL=1699.c469c163.chunk.js.map