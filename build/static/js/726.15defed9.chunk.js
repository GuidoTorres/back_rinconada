(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[726],{97249:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return M}});var n=t(4942),r=t(74165),o=t(15861),s=t(29439),i=t(4333),l=(t(97892),t(72791)),c=t(38411),d=t(53939),u=t(8771),m=t(99775),f=t(99763),h=t(83188),x=t(34664),p=t(43513),v=t(80184),b=function(e){var a=e.columns,t=e.table;e.set;return(0,v.jsx)("div",{className:"table-container",children:(0,v.jsx)(p.ZP,{columns:a,data:t,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,v.jsx)(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE,description:(0,v.jsx)("span",{children:"No hay registros para mostrar."})})})})},j=(t(91906),t(49389).Z.Search),g=function(e){var a=e.setFilterText;return(0,v.jsx)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"300px"},children:(0,v.jsx)(j,{placeholder:"Ingresa una nombre...",onChange:function(e){return a(e.target.value)},style:{width:300}})})},Z=(t(83060),t(28181)),M=function(){var e=(0,l.useState)([]),a=(0,s.Z)(e,2),t=a[0],x=a[1],p=(0,l.useContext)(c.s),j=p.getData,M=p.updateData,_=p.createData,y=(0,l.useState)(!1),Y=(0,s.Z)(y,2),w=Y[0],L=Y[1],S=(0,l.useState)([]),D=(0,s.Z)(S,2),T=D[0],k=D[1],C=(0,l.useState)(""),E=(0,s.Z)(C,2),N=E[0],F=E[1],A=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("aprobacion");case 2:(a=e.sent)&&x(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){A()}),[]);var H=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,t){var o,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",a.target.checked&&(o=JSON.parse(localStorage.getItem("firma"))),s=(0,n.Z)({},a.target.name,o||null),e.next=5,M(s,t.id,"planilla/asistencia");case 5:(i=e.sent)&&((0,f.q)(i.status,i.msg),A());case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),I=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a){var t,n,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={asociacion_id:null!==a.asociacion_id?a.asociacion_id:null,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,dni:null!==a.dni?a.dni:null,quincena:a.subarray_id},e.next=3,_(t,"aprobacion/asistencias");case 3:if(!(n=e.sent)){e.next=14;break}if(null===a.asociacion_id){e.next=9;break}return e.next=8,(0,i.eA)((0,u.Z)(n.data)).toBlob();case 8:o=e.sent;case 9:if(null===a.dni){e.next=13;break}return e.next=12,(0,i.eA)((0,m.Z)(n.data)).toBlob();case 12:o=e.sent;case 13:o&&(s=URL.createObjectURL(o),(l=document.createElement("a")).href=s,l.download="tareo.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s));case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=null===t||void 0===t?void 0:t.filter((function(e){var a,t;return null===e||void 0===e||null===(a=e.nombre)||void 0===a||null===(t=a.toLowerCase())||void 0===t?void 0:t.includes(N.toLowerCase())}));k(e)}),[N,t]);var P=(0,d.x6)(H,I,(function(){L(!0)}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(h.Z,{text:"Aprobaciones",ruta:"/planilla"}),(0,v.jsxs)("div",{className:"margenes",children:[(0,v.jsx)(g,{setFilterText:F}),(0,v.jsx)(b,{columns:P,table:T})]}),w&&(0,v.jsx)(Z.Z,{modal:w,setModal:L})]})}},83060:function(e,a,t){"use strict";t.d(a,{Z:function(){return M}});var n=t(74165),r=t(15861),o=t(29439),s=t(72791),i=t(71368),l=t(4808),c=t(91906),d=t(38411),u=t(53939),m=t(69967),f=t(28181),h=t(17615),x=t(87309),p=t(99763),v=t(72966),b=t(80184),j=function(e){var a=e.modal,t=e.setModal,i=e.data,l=e.actualizarTabla,c=(0,s.useState)(null),d=(0,o.Z)(c,2),u=d[0],f=d[1],j=function(){t(!1)},g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a,t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===i||void 0===i?void 0:i.aprobacion_id),{method:"PUT",body:a});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent)&&((0,p.q)(r.status,r.msg),j(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(m.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:j,children:(0,b.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,b.jsx)(h.Z.Item,{children:(0,b.jsx)("div",{className:"drag-container",children:(0,b.jsx)(v.Z,{avatar:u,setAvatar:f,selected:i})})}),(0,b.jsx)("div",{className:"button-container",children:(0,b.jsx)(x.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var a,t=e.data,h=e.modal,x=e.setModal,p=e.actualizarTabla,v=(0,s.useContext)(i.c),g=(v.verificacion,v.setVerificacion,(0,s.useContext)(d.s)),Z=(g.getDataById,g.data2,(0,s.useState)()),M=(0,o.Z)(Z,2),_=(M[0],M[1],(0,s.useState)([])),y=(0,o.Z)(_,2),Y=y[0],w=(y[1],(0,s.useState)(!1)),L=(0,o.Z)(w,2),S=L[0],D=L[1],T=(0,s.useState)(!1),k=(0,o.Z)(T,2),C=k[0],E=k[1],N=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){N()}),[]);var F=(0,u.MK)();return(0,b.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){x(!1)},children:[(0,b.jsxs)("div",{className:"tareo-container",children:[(0,b.jsxs)("section",{className:"tareo-datos",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!1,validacion:!0,cargar:!1,data1:t,data2:Y,observacion:!0,modal:D,setModal1:E})})]}),(0,b.jsx)(l.Z,{columns:F,table:null===t||void 0===t||null===(a=t.asistencia_completa)||void 0===a?void 0:a.reverse()}),S&&(0,b.jsx)(j,{modal:S,setModal:D,data:t,actualizarTabla:p}),C&&(0,b.jsx)(f.Z,{setModal:E,modal:C,data:t,observacion:"",boton:!0})]})},Z=function(e){var a=e.data,t=e.modal,n=e.setModal,r=(0,s.useContext)(i.c),l=(r.setValidacionPagosAsociacion,r.setFechas,r.fechas,r.verificacion,r.setVerificacion,(0,s.useState)(!1)),u=(0,o.Z)(l,2),h=u[0],x=u[1],p=(0,s.useContext)(d.s),v=(p.getData,p.data3,p.setData3,p.data2,p.dataToEdit,(0,s.useState)()),j=(0,o.Z)(v,2);j[0],j[1];return(0,b.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:950,closeModal:function(){n(!1)},children:[(0,b.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!1,observacion:!0,setModal1:x})})]}),(0,b.jsx)("section",{className:"table-container",children:(0,b.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,b.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,b.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,b.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,b.jsx)("span",{children:e})},a)}))]})}),(0,b.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,b.jsxs)("tr",{style:{padding:"5px"},children:[(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a+1}),(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,o.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var t=(0,o.Z)(e,2),n=(t[0],t[1]);return(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:n},a)}))]},a)}))})]})}),h&&(0,b.jsx)(f.Z,{setModal:x,modal:h,data:a,observacion:"",boton:!0})]})},M=function(e){var a=e.selected,t=(e.actualizarTabla,e.planillaControl),c=e.setPlanillaControl,f=(0,s.useState)([]),h=(0,o.Z)(f,2),x=(h[0],h[1]),p=(0,s.useState)([]),v=(0,o.Z)(p,2),j=v[0],M=v[1],_=(0,s.useContext)(i.c).setPago,y=(0,s.useContext)(d.s).getData,Y=(0,s.useState)([]),w=(0,o.Z)(Y,2),L=w[0],S=w[1],D=(0,s.useState)(!1),T=(0,o.Z)(D,2),k=T[0],C=T[1],E=(0,s.useState)(!1),N=(0,o.Z)(E,2),F=N[0],A=N[1],H=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return t="planilla/tareo/".concat(a.dni),e.next=4,y(t);case 4:r=e.sent,S(r.data),e.next=13;break;case 8:return o="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,y(o);case 11:s=e.sent,S(s.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){H()}),[a]),(0,s.useEffect)((function(){x([a])}),[a]);var I=(0,u.qQ)((function(e){""===a.codigo?(A(!0),M(e)):(C(!0),M(e))}),(function(e){_(!0),M(e)}));return(0,b.jsxs)(m.Z,{className:"modal-planilla",title:"Control de planilla",open:t,width:900,closeModal:function(){c(!1)},children:[(0,b.jsx)(l.Z,{columns:I,table:L}),k&&(0,b.jsx)(g,{data:j,modal:k,setModal:C,actualizarTabla:H}),F&&(0,b.jsx)(Z,{data:j,modal:F,setModal:A,actualizarTabla:H})]})}},52563:function(e,a,t){e.exports=function(e){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=a(e),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return t.default.locale(n,null,!0),n}(t(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,t,n){var r=t.prototype,o=r.format;n.en.formats=e,r.format=function(a){void 0===a&&(a="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=function(a,t){return a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(a,n,r){var o=r&&r.toUpperCase();return n||t[r]||e[r]||t[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,a,t){return a||t.slice(1)}))}))}(a,void 0===t?{}:t);return o.call(this,n)}}}()}}]);
//# sourceMappingURL=726.15defed9.chunk.js.map