"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[271],{3066:function(a,e,n){n.d(e,{Z:function(){return d}});var i=n(72791),s=n(38411),o=n(49389),r=n(87309),t=n(78820),l=n(80184),c=o.Z.Search,d=function(a){var e=a.abrirModal,n=(0,i.useContext)(s.s).setFilterText;return(0,l.jsxs)("div",{className:"buscador-container",children:[(0,l.jsx)(c,{placeholder:"Ingresa un termino aqui...",onChange:function(a){return n(a.target.value)},style:{width:300}}),(0,l.jsx)("div",{className:"button-container",children:(0,l.jsx)(r.ZP,{onClick:function(){return e(!0)},icon:(0,l.jsx)(t.lFz,{}),children:"Registrar"})})]})}},85126:function(a,e,n){n.d(e,{Z:function(){return f}});var i=n(4942),s=n(1413),o=n(74165),r=n(15861),t=n(29439),l=n(72791),c=n(38411),d=n(69967),u=n(32014),h=n(49389),m=n(83733),v=n(87309),p=n(78820),g=n(99763),x=n(80184),f=function(a){a.actualizarTabla;var e=(0,l.useContext)(c.s),n=e.modal1,f=e.setModal1,Z=e.updateData,_=e.setDataToEdit,j=e.dataToEdit,k=e.getData,C=e.cargando,b=e.setCargando,y=(0,l.useState)([{administracion:"",administracion_campamento:"",administracion_rol:"",administracion_usuario:"",finanzas:"",finanzas_ingreso:"",finanzas_proveedor:"",finanzas_sucursal:"",logistica:"",logistica_almacen:"",logistica_aprobacion:"",logistica_categoria:"",logistica_estadistica:"",logistica_inventario:"",logistica_requerimiento:"",logistica_transferencia:"",personal:"",personal_empresa:"",personal_grupal:"",personal_socio:"",personal_trabajador:"",planillas:"",planillas_asistencia:"",planillas_control:"",personal_contrato:"",personal_evaluacion:"",personal_trapiche:"",personal_volquete:"",planillas_programacion:"",planillas_realizar_pagos:"",planillas_historial:"",planillas_incentivos:"",planillas_casa:"",planillas_asociacion:"",logistica_aprobacion_jefe:"",logistica_aprobacion_gerente:"",logistica_aprobacion_superintendente:""}]),N=(0,t.Z)(y,2),z=N[0],w=N[1],F=function(){var a=(0,r.Z)((0,o.Z)().mark((function a(){var e;return(0,o.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k("usuario/permiso/".concat(null===j||void 0===j?void 0:j.id));case 2:e=a.sent,w(e.data[0]);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();(0,l.useEffect)((function(){null!==j&&F()}),[j]);var E=function(){f(!1),_(null)},T=function(a){if(a.target){var e=a.target,n=e.name,o=e.checked;w((function(a){return(0,s.Z)((0,s.Z)({},a),{},(0,i.Z)({},n,o))}))}},M=function(){var a=(0,r.Z)((0,o.Z)().mark((function a(){var e;return(0,o.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return b(!0),"usuario/permisos",a.next=4,Z(z,j.id,"usuario/permisos");case 4:(e=a.sent)&&((0,g.q)(e.status,e.msg),F(),E(),b(!1));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),q=[{key:"1",label:"Administraci\xf3n",children:(0,x.jsxs)("div",{className:"check-container",children:[(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.administracion,name:"administracion",onChange:T,children:"Menu administraci\xf3n"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.administracion_usuario,name:"administracion_usuario",onChange:T,children:"Usuarios"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.administracion_rol,name:"administracion_rol",onChange:T,children:"Roles"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.administracion_campamento,name:"administracion_campamento",onChange:T,children:"Campamentos"})]})},{key:"2",label:"Personal",children:(0,x.jsxs)("div",{className:"check-container",children:[(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal,name:"personal",onChange:T,children:"Menu personal"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_trabajador,name:"personal_trabajador",onChange:T,children:"Trabajadores"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_grupal,name:"personal_grupal",onChange:T,children:"Grupales"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_empresa,name:"personal_empresa",onChange:T,children:"Empresa"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_socio,name:"personal_socio",onChange:T,children:"Socios"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_trapiche,name:"personal_trapiche",onChange:T,children:"Trapiches"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_volquete,name:"personal_volquete",onChange:T,children:"Volquetes"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_contrato,name:"personal_contrato",onChange:T,children:"Trabajador contrato"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.personal_evaluacion,name:"personal_evaluacion",onChange:T,children:"Trabajador evaluaci\xf3n"})]})},{key:"3",label:"Planillas",children:(0,x.jsxs)("div",{className:"check-container",children:[(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas,name:"planillas",onChange:T,children:"Menu planillas"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_asistencia,name:"planillas_asistencia",onChange:T,children:"Lista de asistencia"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_control,name:"planillas_control",onChange:T,children:"Planillas"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_programacion,name:"planillas_programacion",onChange:T,children:"Programaci\xf3n de pagos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_realizar_pagos,name:"planillas_realizar_pagos",onChange:T,children:"Realizar pagos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_historial,name:"planillas_historial",onChange:T,children:"Historial de pagos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_incentivos,name:"planillas_incentivos",onChange:T,children:"Incentivos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_casa,name:"planillas_casa",onChange:T,children:"Casa"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.planillas_asociacion,name:"planillas_asociacion",onChange:T,children:"Asociaci\xf3n"})]})},{key:"4",label:"Log\xedstica",children:(0,x.jsxs)("div",{className:"check-container",children:[(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica,name:"logistica",onChange:T,children:"Menu logistica"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_inventario,name:"logistica_inventario",onChange:T,children:"Inventario"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_almacen,name:"logistica_almacen",onChange:T,children:"Almacenes"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_requerimiento,name:"logistica_requerimiento",onChange:T,children:"Requerimientos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_aprobacion,name:"logistica_aprobacion",onChange:T,children:"Aprobaciones"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_transferencia,name:"logistica_transferencia",onChange:T,children:"Transferencia"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_categoria,name:"logistica_categoria",onChange:T,children:"Categor\xedas"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.logistica_estadistica,name:"logistica_estadistica",onChange:T,children:"Estad\xedsticas"})]})},{key:"5",label:"Finanzas",children:(0,x.jsxs)("div",{className:"check-container",children:[(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.finanzas,name:"finanzas",onChange:T,children:"Menu finanzas"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.finanzas_ingreso,name:"finanzas_ingreso",onChange:T,children:"Ingresos/Egresos"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.finanzas_proveedor,name:"finanzas_proveedor",onChange:T,children:"Proveedores"}),(0,x.jsx)(u.Z,{checked:null===z||void 0===z?void 0:z.finanzas_sucursal,name:"finanzas_sucursal",onChange:T,children:"Sucursales"})]})}];return(0,x.jsxs)(d.Z,{className:"modal-permisos",title:"Modificar permisos",open:n,width:800,closeModal:E,children:[(0,x.jsxs)("section",{className:"modal-body",children:[(0,x.jsx)("div",{className:"header",children:(0,x.jsx)(h.Z,{disabled:!0,value:null===j||void 0===j?void 0:j.nombre,style:{width:"200px"}})}),(0,x.jsx)(m.Z,{className:"tabs",defaultActiveKey:"1",items:q,onChange:T,centered:!0})]}),(0,x.jsx)("div",{className:"button-container",children:(0,x.jsx)(v.ZP,{onClick:M,icon:(0,x.jsx)(p.JMf,{}),loading:!!C,children:"Guardar"})})]})}},24271:function(a,e,n){n.r(e),n.d(e,{default:function(){return E}});var i=n(74165),s=n(15861),o=n(29439),r=n(72791),t=n(38411),l=n(1413),c=n(4942),d=n(16026),u=n(69967),h=n(17615),m=n(87309),v=n(63998),p=n(99763),g=n(78820),x=n(72966),f=n(80184),Z=function(a){var e=a.actualizarTabla,n=h.Z.useForm(),Z=(0,o.Z)(n,1)[0],_=(0,r.useContext)(t.s),j=(_.createData,_.updateData,_.modal),k=_.setModal,C=_.setDataToEdit,b=_.dataToEdit,y=_.getData,N=_.cargando,z=_.setCargando,w=(0,r.useState)(d.FN),F=(0,o.Z)(w,2),E=F[0],T=F[1],M=(0,r.useState)([]),q=(0,o.Z)(M,2),D=q[0],P=q[1],S=(0,r.useState)([]),I=(0,o.Z)(S,2),A=I[0],R=I[1],U=(0,r.useState)(null),V=(0,o.Z)(U,2),L=V[0],B=V[1],G=function(){var a=(0,s.Z)((0,i.Z)().mark((function a(){var e,n,s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y("rol");case 2:return e=a.sent,a.next=5,y("cargo");case 5:return n=a.sent,a.next=8,Promise.all([e,n]);case 8:s=a.sent,P(s[0].data),R(s[1].data);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();(0,r.useEffect)((function(){G()}),[]),(0,r.useEffect)((function(){b?(T(b),Z.setFieldsValue(b)):T(d.FN)}),[b]);var H=function(){var a=(0,s.Z)((0,i.Z)().mark((function a(n){var s,o,r,t,l,c;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==b){a.next=18;break}return z(!0),(s=new FormData).set("nombre",E.nombre||""),s.set("usuario",E.usuario||""),s.set("contrasenia",E.contrasenia||""),s.set("estado",E.estado||""),s.set("rol_id",E.rol_id||""),s.set("cargo_id",E.cargo_id||""),s.set("foto",E.foto||""),(null===L||void 0===L?void 0:L.file)&&s.set("image",L.file||""),a.next=13,fetch("".concat("http://13.58.131.42:3000/api/v1","/usuario"),{method:"POST",body:s});case 13:return o=a.sent,a.next=16,o.json();case 16:(r=a.sent)&&((0,p.q)(r.status,r.msg),e(),J(),z(!1));case 18:if(!b){a.next=35;break}return(t=new FormData).set("nombre",E.nombre||""),t.set("usuario",E.usuario||""),t.set("contrasenia",E.contrasenia||""),t.set("estado",E.estado||""),t.set("rol_id",E.rol_id||""),t.set("cargo_id",E.cargo_id||""),t.set("foto",E.foto||""),(null===L||void 0===L?void 0:L.file)&&t.set("image",L.file||""),a.next=30,fetch("".concat("http://13.58.131.42:3000/api/v1","/usuario/").concat(b.id),{method:"PUT",body:t});case 30:return l=a.sent,a.next=33,l.json();case 33:(c=a.sent)&&((0,p.q)(c.status,c.msg),e(),J(),z(!1));case 35:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function J(){k(!1),C(null),T(d.FN),z(!1)}var K=(0,v.pc)(E,(function(a,e){if(!e&&a.target){var n=a.target,i=n.name,s=n.value;Z.setFieldsValue((0,c.Z)({},i,s)),T((function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,c.Z)({},i,s))}))}else Z.setFieldsValue((0,c.Z)({},e,a)),T((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,c.Z)({},e,a))}))}),D,A,b);return(0,f.jsx)(u.Z,{className:"modal-usuario",title:b?"Editar usuario":"Registrar usuario",open:j,width:400,closeModal:J,children:(0,f.jsxs)(h.Z,{form:Z,className:"modal-body",onFinish:H,layout:"horizontal",children:[K.map((function(a,e){return(0,f.jsx)(h.Z.Item,{className:a.className,name:a.name,rules:a.rules,style:{marginBottom:"8px"},children:(0,f.jsxs)(f.Fragment,{children:[a.label,a.type]})},e)})),(0,f.jsx)("p",{children:"Firma"}),(0,f.jsx)("div",{className:"avatar",children:(0,f.jsx)(x.Z,{avatar:L,setAvatar:B,selected:b})}),(0,f.jsx)(h.Z.Item,{className:"button-container",children:(0,f.jsx)(m.ZP,{htmlType:"submit",icon:(0,f.jsx)(g.lFz,{}),loading:!!N,children:b?" Editar":" Registrar"})})]})})},_=n(83188),j=n(4808),k=n(3066),C=n(53939),b=n(95579),y=n(85126),N=n(34664),z=n(76487),w=n(49389),F=function(a){var e=a.modal,n=a.setModal,d=h.Z.useForm(),v=(0,o.Z)(d,1)[0],x=(0,r.useContext)(t.s),Z=x.dataToEdit,_=x.updateData,j=x.setDataToEdit,k=(0,r.useState)({nueva:"",nueva2:""}),C=(0,o.Z)(k,2),b=C[0],y=C[1],N=function(){n(!1),j(null)},z=function(){var a=(0,s.Z)((0,i.Z)().mark((function a(){var e,n;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(b.nueva!==b.nueva2){a.next=9;break}return e={contrasenia:b.nueva},"usuario/contrasenia",a.next=5,_(e,Z.id,"usuario/contrasenia");case 5:(n=a.sent)&&((0,p.q)(n.status,n.msg),N()),a.next=10;break;case 9:(0,p.q)(500,"Las contrase\xf1as no coinciden.");case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),F=function(a){var e=a.target,n=e.name,i=e.value;v.setFieldsValue((0,c.Z)({},n,i)),y((function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,c.Z)({},n,i))}))};return(0,f.jsx)(u.Z,{className:"modal-usuario",title:"Cambiar contrase\xf1a",open:e,width:400,closeModal:N,children:(0,f.jsxs)(h.Z,{form:v,className:"modal-body",onFinish:z,layout:"horizontal",children:[(0,f.jsxs)(h.Z.Item,{style:{marginBottom:"8px"},name:"nueva",rules:[{required:!0,message:"Campo obligatorio!"}],children:[(0,f.jsx)("label",{htmlFor:"",children:"Nueva contrase\xf1a"}),(0,f.jsx)(w.Z.Password,{value:b.nueva,name:"nueva",onChange:F})]}),(0,f.jsxs)(h.Z.Item,{style:{marginBottom:"8px"},name:"nueva2",rules:[{required:!0,message:"Campo obligatorio!"}],children:[(0,f.jsx)("label",{htmlFor:"",children:"Confirme nueva contrase\xf1a"}),(0,f.jsx)(w.Z.Password,{value:b.nueva2,name:"nueva2",onChange:F})]}),(0,f.jsx)(h.Z.Item,{className:"button-container",children:(0,f.jsx)(m.ZP,{htmlType:"submit",icon:(0,f.jsx)(g.lFz,{}),children:"Actualizar"})})]})})},E=function(){var a=(0,r.useContext)(t.s),e=a.getData,n=a.deleteData,l=a.modal,c=a.setModal,d=a.setDataToEdit,u=a.modal1,h=a.cargando,m=a.setCargando,v=(0,r.useState)([]),g=(0,o.Z)(v,2),x=g[0],w=g[1],E=(0,b.Z)(x).result,T=(0,r.useState)(!1),M=(0,o.Z)(T,2),q=M[0],D=M[1],P=function(){var a=(0,s.Z)((0,i.Z)().mark((function a(){var n;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return m(!0),a.next=3,e("usuario");case 3:(n=a.sent)&&(m(!1),w(n.data));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),S=function(){var a=(0,s.Z)((0,i.Z)().mark((function a(e){var s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n("usuario",e);case 2:(s=a.sent)&&((0,p.q)(s.status,s.msg),P());case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();(0,r.useEffect)((function(){P()}),[]);var I=(0,C.UR)((function(a){d(a),c(!0)}),S,(function(a){d(a),D(!0),console.log("===================================="),console.log("pokemon"),console.log("====================================")}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_.Z,{text:"Usuarios",user:"Usuario",ruta:"/administracion"}),(0,f.jsxs)("div",{className:"margenes",children:[(0,f.jsx)(k.Z,{abrirModal:c}),x.length>0?(0,f.jsx)(j.Z,{columns:I,table:E}):(0,f.jsx)("div",{className:"noData",children:h?(0,f.jsx)(z.Z,{}):(0,f.jsx)(N.Z,{image:N.Z.PRESENTED_IMAGE_SIMPLE,description:(0,f.jsx)("span",{children:"No hay registros para mostrar."})})})]}),q&&(0,f.jsx)(F,{modal:q,setModal:D}),l&&(0,f.jsx)(Z,{actualizarTabla:P}),u&&(0,f.jsx)(y.Z,{actualizar:P})]})}}}]);
//# sourceMappingURL=271.e46f5b70.chunk.js.map