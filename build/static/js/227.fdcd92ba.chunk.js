(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[227],{92965:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z}});var n=t(4942),r=t(74165),s=t(15861),i=t(29439),o=t(4333),l=(t(97892),t(72791)),c=t(38411),d=t(53939),u=t(8771),m=t(99775),h=t(99763),f=t(83188),x=t(34664),p=t(43513),v=t(80184),j=function(e){var a=e.columns,t=e.table;e.set;return(0,v.jsx)("div",{className:"table-container",children:(0,v.jsx)(p.ZP,{columns:a,data:t,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,v.jsx)(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE,description:(0,v.jsx)("span",{children:"No hay registros para mostrar."})})})})},b=(t(91906),t(83060),t(49389)),g=t(87309),_=t(69967),M=function(e){var a=e.modal,t=e.setModal,n=(e.getPlanilla,(0,l.useContext)(c.s).updateData,(0,l.useState)("")),r=(0,i.Z)(n,2),s=(r[0],r[1]);return(0,v.jsxs)(_.Z,{className:"modal-usuario",title:"Agregar observaci\xf3n",open:a,width:400,closeModal:function(){t(!1)},children:[(0,v.jsx)(b.Z.TextArea,{showCount:!0,maxLength:255,style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){s(e.target.value)},placeholder:"Observaci\xf3n"}),(0,v.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:(0,v.jsx)(g.ZP,{children:"Guardar"})})]})},Z=function(){var e=(0,l.useState)([]),a=(0,i.Z)(e,2),t=a[0],x=a[1],p=(0,l.useContext)(c.s),b=p.getData,g=p.updateData,_=p.createData,Z=(0,l.useState)(!1),Y=(0,i.Z)(Z,2),y=Y[0],w=Y[1],L=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("aprobacion");case 2:(a=e.sent)&&x(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){L()}),[]);var T=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a,t){var s,i,o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",a.target.checked&&(s=JSON.parse(localStorage.getItem("firma"))),i=(0,n.Z)({},a.target.name,s||null),o=t.id?t.id:0,e.next=6,g(i,o,"planilla/asistencia");case 6:(l=e.sent)&&((0,h.q)(l.status,l.msg),L());case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),D=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var t,n,s,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={asociacion_id:null!==a.asociacion_id?a.asociacion_id:null,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,dni:null!==a.dni?a.dni:null,quincena:a.subarray_id},e.next=3,_(t,"aprobacion/asistencias");case 3:if(!(n=e.sent)){e.next=14;break}if(null===a.asociacion_id){e.next=9;break}return e.next=8,(0,o.eA)((0,u.Z)(n.data)).toBlob();case 8:s=e.sent;case 9:if(null===a.dni){e.next=13;break}return e.next=12,(0,o.eA)((0,m.Z)(n.data)).toBlob();case 12:s=e.sent;case 13:s&&(i=URL.createObjectURL(s),(l=document.createElement("a")).href=i,l.download="tareo.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i));case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=(0,d.x6)(T,D,(function(){w(!0)}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.Z,{text:"Aprobaciones",ruta:"/planilla"}),(0,v.jsx)("div",{className:"margenes",children:(0,v.jsx)(j,{columns:S,table:t})}),y&&(0,v.jsx)(M,{modal:y,setModal:w})]})}},83060:function(e,a,t){"use strict";t.d(a,{Z:function(){return _}});var n=t(74165),r=t(15861),s=t(29439),i=t(72791),o=t(71368),l=t(4808),c=t(91906),d=t(38411),u=t(53939),m=(t(95579),t(69967)),h=t(17615),f=t(87309),x=t(99763),p=t(72966),v=t(80184),j=function(e){var a=e.modal,t=e.setModal,o=e.data,l=e.actualizarTabla,c=(0,i.useState)(null),d=(0,s.Z)(c,2),u=d[0],j=d[1],b=function(){t(!1)},g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a,t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===o||void 0===o?void 0:o.aprobacion_id),{method:"PUT",body:a});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent)&&((0,x.q)(r.status,r.msg),b(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(m.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:b,children:(0,v.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,v.jsx)(h.Z.Item,{children:(0,v.jsx)("div",{className:"drag-container",children:(0,v.jsx)(p.Z,{avatar:u,setAvatar:j,selected:o})})}),(0,v.jsx)("div",{className:"button-container",children:(0,v.jsx)(f.ZP,{htmlType:"submit",children:"Guardar"})})]})})},b=function(e){var a,t=e.data,h=e.modal,f=e.setModal,x=e.actualizarTabla,p=(0,i.useContext)(o.c),b=(p.verificacion,p.setVerificacion,(0,i.useContext)(d.s)),g=(b.getDataById,b.data2,(0,i.useState)()),_=(0,s.Z)(g,2),M=(_[0],_[1],(0,i.useState)([])),Z=(0,s.Z)(M,2),Y=Z[0],y=(Z[1],(0,i.useState)(!1)),w=(0,s.Z)(y,2),L=w[0],T=w[1],D=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){D()}),[]);var S=(0,u.MK)();return(0,v.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){f(!1)},children:[(0,v.jsxs)("div",{className:"tareo-container",children:[(0,v.jsxs)("section",{className:"tareo-datos",children:[(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,v.jsx)("section",{className:"tareo-boton",children:(0,v.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!0,validacion:!0,cargar:!1,data1:t,data2:Y,modal:T})})]}),(0,v.jsx)(l.Z,{columns:S,table:null===t||void 0===t||null===(a=t.asistencia_completa)||void 0===a?void 0:a.reverse()}),L&&(0,v.jsx)(j,{modal:L,setModal:T,data:t,actualizarTabla:x})]})},g=function(e){var a=e.data,t=e.modal,n=e.setModal,r=(0,i.useContext)(o.c),l=(r.setValidacionPagosAsociacion,r.setFechas,r.fechas,r.verificacion,r.setVerificacion,(0,i.useContext)(d.s)),u=(l.getData,l.data3,l.setData3,l.data2,l.dataToEdit,(0,i.useState)()),h=(0,s.Z)(u,2);h[0],h[1];return(0,v.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:950,closeModal:function(){n(!1)},children:[(0,v.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsxs)("section",{children:[(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,v.jsx)("section",{className:"tareo-boton",children:(0,v.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!0})})]}),(0,v.jsx)("section",{className:"table-container",children:(0,v.jsxs)("table",{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Nro"}),(0,v.jsx)("th",{children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,v.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)"},children:(0,v.jsx)("span",{children:e})},a)}))]})}),(0,v.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:a+1}),(0,v.jsx)("td",{children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,s.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var t=(0,s.Z)(e,2),n=(t[0],t[1]);return(0,v.jsx)("td",{children:n},a)}))]},a)}))})]})})]})},_=function(e){var a=e.selected,t=(e.actualizarTabla,e.planillaControl),c=e.setPlanillaControl,h=(0,i.useState)([]),f=(0,s.Z)(h,2),x=(f[0],f[1]),p=(0,i.useState)([]),j=(0,s.Z)(p,2),_=j[0],M=j[1],Z=(0,i.useContext)(o.c).setPago,Y=(0,i.useContext)(d.s).getData,y=(0,i.useState)([]),w=(0,s.Z)(y,2),L=w[0],T=w[1],D=(0,i.useState)(!1),S=(0,s.Z)(D,2),k=S[0],C=S[1],N=(0,i.useState)(!1),A=(0,s.Z)(N,2),F=A[0],P=A[1],E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return t="planilla/tareo/".concat(a.dni),e.next=4,Y(t);case 4:r=e.sent,T(r.data),e.next=13;break;case 8:return s="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,Y(s);case 11:i=e.sent,T(i.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){E()}),[a]),(0,i.useEffect)((function(){x([a])}),[a]);var H=(0,u.qQ)((function(e){""===a.codigo?(P(!0),M(e)):(C(!0),M(e))}),(function(e){Z(!0),M(e)}));return(0,v.jsxs)(m.Z,{className:"modal-planilla",title:"Control de planilla",open:t,width:900,closeModal:function(){c(!1)},children:[(0,v.jsx)(l.Z,{columns:H,table:L}),k&&(0,v.jsx)(b,{data:_,modal:k,setModal:C,actualizarTabla:E}),F&&(0,v.jsx)(g,{data:_,modal:F,setModal:P,actualizarTabla:E})]})}},52563:function(e,a,t){e.exports=function(e){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=a(e),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return t.default.locale(n,null,!0),n}(t(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,t,n){var r=t.prototype,s=r.format;n.en.formats=e,r.format=function(a){void 0===a&&(a="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=function(a,t){return a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(a,n,r){var s=r&&r.toUpperCase();return n||t[r]||e[r]||t[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,a,t){return a||t.slice(1)}))}))}(a,void 0===t?{}:t);return s.call(this,n)}}}()}}]);
//# sourceMappingURL=227.fdcd92ba.chunk.js.map