"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[1483],{20201:function(e,n,o){o.r(n),o.d(n,{default:function(){return P}});var t=o(4942),a=o(1413),i=o(74165),l=o(15861),r=o(29439),u=o(72791),s=o(38411),d=o(71368),c=o(83188),v=o(83060),p=(o(53939),o(49389)),f=o(87309),h=o(80184),m=p.Z.Search,x=function(e){e.abrirModal;var n=e.registrar,o=(0,u.useContext)(d.c).setJuntarTeletrans,t=(0,u.useContext)(s.s).setFilterText;return(0,h.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)(m,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return t(e.target.value)},style:{width:300}}),(0,h.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,h.jsx)("div",{children:!1!==n?(0,h.jsx)(f.ZP,{onClick:function(){o(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})},g=o(95579),C=o(34664),w=(o(97892),o(43513)),_=o(78820),b=(o(51279),function(e){var n=e.table,o=e.handleContrato,t=e.filas,a=(0,u.useState)(0),i=(0,r.Z)(a,2),l=(i[0],i[1]),s=JSON.parse(localStorage.getItem("cargo")),d=[{id:"Nro",name:"Nro",width:"60px",selector:function(e,n){return null===e||void 0===e?void 0:e.id}},{id:"nombres",name:"Apellidos y nombres",selector:function(e){return null===e||void 0===e?void 0:e.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(e){return null!==e&&void 0!==e&&e.telefono?e.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha inicio",width:"120px",selector:function(e){return null===e||void 0===e?void 0:e.fecha_inicio}},{id:"fecha_fin",name:"Fecha fin",width:"150px",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(e){var n,o,t,a;return null!==e&&void 0!==e&&null!==(n=e.evaluacion)&&void 0!==n&&null!==(o=n.at(-1))&&void 0!==o&&o.recomendado_por?null===e||void 0===e||null===(t=e.evaluacion)||void 0===t||null===(a=t.at(-1))||void 0===a?void 0:a.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(e){return null!==e&&void 0!==e&&e.asistencia?e.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"pago",name:"Pago",selector:function(e){return(0,h.jsxs)("p",{style:{display:11===s||83===s||15===s?"auto":"none"},children:[" ",(e.volquete||0)+" (Volq.) - "+((null===e||void 0===e?void 0:e.teletran)||0)+" (Tele.)"]})},center:!0},{id:"total",name:"Total",button:!0,selector:function(e){return(0,h.jsxs)("p",{style:{display:11===s||83===s||15===s?"auto":"none"},children:[" ",((null===e||void 0===e?void 0:e.total)||0)+" (Tele.)"]})},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(_.w8I,{onClick:function(){return o(e)},style:{cursor:"pointer"}})})}}],c=[{when:function(e){return e.fecha_fin_estimada||e.fecha_fin},style:function(e){var n=e.fecha_fin_estimada?e.fecha_fin_estimada:e.fecha_fin;n=n.split("-").reverse().join("-");var o=new Date(n),t=new Date,a=new Date(o.getFullYear(),o.getMonth(),o.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=a.getTime()-i.getTime(),r=Math.ceil(l/864e5);return r>5?{}:r<=5&&r>3?{backgroundColor:"#D4E8CF"}:r<=3&&r>=0||r<0?{backgroundColor:"#e8d2cf"}:void 0}}];return(0,h.jsx)("div",{className:"table-container",children:(0,h.jsx)(w.ZP,{columns:d,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:t,paginationRowsPerPageOptions:[t,2*t,3*t,4*t,5*t],onChangePage:function(e){l(e)},conditionalRowStyles:c,noDataComponent:(0,h.jsx)(C.Z,{image:C.Z.PRESENTED_IMAGE_SIMPLE,description:(0,h.jsx)("span",{children:"No hay registros para mostrar."})})})})}),E=o(80458),j=o(34045),P=function(){var e=(0,u.useContext)(d.c).setUserdata,n=(0,u.useContext)(s.s),o=n.getData,p=n.setResult,m=n.setFilterText,C=(0,u.useState)([]),w=(0,r.Z)(C,2),_=w[0],P=w[1],Z=(0,u.useState)([]),S=(0,r.Z)(Z,2),A=S[0],T=S[1],D=(0,u.useState)([]),N=(0,r.Z)(D,2),O=N[0],y=N[1],R=(0,u.useState)([]),I=(0,r.Z)(R,2),F=I[0],M=I[1],L=(0,u.useState)([]),k=(0,r.Z)(L,2),U=(k[0],k[1],(0,u.useState)({})),q=(0,r.Z)(U,2),B=q[0],J=q[1],H=(0,u.useState)([]),G=(0,r.Z)(H,2),Q=G[0],V=G[1],W=(0,u.useState)(!1),Y=(0,r.Z)(W,2),z=Y[0],X=Y[1],K=(0,g.Z)(Q).result,$=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n,t,a,l,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla","area","cargo","campamento",n=o("planilla"),t=o("area"),a=o("cargo"),l=o("campamento"),e.next=10,Promise.all([n,t,a,l]);case 10:r=e.sent,V(r[0].data),T(r[1].data),y(r[2].data),M(r[3].data);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){$()}),[]),(0,u.useEffect)((function(){p(B.campamento||B.area||B.puesto?Q.filter((function(e){return(!B.campamento||(null===e||void 0===e?void 0:e.campamento)===B.campamento)&&(!B.area||(null===e||void 0===e?void 0:e.area)===B.area)&&(!B.puesto||(null===e||void 0===e?void 0:e.puesto)===B.puesto)})):Q)}),[B,Q]);var ee=function(e,n){J((function(o){return(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},n,e))}))};console.log("===================================="),console.log(K),console.log("====================================");return(0,h.jsxs)("div",{children:[(0,h.jsx)(c.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,h.jsxs)("div",{className:"margenes",children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,h.jsx)(x,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,h.jsx)(E.Z,{name:"campamento",placeholder:"Campamento",onChange:function(e){return ee(e,"campamento")},value:B.campamento,style:{width:"200px"},showSearch:!0,optionFilterProp:"children",dropdownMatchSelectWidth:!1,filterOption:function(e,n){var o;return(null!==(o=null===n||void 0===n?void 0:n.label)&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase())},options:F.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,h.jsx)(E.Z,{name:"area",placeholder:"\xc1rea",showSearch:!0,optionFilterProp:"children",dropdownMatchSelectWidth:!1,filterOption:function(e,n){var o;return(null!==(o=null===n||void 0===n?void 0:n.label)&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase())},value:B.area,onChange:function(e){return ee(e,"area")},style:{width:"200px"},options:A.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,h.jsx)(E.Z,{name:"puesto",placeholder:"Puesto",onChange:function(e){return ee(e,"puesto")},style:{width:"200px"},showSearch:!0,optionFilterProp:"children",value:B.puesto,dropdownMatchSelectWidth:!1,filterOption:function(e,n){var o;return(null!==(o=null===n||void 0===n?void 0:n.label)&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase())},options:O.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,h.jsx)(f.ZP,{onClick:function(){!function(e,n,o){var t=j.P6.book_new(),a=j.P6.json_to_sheet(e);j.P6.book_append_sheet(t,a,n),(0,j.Fv)(t,"".concat(o,".xlsx"))}(null===K||void 0===K?void 0:K.map((function(e,n){var o,t,a,i,l;return{Nro:n+1,DNI:null===e||void 0===e?void 0:e.dni,NOMBRE:null===e||void 0===e?void 0:e.nombre,FECHA_NACIMIENTO:null===e||void 0===e?void 0:e.fecha_nacimiento,CELULAR:null===e||void 0===e?void 0:e.telefono,CARGO:null===e||void 0===e?void 0:e.puesto,"\xc1REA":null===e||void 0===e?void 0:e.area,COOPERATIVA:null===e||void 0===e||null===(o=e.evaluacion)||void 0===o||null===(t=o.at(-1))||void 0===t?void 0:t.cooperativa,FECHA_DE_INGRESO:null===e||void 0===e?void 0:e.fecha_inicio,VOLQUETE:null===e||void 0===e?void 0:e.volquete,TELETRAN:null===e||void 0===e?void 0:e.teletran,PERIODO_DE_TRABAJO:null===e||void 0===e?void 0:e.periodo_trabajo,FECHA_DE_SALIDA:null===e||void 0===e?void 0:e.fecha_fin,ANTECEDENTES:null!==(null===e||void 0===e?void 0:e.asociacion_id)&&!1!==(null===e||void 0===e||null===(a=e.contratos)||void 0===a?void 0:a.suspendido)?"Suspendido":"Normal",RECOMENDADO_POR:null===e||void 0===e||null===(i=e.evaluacion)||void 0===i||null===(l=i.at(-1))||void 0===l?void 0:l.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:Math.floor(parseInt(null===e||void 0===e?void 0:e.asistencia)/15)||0}})),"Planilla","reporte")},children:" Descargar"}),(0,h.jsx)(f.ZP,{onClick:function(){J({campamento:void 0,area:void 0,puesto:void 0}),m("")},children:" Limpiar Busqueda"})]}),(0,h.jsx)(b,{table:K,handleContrato:function(n){X(!0),P(n),e(n)},filas:10})]}),z&&(0,h.jsx)(v.Z,{selected:_,actualizarTabla:$,planillaControl:z,setPlanillaControl:X})]})}},95579:function(e,n,o){var t=o(72791),a=o(38411);n.Z=function(e){var n=(0,t.useContext)(a.s),o=n.filterText,i=(n.filterTextModal,n.result),l=n.setResult;return(0,t.useEffect)((function(){if(""!==o){var n=e.filter((function(e){return Object.values(e).join("").toLowerCase().includes(o.toLowerCase())}));l(n)}else l(e)}),[o,e]),{result:i}}}}]);
//# sourceMappingURL=1483.49b0b9de.chunk.js.map