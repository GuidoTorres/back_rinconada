(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2185],{8034:function(e,a,t){"use strict";var n=t(1413),r=t(72791),o=t(18267),s=(t(77457),t(80184));a.Z=function(e){var a=e.setAvatar,t=e.avatar,i=e.selected,l=(0,r.useCallback)((function(e){var t=e[0];a({file:t,preview:URL.createObjectURL(t)})}),[a]),c=(0,o.uI)({accept:{"image/png":[".png"],"image/jpg":[".jpg"],"image/jpeg":[".jpeg"]},noKeyboard:!0,onDrop:l}),d=c.getRootProps,u=c.getInputProps,m=c.isDragActive;return(0,s.jsxs)("div",(0,n.Z)((0,n.Z)({},d()),{},{className:"drag",children:[(0,s.jsx)("input",(0,n.Z)({},u())),m?(0,s.jsx)("p",{children:"Coloca la imagen aqui..."}):null!==i&&void 0!==i&&i.foto||null!==t&&void 0!==t&&t.preview?(0,s.jsx)("img",{src:(null===t||void 0===t?void 0:t.preview)||(null===i||void 0===i?void 0:i.foto),alt:""}):(0,s.jsx)("p",{children:"Arrastra la imagen aqui, o has click para seleccionar la imagen."})]}))}},97249:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var n=t(4942),r=t(74165),o=t(15861),s=t(29439),i=t(4333),l=(t(97892),t(72791)),c=t(38411),d=t(53939),u=t(8771),m=t(99775),p=t(99763),f=(t(76487),t(83188)),h=t(34664),v=t(43513),x=t(80184),j=function(e){var a=e.columns,t=e.table;e.set;return(0,x.jsx)("div",{className:"table-container",children:(0,x.jsx)(v.ZP,{columns:a,data:t,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,x.jsx)(h.Z,{image:h.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})})})},b=(t(91906),t(49389).Z.Search),g=function(e){var a=e.setFilterText;return(0,x.jsx)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"300px"},children:(0,x.jsx)(b,{placeholder:"Ingresa una nombre...",onChange:function(e){return a(e.target.value)},style:{width:300}})})},Z=(t(83060),t(28181)),_=function(){var e=(0,l.useState)([]),a=(0,s.Z)(e,2),t=a[0],h=a[1],v=(0,l.useContext)(c.s),b=v.getData,_=v.updateData,M=v.createData,y=(0,l.useState)(!1),w=(0,s.Z)(y,2),L=w[0],Y=w[1],S=(0,l.useState)([]),C=(0,s.Z)(S,2),D=C[0],T=C[1],k=(0,l.useState)(""),N=(0,s.Z)(k,2),E=N[0],A=N[1],F=(0,l.useState)(!1),P=(0,s.Z)(F,2),H=(P[0],P[1]),I=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("aprobacion");case 2:(a=e.sent)&&h(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){I()}),[]);var R=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,t){var o,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",a.target.checked&&(o=JSON.parse(localStorage.getItem("firma"))),s=(0,n.Z)({},a.target.name,o||null),e.next=5,_(s,t.id,"planilla/asistencia");case 5:(i=e.sent)&&((0,p.q)(i.status,i.msg),I());case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a){var t,n,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={asociacion_id:null!==a.asociacion_id?a.asociacion_id:null,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,dni:null!==a.dni?a.dni:null,quincena:a.subarray_id,contrato_id:a.contrato_id},H(!0),e.next=4,M(t,"aprobacion/asistencias");case 4:if(!(n=e.sent)){e.next=15;break}if(null===a.asociacion_id){e.next=10;break}return e.next=9,(0,i.eA)((0,u.Z)(n.data)).toBlob();case 9:o=e.sent;case 10:if(null===a.dni){e.next=14;break}return e.next=13,(0,i.eA)((0,m.Z)(n.data)).toBlob();case 13:o=e.sent;case 14:o&&(s=URL.createObjectURL(o),(l=document.createElement("a")).href=s,l.download="tareo.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s));case 15:H(!1);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=null===t||void 0===t?void 0:t.filter((function(e){var a,t;return null===e||void 0===e||null===(a=e.nombre)||void 0===a||null===(t=a.toLowerCase())||void 0===t?void 0:t.includes(E.toLowerCase())}));T(e)}),[E,t]);var z=(0,d.x6)(R,O,(function(){Y(!0)}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Z,{text:"Aprobaciones",ruta:"/planilla"}),(0,x.jsxs)("div",{className:"margenes",children:[(0,x.jsx)(g,{setFilterText:A}),(0,x.jsx)(j,{columns:z,table:D})]}),L&&(0,x.jsx)(Z.Z,{modal:L,setModal:Y})]})}},28181:function(e,a,t){"use strict";var n=t(74165),r=t(15861),o=t(29439),s=t(49389),i=t(87309),l=t(72791),c=t(38411),d=t(99763),u=t(69967),m=t(80184);a.Z=function(e){var a=e.modal,t=e.setModal,p=(e.getPlanilla,e.data),f=e.observacion,h=e.boton,v=(0,l.useContext)(c.s).updateData,x=(0,l.useState)(""),j=(0,o.Z)(x,2),b=j[0],g=j[1],Z=function(){t(!1)},_=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={observaciones:b},e.next=3,v(a,p.aprobacion_id,"aprobacion/observacion");case 3:(t=e.sent)&&((0,d.q)(t.status,t.msg),Z());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(u.Z,{className:"modal-usuario",title:h?"Agregar Observaci\xf3n":"Observaci\xf3n RRHH",open:a,width:400,closeModal:Z,children:[(0,m.jsx)(s.Z.TextArea,{showCount:!0,maxLength:255,defaultValue:null!==p&&void 0!==p&&p.observaciones?null===p||void 0===p?void 0:p.observaciones:f||"",style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){g(e.target.value)},placeholder:"Observaci\xf3n"}),(0,m.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:h&&(0,m.jsx)(i.ZP,{onClick:_,children:"Guardar"})})]})}},83060:function(e,a,t){"use strict";t.d(a,{Z:function(){return _}});var n=t(74165),r=t(15861),o=t(29439),s=t(72791),i=t(71368),l=t(4808),c=t(91906),d=t(38411),u=t(53939),m=t(69967),p=t(28181),f=t(17615),h=t(87309),v=t(99763),x=t(8034),j=t(80184),b=function(e){var a=e.modal,t=e.setModal,i=e.data,l=e.actualizarTabla,c=(0,s.useState)(null),d=(0,o.Z)(c,2),u=d[0],p=d[1],b=function(){t(!1)},g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a,t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===i||void 0===i?void 0:i.aprobacion_id),{method:"PUT",body:a});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent)&&((0,v.q)(r.status,r.msg),b(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsx)(m.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:b,children:(0,j.jsxs)(f.Z,{onFinish:g,layout:"horizontal",children:[(0,j.jsx)(f.Z.Item,{children:(0,j.jsx)("div",{className:"drag-container",children:(0,j.jsx)(x.Z,{avatar:u,setAvatar:p,selected:i})})}),(0,j.jsx)("div",{className:"button-container",children:(0,j.jsx)(h.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var a,t=e.data,f=e.modal,h=e.setModal,v=e.actualizarTabla,x=(0,s.useContext)(i.c),g=(x.verificacion,x.setVerificacion,(0,s.useContext)(d.s)),Z=(g.getDataById,g.data2,(0,s.useState)()),_=(0,o.Z)(Z,2),M=(_[0],_[1],(0,s.useState)([])),y=(0,o.Z)(M,2),w=y[0],L=(y[1],(0,s.useState)(!1)),Y=(0,o.Z)(L,2),S=Y[0],C=Y[1],D=(0,s.useState)(!1),T=(0,o.Z)(D,2),k=T[0],N=T[1],E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){E()}),[]);var A=(0,u.MK)();return(0,j.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo",open:f,width:900,closeModal:function(){h(!1)},children:[(0,j.jsxs)("div",{className:"tareo-container",children:[(0,j.jsxs)("section",{className:"tareo-datos",children:[(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,j.jsx)("section",{className:"tareo-boton",children:(0,j.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!1,validacion:!0,cargar:!1,data1:t,data2:w,observacion:!0,modal:C,setModal1:N})})]}),(0,j.jsx)(l.Z,{columns:A,table:null===t||void 0===t||null===(a=t.asistencia_completa)||void 0===a?void 0:a.reverse()}),S&&(0,j.jsx)(b,{modal:S,setModal:C,data:t,actualizarTabla:v}),k&&(0,j.jsx)(p.Z,{setModal:N,modal:k,data:t,observacion:"",boton:!0})]})},Z=function(e){var a=e.data,t=e.modal,n=e.setModal,r=(0,s.useContext)(i.c),l=(r.setValidacionPagosAsociacion,r.setFechas,r.fechas,r.verificacion,r.setVerificacion,(0,s.useState)(!1)),u=(0,o.Z)(l,2),f=u[0],h=u[1],v=(0,s.useContext)(d.s),x=(v.getData,v.data3,v.setData3,v.data2,v.dataToEdit,(0,s.useState)()),b=(0,o.Z)(x,2);b[0],b[1];return(0,j.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:950,closeModal:function(){n(!1)},children:[(0,j.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsxs)("section",{children:[(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,j.jsx)("div",{children:(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,j.jsx)("section",{className:"tareo-boton",children:(0,j.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!1,observacion:!0,setModal1:h})})]}),(0,j.jsx)("section",{className:"table-container",children:(0,j.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,j.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,j.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,j.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,j.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,j.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,j.jsx)("span",{children:e})},a)}))]})}),(0,j.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,j.jsxs)("tr",{style:{padding:"5px"},children:[(0,j.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a+1}),(0,j.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,o.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var t=(0,o.Z)(e,2),n=(t[0],t[1]);return(0,j.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:n},a)}))]},a)}))})]})}),f&&(0,j.jsx)(p.Z,{setModal:h,modal:f,data:a,observacion:"",boton:!0})]})},_=function(e){var a=e.selected,t=(e.actualizarTabla,e.planillaControl),c=e.setPlanillaControl,p=(0,s.useState)([]),f=(0,o.Z)(p,2),h=(f[0],f[1]),v=(0,s.useState)([]),x=(0,o.Z)(v,2),b=x[0],_=x[1],M=(0,s.useContext)(i.c).setPago,y=(0,s.useContext)(d.s).getData,w=(0,s.useState)([]),L=(0,o.Z)(w,2),Y=L[0],S=L[1],C=(0,s.useState)(!1),D=(0,o.Z)(C,2),T=D[0],k=D[1],N=(0,s.useState)(!1),E=(0,o.Z)(N,2),A=E[0],F=E[1],P=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return t="planilla/tareo/".concat(a.dni),e.next=4,y(t);case 4:r=e.sent,S(r.data),e.next=13;break;case 8:return o="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,y(o);case 11:s=e.sent,S(s.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){P()}),[a]),(0,s.useEffect)((function(){h([a])}),[a]);var H=(0,u.qQ)((function(e){""===a.codigo?(F(!0),_(e)):(k(!0),_(e))}),(function(e){M(!0),_(e)}));return(0,j.jsxs)(m.Z,{className:"modal-planilla",title:"Control de planilla",open:t,width:900,closeModal:function(){c(!1)},children:[(0,j.jsx)(l.Z,{columns:H,table:Y}),T&&(0,j.jsx)(g,{data:b,modal:T,setModal:k,actualizarTabla:P}),A&&(0,j.jsx)(Z,{data:b,modal:A,setModal:F,actualizarTabla:P})]})}},52563:function(e,a,t){e.exports=function(e){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=a(e),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return t.default.locale(n,null,!0),n}(t(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,t,n){var r=t.prototype,o=r.format;n.en.formats=e,r.format=function(a){void 0===a&&(a="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=function(a,t){return a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(a,n,r){var o=r&&r.toUpperCase();return n||t[r]||e[r]||t[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,a,t){return a||t.slice(1)}))}))}(a,void 0===t?{}:t);return o.call(this,n)}}}()},77457:function(){}}]);
//# sourceMappingURL=2185.e3579c03.chunk.js.map