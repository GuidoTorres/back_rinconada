/*! For license information please see 513.0de54af3.chunk.js.LICENSE.txt */
(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[513],{25513:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Y}});var n=t(74165),r=t(15861),s=t(29439),i=t(72791),o=t(83188),u=t(38411),c=t(4808),d=t(91743),l=t(71368),m=t(79260),f=t(69967),h=(t(76487),t(99763)),v=t(80184),p=function(e){var a=e.data,t=e.actualizarTabla,o=e.fechas,p=(0,i.useContext)(l.c),_=(p.setControlAsistencia,p.fechaId,(0,i.useContext)(u.s)),x=_.getData,g=_.data2,b=_.setData2,j=_.createData,M=_.updateData,Y=_.modal,y=_.dataToEdit,D=(_.setDataToEdit,_.setModal),Z=(_.cargando,_.setCargando,(0,i.useState)("")),w=(0,s.Z)(Z,2),k=w[0],L=w[1];(0,i.useEffect)((function(){!function(){var e,t=o&&(null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)==a}))),n=t&&(null===t||void 0===t||null===(e=t.at(-1))||void 0===e?void 0:e.id);n&&L(n)}()}),[a,o]);var C=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="asistencia/trabajador/".concat(k),e.next=3,x(a);case 3:t=e.sent,b(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){k&&C()}),[k]);var T=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a,r){var s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/trabajador",s={asistencia_id:k,trabajador_id:r.dni,asistencia:a.target.value},e.next=4,j(s,"asistencia/trabajador");case 4:(i=e.sent)&&((0,h.q)(i.status,i.msg),t());case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(r){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/hora_ingreso",s={hora_ingreso:r.target.value},e.next=4,M(s,a.id,"asistencia/hora_ingreso");case 4:200===e.sent.status&&t();case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=(0,m.eF)(T);return(0,v.jsxs)(f.Z,{className:"modal-asistencia",title:y?"Editar asistencia":"Registrar asistencia",open:Y,width:800,closeModal:function(){D(!1),b([])},children:[(0,v.jsxs)("div",{className:"hora-ingreso",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"",children:"Hora de ingreso: "}),(0,v.jsx)("input",{type:"time",name:"hora_ingreso",defaultValue:(null===a||void 0===a?void 0:a.hora_ingreso)||"07:00",onChange:S})]}),(0,v.jsx)("br",{}),(0,v.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!0,validacion:!1,buscador:!1})]}),(0,v.jsx)("br",{}),(0,v.jsx)(c.Z,{columns:E,table:g})]})},_=t(95579),x=t(19006),g=t(39126),b=(t(55795),t(35790)),j=t(97892),M=t.n(j),Y=function(){var e=(0,i.useContext)(u.s),a=e.getData,t=e.setData,c=e.data,d=e.deleteData,l=e.modal,m=e.setModal,f=e.createData,j=(0,i.useState)(""),Y=(0,s.Z)(j,2),y=Y[0],D=Y[1],Z=((0,_.Z)(c).result,function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",e.next=3,a("asistencia");case 3:r=e.sent,t(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,i.useEffect)((function(){Z()}),[]);var w=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a,t){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),r=null===c||void 0===c?void 0:c.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)===M()(t).format("YYYY-MM-DD")})).map((function(e){return e.id})).toString(),"asistencia",e.next=5,d("asistencia",r);case 5:(s=e.sent)&&((0,h.q)(s.status,s.msg),Z());case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",t={fecha:M()(a).format("YYYY-MM-DD"),hora_ingreso:"07:30"},e.next=4,f(t,"asistencia");case 4:e.sent&&Z();case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"lista-asistencia",children:[(0,v.jsx)(o.Z,{text:"Asistencia",user:"Usuario",ruta:"/planilla"}),(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"50px"},children:(0,v.jsx)("div",{style:{width:"80%",height:"70%",border:"1px solid lightgrey",borderRadius:"6px",padding:"10px"},children:(0,v.jsx)(x.Z,{fullscreen:!0,onChange:function(e){var a=M()(e).format("YYYY-MM-DD");k(e,a)},mode:"month",locale:b.Z,dateCellRender:function(e){var a=M()(e).format("YYYY-MM-DD");return(null===c||void 0===c?void 0:c.filter((function(e){return e.fecha===a}))).length>0?(0,v.jsxs)("div",{className:"calendar-data",children:[(0,v.jsx)("label",{htmlFor:"",children:"Asistencia creada"}),(0,v.jsxs)("div",{children:[(0,v.jsx)(g.jox,{onClick:function(a){return function(e,a){e.stopPropagation(),D(M()(a).format("YYYY-MM-DD")),m(!0)}(a,e)}}),(0,v.jsx)(g.yvY,{onClick:function(a){return w(a,e)},className:"eliminar"})]})]}):""}})})}),l&&(0,v.jsx)(p,{data:y,actualizarTabla:Z,fechas:c})]})}},55795:function(e,a,t){!function(e){"use strict";var a="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),t="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?t[e.month()]:a[e.month()]:a},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:4},invalidDate:"Fecha inv\xe1lida"})}(t(72426))}}]);
//# sourceMappingURL=513.0de54af3.chunk.js.map