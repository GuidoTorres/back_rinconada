"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2049],{68041:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(74165),i=n(15861),o=n(29439),a=n(34664),l=n(72791),s=n(38411),d=n(53939),u=n(99763),c=n(83188),p=n(43513),v=n(80184),x=function(e){var t=e.columns,n=e.table;return(0,v.jsx)("div",{className:"table-container",children:(0,v.jsx)(p.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){var t=e.data;return(0,v.jsxs)("div",{style:{padding:"10px 20px 10px 20px"},children:[(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Solicitante del pedido: "}),t.solicitante]}),(0,v.jsx)("br",{}),(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"C\xf3digo de requerimiento: "}),t.requerimiento_pedidos.map((function(e){return e.requerimiento_id})).toString()]}),(0,v.jsx)("br",{}),(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Fecha de pedido: "}),t.fecha]}),(0,v.jsx)("br",{}),(0,v.jsxs)("table",{style:{marginTop:"20px"},children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,v.jsx)("strong",{children:"Producto"})}),(0,v.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,v.jsx)("strong",{children:"Cantidad"})})]}),null===t||void 0===t?void 0:t.productos.map((function(e,t){var n;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e||null===(n=e.producto)||void 0===n?void 0:n.nombre}),(0,v.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.cantidad})]},t)}))]})]})},expandableRowDisabled:function(e){var t;return 0===(null===e||void 0===e||null===(t=e.trabajador)||void 0===t?void 0:t.length)},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:"No se encontraron resultados."})})},h=n(12469),m=n(49389),f=n(87309),g=m.Z.Search,j=function(e){var t=e.generar,n=e.data,o=e.setFilterText,a=(0,l.useContext)(s.s),d=(a.createData,a.multipleRequerimientos,a.modal,a.setModal),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"buscador-almacen",children:[(0,v.jsx)(g,{placeholder:"Ingresa un...",onChange:function(e){return o(e.target.value)},style:{width:300}}),t&&(null===n||void 0===n?void 0:n.length)>0?(0,v.jsx)("div",{className:"button-container",children:(0,v.jsx)(f.ZP,{onClick:function(){return u()},children:"Realizar pedido"})}):""]})},Z=n(96972),w=n(1413),b=n(4942),C=n(63998),y=n(69967),q=n(78820),R=n(17615),S=function(e){var t=e.actualizarTabla,n=R.Z.useForm(),a=(0,o.Z)(n,1)[0],d=(0,l.useState)([]),c=(0,o.Z)(d,2),p=(c[0],c[1],(0,l.useContext)(s.s)),x=p.setModal,h=p.dataToEdit,m=p.setDataToEdit,g=p.multipleRequerimientos,j=p.createData,Z=p.getData,S=p.modal,T=p.cargando,F=p.setCargando,E=p.setMultipleRequerimientos,A=(0,l.useState)({solicitante:"",area:"",proyecto:"",celular:"",fecha:""}),N=(0,o.Z)(A,2),_=N[0],D=N[1],L=(0,l.useState)([]),P=(0,o.Z)(L,2),k=P[0],I=P[1],M=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"area",e.next=3,Z("area");case 3:t=e.sent,I(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){M()}),[]);var z=function(){x(!1),m(null)},H=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pedido",i={fecha:_.fecha,estado:"Completado",req_id:g.map((function(e){return e.id})),solicitante:_.solicitante,area:_.area,proyecto:_.proyecto,celular:_.celular},F(!0),e.next=5,j(i,"pedido");case 5:(o=e.sent)&&((0,u.q)(o.status,o.msg),t(),z(),F(!1),E([]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=(0,C.ej)(_,(function(e,t){if(!t&&e.target){var n=e.target,r=n.name,i=n.value;a.setFieldsValue((0,b.Z)({},r,i)),D((function(e){return(0,w.Z)((0,w.Z)({},e),{},(0,b.Z)({},r,i))}))}else a.setFieldsValue((0,b.Z)({},t,e)),D((function(n){return(0,w.Z)((0,w.Z)({},n),{},(0,b.Z)({},t,e))}))}),k);return(0,v.jsx)(y.Z,{className:"modal-pedido",title:"Generar pedido",open:S,width:400,closeModal:z,children:(0,v.jsxs)(R.Z,{form:a,className:"modal-body",onFinish:H,layout:"horizontal",children:[O.map((function(e){return(0,v.jsxs)(R.Z.Item,{name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:["\xa0",e.label,e.type]})})),(0,v.jsx)(R.Z.Item,{className:"button-container",children:(0,v.jsx)(f.ZP,{htmlType:"submit",icon:(0,v.jsx)(q.lFz,{}),loading:!!T,children:h?" Editar":" Registrar"})})]})})},T=function(){var e=(0,l.useContext)(s.s),t=e.getData,n=(e.data,e.setData,e.dataToEdit,e.setDataToEdit),p=e.modal,m=e.setMultipleRequerimientos,f=e.updateData,g=e.modal3,w=e.setModal3,b=e.multipleRequerimientos,C=e.deleteData,y=(0,l.useState)([]),q=(0,o.Z)(y,2),R=q[0],T=q[1],F=(0,l.useState)([]),E=(0,o.Z)(F,2),A=E[0],N=E[1],_=(0,l.useState)(""),D=(0,o.Z)(_,2),L=D[0],P=D[1],k=(0,l.useState)([]),I=(0,o.Z)(k,2),M=I[0],z=I[1],H=(0,l.useState)(""),O=(0,o.Z)(H,2),G=O[0],V=O[1],B=(0,l.useState)([]),U=(0,o.Z)(B,2),J=U[0],K=U[1],Q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",n="pedido",e.next=4,t("requerimiento");case 4:return i=e.sent,e.next=7,t(n);case 7:o=e.sent,T(i.data),N(o.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){Q()}),[]);var W=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requerimiento_pedidos.map((function(e){return e.requerimiento_id})),"pedido",e.next=4,C("pedido","".concat(t.id,"?ids=").concat(n));case 4:(i=e.sent)&&((0,u.q)(i.status,i.msg),Q());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",e.next=3,C("requerimiento",t.id);case 3:(n=e.sent)&&((0,u.q)(n.status,n.msg),Q());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=R&&R.filter((function(e){var t,n,r,i,o,a,l,s,d,u;return""===L||e.id.toString()===L||(null===e||void 0===e||null===(t=e.solicitante)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===L||void 0===L?void 0:L.toLowerCase()))||(null===e||void 0===e||null===(r=e.almacen)||void 0===r||null===(i=r.toLowerCase())||void 0===i?void 0:i.includes(null===L||void 0===L?void 0:L.toLowerCase()))||(null===e||void 0===e||null===(o=e.area)||void 0===o||null===(a=o.toLowerCase())||void 0===a?void 0:a.includes(null===L||void 0===L?void 0:L.toLowerCase()))||(null===e||void 0===e||null===(l=e.requerimiento_productos)||void 0===l||null===(s=l.map((function(e){var t;return null===e||void 0===e||null===(t=e.producto)||void 0===t?void 0:t.nombre})))||void 0===s||null===(d=s.toString())||void 0===d||null===(u=d.toLowerCase())||void 0===u?void 0:u.includes(null===L||void 0===L?void 0:L.toLowerCase()))}));z(e)}),[L,R]),(0,l.useEffect)((function(){var e=A&&A.filter((function(e){var t,n,r,i,o,a,l,s,d,u;return""===L||e.id.toString()===L||(null===e||void 0===e||null===(t=e.solicitante)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(G.toLowerCase()))||(null===e||void 0===e||null===(r=e.productos)||void 0===r||null===(i=r.map((function(e){var t;return null===e||void 0===e||null===(t=e.producto)||void 0===t?void 0:t.nombre})))||void 0===i||null===(o=i.toString())||void 0===o||null===(a=o.toLowerCase())||void 0===a?void 0:a.includes(G.toLowerCase()))||(null===e||void 0===e||null===(l=e.requerimiento_pedidos)||void 0===l||null===(s=l.map((function(e){return null===e||void 0===e?void 0:e.requerimiento_id})))||void 0===s||null===(d=s.toString())||void 0===d||null===(u=d.toLowerCase())||void 0===u?void 0:u.includes(G.toLowerCase()))}));K(e)}),[G,A]);var Y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pedido",o={estado:t},e.next=4,f(o,n.id,"pedido");case 4:200===e.sent.status&&Q();case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$=(0,d.bI)((function(e){w(!0),n(e)}),X),ee=(0,d.g6)(Y,W);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.Z,{text:"Requerimientos - pedidos",user:"Usuario",ruta:"/logistica"}),(0,v.jsxs)("div",{className:"requerimiento_container",children:[(0,v.jsxs)("div",{className:"requerimiento_group",children:[(0,v.jsxs)("label",{htmlFor:"",children:[(0,v.jsx)("strong",{children:"Requerimientos"})," "]}),(0,v.jsx)(j,{generar:!0,data:b,setFilterText:P}),(0,v.jsx)(h.Z,{columns:$,table:M,set:m})]}),(0,v.jsxs)("div",{className:"requerimiento_group",children:[(0,v.jsx)("label",{htmlFor:"",children:(0,v.jsx)("strong",{children:"Pedidos"})}),(0,v.jsx)(j,{generar:!1,setFilterText:V}),(null===A||void 0===A?void 0:A.length)>0?(0,v.jsx)(x,{columns:ee,table:J}):(0,v.jsx)(a.Z,{image:a.Z.PRESENTED_IMAGE_SIMPLE,description:(0,v.jsx)("span",{children:"No hay registros para mostrar."})})]})]}),p&&(0,v.jsx)(S,{actualizarTabla:Q}),g&&(0,v.jsx)(Z.Z,{actualizarTabla:Q,modal3:g,setModal3:w})]})}},69967:function(e,t,n){n(72791);var r=n(49998),i=n(80184);t.Z=function(e){var t=e.className,n=e.title,o=e.open,a=e.width,l=e.closeModal,s=e.children;return(0,i.jsx)(r.Z,{destroyOnClose:!0,className:t,title:n,open:o,centered:!0,onCancel:l,footer:null,width:a,children:s})}},12469:function(e,t,n){var r=n(34664),i=(n(72791),n(43513)),o=(n(51279),n(80184));t.Z=function(e){var t=e.columns,n=e.table,a=e.set;return(0,o.jsx)("div",{className:"table-container",children:(0,o.jsx)(i.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,selectableRows:!0,expandableRows:!0,expandableRowsComponent:function(e){var t,n=e.data;return(0,o.jsx)("div",{style:{padding:"10px 20px 10px 60px"},children:(0,o.jsxs)("div",{style:{marginTop:"5px"},children:[(0,o.jsxs)("label",{htmlFor:"",children:[(0,o.jsx)("strong",{children:"Solicitante:"})," ",null===n||void 0===n?void 0:n.solicitante]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{htmlFor:"",children:[(0,o.jsx)("strong",{children:"Tel\xe9fono:"})," ",null===n||void 0===n?void 0:n.celular]}),(0,o.jsxs)("table",{style:{marginTop:"20px"},children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{width:"140px",textAlign:"center"},children:(0,o.jsx)("strong",{children:"Fecha de pedido"})}),(0,o.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,o.jsx)("strong",{children:"Producto"})}),(0,o.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,o.jsx)("strong",{children:"Cantidad"})})]}),null===n||void 0===n||null===(t=n.requerimiento_productos)||void 0===t?void 0:t.map((function(e,t){var r;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{textAlign:"center"},children:null===n||void 0===n?void 0:n.fecha_pedido}),(0,o.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e||null===(r=e.producto)||void 0===r?void 0:r.nombre}),(0,o.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.cantidad})]},t)}))]})]})})},expandableRowDisabled:function(e){return 1===(null===e||void 0===e?void 0:e.completado)},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,o.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE,description:(0,o.jsx)("span",{children:"No hay registros para mostrar."})}),onSelectedRowsChange:function(e){var t=e.selectedRows;void 0!==a&&a(t)},selectableRowDisabled:function(e){return"Aprobado"!==e.estado}})})}}}]);
//# sourceMappingURL=2049.862a2aba.chunk.js.map