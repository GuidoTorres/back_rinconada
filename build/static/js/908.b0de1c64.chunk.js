"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[908],{55861:function(n,e,t){t.r(e),t.d(e,{default:function(){return P}});var o=t(4942),a=t(1413),i=t(74165),l=t(15861),r=t(29439),u=t(72791),s=t(38411),d=t(71368),c=t(83188),v=t(4808),p=(t(91906),t(97603),t(85530)),f=t(38316),m=t(79260),x=t(69967),h=t(80184),E=function(n){var e=n.selected,t=(n.actualizarTabla,(0,u.useState)([])),o=(0,r.Z)(t,2),a=(o[0],o[1]),c=(0,u.useState)([]),E=(0,r.Z)(c,2),Z=E[0],C=E[1],g=(0,u.useContext)(d.c),b=g.setPlanillaControl,A=g.setPago,_=g.planillaControl,N=(0,u.useContext)(s.s).getData,S=(0,u.useState)([]),T=(0,r.Z)(S,2),P=T[0],j=T[1],w=(0,u.useState)(!1),R=(0,r.Z)(w,2),O=R[0],D=R[1],I=(0,u.useState)(!1),y=(0,r.Z)(I,2),k=y[0],M=y[1],F=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var t,o,a,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e||!e.dni){n.next=8;break}return t="planilla/tareo/".concat(e.dni),n.next=4,N(t);case 4:o=n.sent,j(o.data),n.next=13;break;case 8:return a="planilla/tareo/asociacion/".concat(e.id),n.next=11,N(a);case 11:l=n.sent,j(l.data);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){F()}),[e]),(0,u.useEffect)((function(){a([e])}),[e]);var U=(0,m.qQ)((function(n){""===e.codigo?(M(!0),C(n)):(D(!0),C(n))}),(function(n){A(!0),C(n)}));return(0,h.jsxs)(x.Z,{className:"modal-planilla",title:"Control de planilla",open:_,width:900,closeModal:function(){b(!1)},children:[(0,h.jsx)(v.Z,{columns:U,table:P}),O&&(0,h.jsx)(p.Z,{data:Z,modal:O,setModal:D,actualizarTabla:F}),k&&(0,h.jsx)(f.Z,{data:Z,modal:k,setModal:M,actualizarTabla:F})]})},Z=t(32163),C=t(95579),g=t(34664),b=t(43513),A=t(78820),_=(t(51279),function(n){var e=n.table,t=n.handleContrato,o=n.filas,a=(0,u.useState)(0),i=(0,r.Z)(a,2),l=(i[0],i[1]),s=[{id:"Nro",name:"Nro",width:"60px",selector:function(n,e){return null===n||void 0===n?void 0:n.id}},{id:"nombres",name:"Nombres y apellidos",selector:function(n){return null===n||void 0===n?void 0:n.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(n){return null!==n&&void 0!==n&&n.telefono?n.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha de inicio",width:"150px",selector:function(n){return null===n||void 0===n?void 0:n.fecha_inicio}},{id:"fecha_fin",name:"Fecha de fin",width:"150px",button:!0,selector:function(n){return null===n||void 0===n?void 0:n.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(n){var e,t,o,a;return null!==n&&void 0!==n&&null!==(e=n.evaluacion)&&void 0!==e&&null!==(t=e.at(-1))&&void 0!==t&&t.recomendado_por?null===n||void 0===n||null===(o=n.evaluacion)||void 0===o||null===(a=o.at(-1))||void 0===a?void 0:a.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(n){return null!==n&&void 0!==n&&n.asistencia?n.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"volquete",name:"Volquete",selector:function(n){return null!==n&&void 0!==n&&n.volquete?null===n||void 0===n?void 0:n.volquete:0},center:!0},{id:"teletrans",name:"Teletrans",selector:function(n){return null!==n&&void 0!==n&&n.teletran?n.teletran:0},center:!0},{id:"total",name:"Total",button:!0,selector:function(n){return null===n||void 0===n?void 0:n.total},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(n){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(A.w8I,{onClick:function(){return t(n)},style:{cursor:"pointer"}})})}}];return(0,h.jsx)("div",{className:"table-container",children:(0,h.jsx)(b.ZP,{columns:s,data:e,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:o,paginationRowsPerPageOptions:[o,2*o,3*o,4*o,5*o],onChangePage:function(n){l(n)},noDataComponent:(0,h.jsx)(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE,description:(0,h.jsx)("span",{children:"No hay registros para mostrar."})})})})}),N=t(80458),S=t(87309),T=t(2541),P=function(){var n=(0,u.useContext)(d.c),e=n.planillaControl,t=n.setPlanillaControl,v=n.setUserdata,p=(0,u.useContext)(s.s),f=p.getData,x=p.setResult,g=(0,u.useState)([]),b=(0,r.Z)(g,2),A=b[0],P=b[1],j=(0,u.useState)([]),w=(0,r.Z)(j,2),R=w[0],O=w[1],D=(0,u.useState)([]),I=(0,r.Z)(D,2),y=I[0],k=I[1],M=(0,u.useState)([]),F=(0,r.Z)(M,2),U=F[0],q=F[1],L=(0,u.useState)([]),B=(0,r.Z)(L,2),z=(B[0],B[1],(0,u.useState)({})),H=(0,r.Z)(z,2),Q=H[0],G=H[1],V=(0,u.useState)([]),J=(0,r.Z)(V,2),X=J[0],K=J[1],W=(0,C.Z)(X).result,Y=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var e,t,o,a,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"planilla","area","cargo","campamento",e=f("planilla"),t=f("area"),o=f("cargo"),a=f("campamento"),n.next=10,Promise.all([e,t,o,a]);case 10:l=n.sent,console.log(l[0].data),K(l[0].data),O(l[1].data),k(l[2].data),q(l[3].data);case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){Y()}),[]),(0,u.useEffect)((function(){if(Q.campamento){var n=null===X||void 0===X?void 0:X.filter((function(n){return(null===n||void 0===n?void 0:n.campamento)===Q.campamento}));x(n)}if(Q.area){var e=null===X||void 0===X?void 0:X.filter((function(n){var e;return(null===n||void 0===n||null===(e=n.contratos)||void 0===e?void 0:e.area)===Q.area}));x(e)}if(Q.puesto){var t=null===X||void 0===X?void 0:X.filter((function(n){return(null===n||void 0===n?void 0:n.puesto)===Q.puesto}));x(t)}}),[Q]);var $=function(n){t(!0),P(n),v(n)},nn=function(n,e){G((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,o.Z)({},e,n))}))},en=(0,m.B)($);return(0,h.jsxs)("div",{children:[(0,h.jsx)(c.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,h.jsxs)("div",{className:"margenes",children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,h.jsx)(Z.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,h.jsx)(N.Z,{name:"campamento",placeholder:"Campamento",onChange:function(n){return nn(n,"campamento")},style:{width:"200px"},options:U.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,h.jsx)(N.Z,{name:"area",placeholder:"\xc1rea",onChange:function(n){return nn(n,"area")},style:{width:"200px"},options:R.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,h.jsx)(N.Z,{name:"puesto",placeholder:"Puesto",onChange:function(n){return nn(n,"puesto")},style:{width:"200px"},options:y.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,h.jsx)(S.ZP,{onClick:function(){var n=null===W||void 0===W?void 0:W.map((function(n,e){var t,o,a,i,l,r,u,s,d;return{Nro:e+1,DNI:null===n||void 0===n?void 0:n.dni,NOMBRE:null===n||void 0===n?void 0:n.nombre,FECHA_NACIMIENTO:null===n||void 0===n||null===(t=n.fecha_nacimiento)||void 0===t?void 0:t.split("T")[0],CELULAR:null===n||void 0===n?void 0:n.telefono,CARGO:null===n||void 0===n?void 0:n.puesto,"\xc1REA":null===n||void 0===n||null===(o=n.contratos)||void 0===o?void 0:o.area,COOPERATIVA:null===n||void 0===n||null===(a=n.evaluacion)||void 0===a||null===(i=a.at(-1))||void 0===i?void 0:i.cooperativa,FECHA_DE_INGRESO:null===n||void 0===n||null===(l=n.fecha_inicio)||void 0===l?void 0:l.split("T")[0],VOLQUETE:null===n||void 0===n?void 0:n.volquete,TELETRAN:null===n||void 0===n?void 0:n.teletran,PERIODO_DE_TRABAJO:null===n||void 0===n?void 0:n.asistencia,FECHA_DE_SALIDA:null===n||void 0===n||null===(r=n.fecha_fin)||void 0===r?void 0:r.split("T")[0],ANTECEDENTES:!1===(null===n||void 0===n||null===(u=n.contratos)||void 0===u?void 0:u.suspendido)?"Ninguno":"Suspendido",RECOMENDADO_POR:null===n||void 0===n||null===(s=n.evaluacion)||void 0===s||null===(d=s.at(-1))||void 0===d?void 0:d.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:parseInt(null===n||void 0===n?void 0:n.asistencia)%15===0?parseInt(null===n||void 0===n?void 0:n.asistencia)/15:""}}));(0,T.S)(n,"Planilla","reporte")},children:" Descargar"})]}),(0,h.jsx)(_,{columns:en,table:W,handleContrato:$,filas:10})]}),e&&(0,h.jsx)(E,{selected:A,actualizarTabla:Y})]})}}}]);
//# sourceMappingURL=908.b0de1c64.chunk.js.map