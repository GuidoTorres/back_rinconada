(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2185],{8034:function(e,a,n){"use strict";var t=n(1413),r=n(72791),o=n(18267),s=(n(77457),n(80184));a.Z=function(e){var a=e.setAvatar,n=e.avatar,i=e.selected,l=(0,r.useCallback)((function(e){var n=e[0];a({file:n,preview:URL.createObjectURL(n)})}),[a]),c=(0,o.uI)({accept:{"image/png":[".png"],"image/jpg":[".jpg"],"image/jpeg":[".jpeg"]},noKeyboard:!0,onDrop:l}),d=c.getRootProps,u=c.getInputProps,p=c.isDragActive;return(0,s.jsxs)("div",(0,t.Z)((0,t.Z)({},d()),{},{className:"drag",children:[(0,s.jsx)("input",(0,t.Z)({},u())),p?(0,s.jsx)("p",{children:"Coloca la imagen aqui..."}):null!==i&&void 0!==i&&i.foto||null!==n&&void 0!==n&&n.preview?(0,s.jsx)("img",{src:(null===n||void 0===n?void 0:n.preview)||(null===i||void 0===i?void 0:i.foto),alt:""}):(0,s.jsx)("p",{children:"Arrastra la imagen aqui, o has click para seleccionar la imagen."})]}))}},97249:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return _}});var t=n(4942),r=n(74165),o=n(15861),s=n(29439),i=n(4333),l=(n(97892),n(72791)),c=n(38411),d=n(53939),u=n(8771),p=n(99775),m=n(99763),f=(n(76487),n(83188)),h=n(34664),v=n(43513),x=n(80184),b=function(e){var a=e.columns,n=e.table;e.set;return(0,x.jsx)("div",{className:"table-container",children:(0,x.jsx)(v.ZP,{columns:a,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,x.jsx)(h.Z,{image:h.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})})})},j=(n(91906),n(49389).Z.Search),g=function(e){var a=e.setFilterText;return(0,x.jsx)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"300px"},children:(0,x.jsx)(j,{placeholder:"Ingresa una nombre...",onChange:function(e){return a(e.target.value)},style:{width:300}})})},Z=(n(83060),n(28181)),_=function(){var e=(0,l.useState)([]),a=(0,s.Z)(e,2),n=a[0],h=a[1],v=(0,l.useContext)(c.s),j=v.getData,_=v.updateData,M=v.createData,y=(0,l.useState)(!1),w=(0,s.Z)(y,2),L=w[0],Y=w[1],C=(0,l.useState)([]),S=(0,s.Z)(C,2),D=S[0],T=S[1],k=(0,l.useState)(""),E=(0,s.Z)(k,2),N=E[0],A=E[1],F=(0,l.useState)(!1),P=(0,s.Z)(F,2),H=(P[0],P[1]),R=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("aprobacion");case 2:(a=e.sent)&&h(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){R()}),[]);var I=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,n){var o,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",a.target.checked&&(o="aprobado"),s=(0,t.Z)({},a.target.name,o||null),e.next=5,_(s,n.id,"planilla/asistencia");case 5:(i=e.sent)&&((0,m.q)(i.status,i.msg),R());case 7:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a){var n,t,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={asociacion_id:null!==a.asociacion_id?a.asociacion_id:null,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,dni:null!==a.dni?a.dni:null,quincena:a.subarray_id,contrato_id:a.contrato_id},H(!0),e.next=4,M(n,"aprobacion/asistencias");case 4:if(!(t=e.sent)){e.next=15;break}if(null===a.asociacion_id){e.next=10;break}return e.next=9,(0,i.eA)((0,u.Z)(t.data)).toBlob();case 9:o=e.sent;case 10:if(null===a.dni){e.next=14;break}return e.next=13,(0,i.eA)((0,p.Z)(t.data)).toBlob();case 13:o=e.sent;case 14:o&&(s=URL.createObjectURL(o),(l=document.createElement("a")).href=s,l.download="tareo.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s));case 15:H(!1);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=null===n||void 0===n?void 0:n.filter((function(e){var a,n;return null===e||void 0===e||null===(a=e.nombre)||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.includes(N.toLowerCase())}));T(e)}),[N,n]);var z=(0,d.x6)(I,O,(function(){Y(!0)}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Z,{text:"Aprobaciones",ruta:"/planilla"}),(0,x.jsxs)("div",{className:"margenes",children:[(0,x.jsx)(g,{setFilterText:A}),(0,x.jsx)(b,{columns:z,table:D})]}),L&&(0,x.jsx)(Z.Z,{modal:L,setModal:Y})]})}},28181:function(e,a,n){"use strict";var t=n(74165),r=n(15861),o=n(29439),s=n(49389),i=n(87309),l=n(72791),c=n(38411),d=n(99763),u=n(69967),p=n(80184);a.Z=function(e){var a=e.modal,n=e.setModal,m=(e.getPlanilla,e.data),f=e.observacion,h=e.boton,v=(0,l.useContext)(c.s).updateData,x=(0,l.useState)(""),b=(0,o.Z)(x,2),j=b[0],g=b[1],Z=function(){n(!1)},_=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var a,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={observaciones:j},e.next=3,v(a,m.aprobacion_id,"aprobacion/observacion");case 3:(n=e.sent)&&((0,d.q)(n.status,n.msg),Z());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)(u.Z,{className:"modal-usuario",title:h?"Agregar Observaci\xf3n":"Observaci\xf3n RRHH",open:a,width:400,closeModal:Z,children:[(0,p.jsx)(s.Z.TextArea,{showCount:!0,maxLength:255,defaultValue:null!==m&&void 0!==m&&m.observaciones?null===m||void 0===m?void 0:m.observaciones:f||"",style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){g(e.target.value)},placeholder:"Observaci\xf3n"}),(0,p.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:h&&(0,p.jsx)(i.ZP,{onClick:_,children:"Guardar"})})]})}},83060:function(e,a,n){"use strict";n.d(a,{Z:function(){return _}});var t=n(74165),r=n(15861),o=n(29439),s=n(72791),i=n(71368),l=n(4808),c=n(91906),d=n(38411),u=n(53939),p=n(69967),m=n(28181),f=n(17615),h=n(87309),v=n(99763),x=n(8034),b=n(80184),j=function(e){var a=e.modal,n=e.setModal,i=e.data,l=e.actualizarTabla,c=(0,s.useState)(null),d=(0,o.Z)(c,2),u=d[0],m=d[1],j=function(){n(!1)},g=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var a,n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===i||void 0===i?void 0:i.aprobacion_id),{method:"PUT",body:a});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent)&&((0,v.q)(r.status,r.msg),j(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(p.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:j,children:(0,b.jsxs)(f.Z,{onFinish:g,layout:"horizontal",children:[(0,b.jsx)(f.Z.Item,{children:(0,b.jsx)("div",{className:"drag-container",children:(0,b.jsx)(x.Z,{avatar:u,setAvatar:m,selected:i})})}),(0,b.jsx)("div",{className:"button-container",children:(0,b.jsx)(h.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var a,n=e.data,f=e.modal,h=e.setModal,v=e.actualizarTabla,x=(0,s.useContext)(i.c),g=(x.verificacion,x.setVerificacion,(0,s.useContext)(d.s)),Z=(g.getDataById,g.data2,(0,s.useState)()),_=(0,o.Z)(Z,2),M=(_[0],_[1],(0,s.useState)([])),y=(0,o.Z)(M,2),w=y[0],L=(y[1],(0,s.useState)(!1)),Y=(0,o.Z)(L,2),C=Y[0],S=Y[1],D=(0,s.useState)(!1),T=(0,o.Z)(D,2),k=T[0],E=T[1],N=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){N()}),[]);var A=(0,u.MK)();return(0,b.jsxs)(p.Z,{className:"modal-validacion",title:"Hoja de tareo",open:f,width:900,closeModal:function(){h(!1)},children:[(0,b.jsxs)("div",{className:"tareo-container",children:[(0,b.jsxs)("section",{className:"tareo-datos",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Nombre: "}),null===n||void 0===n?void 0:n.nombre]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Dni: "}),null===n||void 0===n?void 0:n.dni]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono: "}),null===n||void 0===n?void 0:n.celular]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Cargo:"})," ",null===n||void 0===n?void 0:n.cargo]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===n||void 0===n?void 0:n.asistencia]})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!1,validacion:!0,cargar:!1,data1:n,data2:w,observacion:!0,modal:S,setModal1:E})})]}),(0,b.jsx)(l.Z,{columns:A,table:null===n||void 0===n||null===(a=n.asistencia_completa)||void 0===a?void 0:a.reverse()}),C&&(0,b.jsx)(j,{modal:C,setModal:S,data:n,actualizarTabla:v}),k&&(0,b.jsx)(m.Z,{setModal:E,modal:k,data:n,observacion:"",boton:!0})]})},Z=function(e){var a=e.data,n=e.modal,t=e.setModal,r=(0,s.useContext)(i.c),l=(r.setValidacionPagosAsociacion,r.setFechas,r.fechas,r.verificacion,r.setVerificacion,(0,s.useState)(!1)),u=(0,o.Z)(l,2),f=u[0],h=u[1],v=(0,s.useContext)(d.s),x=(v.getData,v.data3,v.setData3,v.data2,v.dataToEdit,(0,s.useState)()),j=(0,o.Z)(x,2);j[0],j[1];return(0,b.jsxs)(p.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:n,width:950,closeModal:function(){t(!1)},children:[(0,b.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!1,observacion:!0,setModal1:h})})]}),(0,b.jsx)("section",{className:"table-container",children:(0,b.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,b.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,b.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,b.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,b.jsx)("span",{children:e})},a)}))]})}),(0,b.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,b.jsxs)("tr",{style:{padding:"5px"},children:[(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a+1}),(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,o.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:t},a)}))]},a)}))})]})}),f&&(0,b.jsx)(m.Z,{setModal:h,modal:f,data:a,observacion:"",boton:!0})]})},_=function(e){var a=e.selected,n=(e.actualizarTabla,e.planillaControl),c=e.setPlanillaControl,m=(0,s.useState)([]),f=(0,o.Z)(m,2),h=(f[0],f[1]),v=(0,s.useState)([]),x=(0,o.Z)(v,2),j=x[0],_=x[1],M=(0,s.useContext)(i.c).setPago,y=(0,s.useContext)(d.s).getData,w=(0,s.useState)([]),L=(0,o.Z)(w,2),Y=L[0],C=L[1],S=(0,s.useState)(!1),D=(0,o.Z)(S,2),T=D[0],k=D[1],E=(0,s.useState)(!1),N=(0,o.Z)(E,2),A=N[0],F=N[1],P=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var n,r,o,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return n="planilla/tareo/".concat(a.dni),e.next=4,y(n);case 4:r=e.sent,C(r.data),e.next=13;break;case 8:return o="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,y(o);case 11:s=e.sent,C(s.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){P()}),[a]),(0,s.useEffect)((function(){h([a])}),[a]);var H=(0,u.qQ)((function(e){""===a.codigo?(F(!0),_(e)):(k(!0),_(e))}),(function(e){M(!0),_(e)}));return(0,b.jsxs)(p.Z,{className:"modal-planilla",title:"Control de planilla",open:n,width:900,closeModal:function(){c(!1)},children:[(0,b.jsx)(l.Z,{columns:H,table:Y}),T&&(0,b.jsx)(g,{data:j,modal:T,setModal:k,actualizarTabla:P}),A&&(0,b.jsx)(Z,{data:j,modal:A,setModal:F,actualizarTabla:P})]})}},52563:function(e,a,n){e.exports=function(e){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=a(e),t={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return n.default.locale(t,null,!0),t}(n(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,n,t){var r=n.prototype,o=r.format;t.en.formats=e,r.format=function(a){void 0===a&&(a="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,t=function(a,n){return a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(a,t,r){var o=r&&r.toUpperCase();return t||n[r]||e[r]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,a,n){return a||n.slice(1)}))}))}(a,void 0===n?{}:n);return o.call(this,t)}}}()},77457:function(){}}]);
//# sourceMappingURL=2185.483c3c7d.chunk.js.map