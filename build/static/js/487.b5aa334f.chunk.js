(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[487],{96202:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return g}});var t=n(4942),r=n(74165),o=n(15861),s=n(29439),i=n(4333),l=(n(97892),n(72791)),c=n(38411),d=n(53939),u=n(8771),m=n(99775),f=n(99763),h=n(83188),p=n(34664),x=n(43513),v=n(80184),b=function(e){var a=e.columns,n=e.table;e.set;return(0,v.jsx)("div",{className:"table-container",children:(0,v.jsx)(x.ZP,{columns:a,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,v.jsx)(p.Z,{image:p.Z.PRESENTED_IMAGE_SIMPLE,description:(0,v.jsx)("span",{children:"No hay registros para mostrar."})})})})},j=(n(91906),n(83060),n(28181)),g=function(){var e=(0,l.useState)([]),a=(0,s.Z)(e,2),n=a[0],p=a[1],x=(0,l.useContext)(c.s),g=x.getData,Z=x.updateData,M=x.createData,_=(0,l.useState)(!1),y=(0,s.Z)(_,2),Y=y[0],w=y[1],L=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("aprobacion");case 2:(a=e.sent)&&p(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){L()}),[]);var S=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,n){var o,s,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",a.target.checked&&(o=JSON.parse(localStorage.getItem("firma"))),s=(0,t.Z)({},a.target.name,o||null),i=n.id?n.id:0,e.next=6,Z(s,i,"planilla/asistencia");case 6:(l=e.sent)&&((0,f.q)(l.status,l.msg),L());case 8:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a){var n,t,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={asociacion_id:null!==a.asociacion_id?a.asociacion_id:null,fecha_inicio:a.fecha_inicio,fecha_fin:a.fecha_fin,dni:null!==a.dni?a.dni:null,quincena:a.subarray_id},e.next=3,M(n,"aprobacion/asistencias");case 3:if(!(t=e.sent)){e.next=14;break}if(null===a.asociacion_id){e.next=9;break}return e.next=8,(0,i.eA)((0,u.Z)(t.data)).toBlob();case 8:o=e.sent;case 9:if(null===a.dni){e.next=13;break}return e.next=12,(0,i.eA)((0,m.Z)(t.data)).toBlob();case 12:o=e.sent;case 13:o&&(s=URL.createObjectURL(o),(l=document.createElement("a")).href=s,l.download="tareo.pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s));case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=(0,d.x6)(S,D,(function(){w(!0)}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(h.Z,{text:"Aprobaciones",ruta:"/planilla"}),(0,v.jsx)("div",{className:"margenes",children:(0,v.jsx)(b,{columns:T,table:n})}),Y&&(0,v.jsx)(j.Z,{modal:Y,setModal:w})]})}},28181:function(e,a,n){"use strict";var t=n(74165),r=n(15861),o=n(29439),s=n(49389),i=n(87309),l=n(72791),c=n(38411),d=n(99763),u=n(69967),m=n(80184);a.Z=function(e){var a=e.modal,n=e.setModal,f=(e.getPlanilla,e.data),h=e.observacion,p=e.boton,x=(0,l.useContext)(c.s).updateData,v=(0,l.useState)(""),b=(0,o.Z)(v,2),j=b[0],g=b[1],Z=function(){n(!1)},M=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var a,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={observaciones:j},e.next=3,x(a,f.aprobacion_id,"aprobacion/observacion");case 3:(n=e.sent)&&((0,d.q)(n.status,n.msg),Z());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log("===================================="),console.log(f),console.log("===================================="),(0,m.jsxs)(u.Z,{className:"modal-usuario",title:p?"Agregar Observaci\xf3n":"Observaci\xf3n RRHH",open:a,width:400,closeModal:Z,children:[(0,m.jsx)(s.Z.TextArea,{showCount:!0,maxLength:255,defaultValue:f.observaciones?f.observaciones:h||"",style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){g(e.target.value)},placeholder:"Observaci\xf3n"}),(0,m.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:p&&(0,m.jsx)(i.ZP,{onClick:M,children:"Guardar"})})]})}},83060:function(e,a,n){"use strict";n.d(a,{Z:function(){return M}});var t=n(74165),r=n(15861),o=n(29439),s=n(72791),i=n(71368),l=n(4808),c=n(91906),d=n(38411),u=n(53939),m=n(69967),f=n(28181),h=n(17615),p=n(87309),x=n(99763),v=n(72966),b=n(80184),j=function(e){var a=e.modal,n=e.setModal,i=e.data,l=e.actualizarTabla,c=(0,s.useState)(null),d=(0,o.Z)(c,2),u=d[0],f=d[1],j=function(){n(!1)},g=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var a,n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===i||void 0===i?void 0:i.aprobacion_id),{method:"PUT",body:a});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent)&&((0,x.q)(r.status,r.msg),j(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(m.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:j,children:(0,b.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,b.jsx)(h.Z.Item,{children:(0,b.jsx)("div",{className:"drag-container",children:(0,b.jsx)(v.Z,{avatar:u,setAvatar:f,selected:i})})}),(0,b.jsx)("div",{className:"button-container",children:(0,b.jsx)(p.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var a,n=e.data,h=e.modal,p=e.setModal,x=e.actualizarTabla,v=(0,s.useContext)(i.c),g=(v.verificacion,v.setVerificacion,(0,s.useContext)(d.s)),Z=(g.getDataById,g.data2,(0,s.useState)()),M=(0,o.Z)(Z,2),_=(M[0],M[1],(0,s.useState)([])),y=(0,o.Z)(_,2),Y=y[0],w=(y[1],(0,s.useState)(!1)),L=(0,o.Z)(w,2),S=L[0],D=L[1],T=(0,s.useState)(!1),k=(0,o.Z)(T,2),C=k[0],E=k[1],N=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){N()}),[]);var A=(0,u.MK)();return(0,b.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){p(!1)},children:[(0,b.jsxs)("div",{className:"tareo-container",children:[(0,b.jsxs)("section",{className:"tareo-datos",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Nombre: "}),null===n||void 0===n?void 0:n.nombre]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Dni: "}),null===n||void 0===n?void 0:n.dni]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono: "}),null===n||void 0===n?void 0:n.celular]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Cargo:"})," ",null===n||void 0===n?void 0:n.cargo]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===n||void 0===n?void 0:n.asistencia]})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!0,validacion:!0,cargar:!1,data1:n,data2:Y,observacion:!0,modal:D,setModal1:E})})]}),(0,b.jsx)(l.Z,{columns:A,table:null===n||void 0===n||null===(a=n.asistencia_completa)||void 0===a?void 0:a.reverse()}),S&&(0,b.jsx)(j,{modal:S,setModal:D,data:n,actualizarTabla:x}),C&&(0,b.jsx)(f.Z,{setModal:E,modal:C,data:n,observacion:"",boton:!0})]})},Z=function(e){var a=e.data,n=e.modal,t=e.setModal,r=(0,s.useContext)(i.c),l=(r.setValidacionPagosAsociacion,r.setFechas,r.fechas,r.verificacion,r.setVerificacion,(0,s.useState)(!1)),u=(0,o.Z)(l,2),h=u[0],p=u[1],x=(0,s.useContext)(d.s),v=(x.getData,x.data3,x.setData3,x.data2,x.dataToEdit,(0,s.useState)()),j=(0,o.Z)(v,2);j[0],j[1];return(0,b.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:n,width:950,closeModal:function(){t(!1)},children:[(0,b.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(c.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!0,observacion:!0,setModal1:p})})]}),(0,b.jsx)("section",{className:"table-container",children:(0,b.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,b.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,b.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,b.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,b.jsx)("span",{children:e})},a)}))]})}),(0,b.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,b.jsxs)("tr",{style:{padding:"5px"},children:[(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a+1}),(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,o.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:t},a)}))]},a)}))})]})}),h&&(0,b.jsx)(f.Z,{setModal:p,modal:h,data:a,observacion:"",boton:!0})]})},M=function(e){var a=e.selected,n=(e.actualizarTabla,e.planillaControl),c=e.setPlanillaControl,f=(0,s.useState)([]),h=(0,o.Z)(f,2),p=(h[0],h[1]),x=(0,s.useState)([]),v=(0,o.Z)(x,2),j=v[0],M=v[1],_=(0,s.useContext)(i.c).setPago,y=(0,s.useContext)(d.s).getData,Y=(0,s.useState)([]),w=(0,o.Z)(Y,2),L=w[0],S=w[1],D=(0,s.useState)(!1),T=(0,o.Z)(D,2),k=T[0],C=T[1],E=(0,s.useState)(!1),N=(0,o.Z)(E,2),A=N[0],H=N[1],F=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var n,r,o,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return n="planilla/tareo/".concat(a.dni),e.next=4,y(n);case 4:r=e.sent,S(r.data),e.next=13;break;case 8:return o="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,y(o);case 11:s=e.sent,S(s.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){F()}),[a]),(0,s.useEffect)((function(){p([a])}),[a]);var P=(0,u.qQ)((function(e){""===a.codigo?(H(!0),M(e)):(C(!0),M(e))}),(function(e){_(!0),M(e)}));return(0,b.jsxs)(m.Z,{className:"modal-planilla",title:"Control de planilla",open:n,width:900,closeModal:function(){c(!1)},children:[(0,b.jsx)(l.Z,{columns:P,table:L}),k&&(0,b.jsx)(g,{data:j,modal:k,setModal:C,actualizarTabla:F}),A&&(0,b.jsx)(Z,{data:j,modal:A,setModal:H,actualizarTabla:F})]})}},52563:function(e,a,n){e.exports=function(e){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=a(e),t={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return n.default.locale(t,null,!0),t}(n(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,n,t){var r=n.prototype,o=r.format;t.en.formats=e,r.format=function(a){void 0===a&&(a="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,t=function(a,n){return a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(a,t,r){var o=r&&r.toUpperCase();return t||n[r]||e[r]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,a,n){return a||n.slice(1)}))}))}(a,void 0===n?{}:n);return o.call(this,t)}}}()}}]);
//# sourceMappingURL=487.b5aa334f.chunk.js.map