(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2598],{69967:function(e,t,a){"use strict";a(72791);var n=a(49998),r=a(80184);t.Z=function(e){var t=e.className,a=e.title,o=e.open,i=e.width,c=e.closeModal,s=e.children;return(0,r.jsx)(n.Z,{destroyOnClose:!0,className:t,title:a,open:o,centered:!0,onCancel:c,footer:null,width:i,children:s})}},22552:function(e,t,a){"use strict";var n=a(74165),r=a(15861),o=a(72791),i=a(38411),c=a(49389),s=a(87309),u=a(99763),d=a(78820),l=(a(36752),a(80184)),f=c.Z.Search;t.Z=function(e){var t=e.abrirModal,a=e.importar,c=e.actualizarTrabajadores,p=e.registrar,m=(e.modal,e.setFilterText),v=(0,o.useContext)(i.s),_=(v.cargando,v.setCargando),h=(0,o.useRef)(null),g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("myFile",t.target.files[0]),_(!0),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/trabajador/bulk"),{method:"post",body:a});case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent)&&(_(!1),(0,u.q)(o.status,o.msg),c()),h.current.value=null;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"buscador-personal",children:[(0,l.jsx)("input",{type:"file",ref:h,onChange:g,style:{display:"none"},accept:".xlsx, .xls, .csv"}),(0,l.jsx)(f,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return m(e.target.value)},style:{width:300}}),(0,l.jsxs)("div",{className:"button-container",children:[a&&(0,l.jsx)(s.ZP,{icon:(0,l.jsx)(d.ndd,{}),onClick:function(e){h.current.click()},children:"Importar Trabajadores"}),p?(0,l.jsx)(s.ZP,{icon:(0,l.jsx)(d.lFz,{}),onClick:function(){return t(!0)},children:"Registrar"}):""]})]})})}},97335:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var n=a(74165),r=a(15861),o=a(29439),i=a(72791),c=a(38411),s=a(83188),u=a(4808),d=a(22552),l=a(1413),f=a(4942),p=a(17615),m=a(87309),v=a(99763),_=a(69967),h=a(63998),g=a(78820),x=a(80184),Z=function(e){var t=e.actualizarTabla,a=(e.selected,e.modal),s=e.setModal,u=p.Z.useForm(),d=(0,o.Z)(u,1)[0],Z="empresa",b={razon_social:"",ruc:""},j=(0,i.useState)(b),w=(0,o.Z)(j,2),y=w[0],D=w[1],E=(0,i.useContext)(c.s),T=E.createData,M=E.updateData,k=E.setDataToEdit,F=E.dataToEdit,N=E.cargando,C=E.setCargando;(0,i.useEffect)((function(){F?(D(F),d.setFieldsValue(F)):D(b)}),[F]);var S=function(){s(!1),k(null),D(b)},q=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==F){e.next=6;break}return C(!0),e.next=4,T(y,Z);case 4:(r=e.sent)&&((0,v.q)(r.status,r.msg),S(),t(),C(!1));case 6:if(!F){e.next=12;break}return C(!0),e.next=10,M(y,F.id,Z);case 10:(o=e.sent)&&((0,v.q)(o.status,o.msg),S(),t(),C(!1));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=(0,h.bk)(y,(function(e){var t=e.target,a=t.name,n=t.value;d.setFieldsValue((0,f.Z)({},a,n)),D((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,f.Z)({},a,n))}))}));return(0,x.jsx)(_.Z,{className:"modal-empresa",title:F?"Editar empresa":"Registrar empresa",open:a,width:400,closeModal:S,children:(0,x.jsxs)(p.Z,{form:d,className:"modal-body",onFinish:q,layout:"horizontal",children:[P.map((function(e,t){return(0,x.jsx)(p.Z.Item,{name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:(0,x.jsxs)(x.Fragment,{children:[e.label,e.type]})},t)})),(0,x.jsx)(p.Z.Item,{className:"button-container",children:(0,x.jsx)(m.ZP,{htmlType:"submit",icon:(0,x.jsx)(g.lFz,{}),loading:!!N,children:F?" Editar":" Registrar"})})]})})},b=a(16026),j=(a(138),a(99607),a(97892)),w=a.n(j),y=function(e){var t=e.actualizarTabla,a=(e.selected,e.data),s=e.modal2,u=e.setModal2,d=p.Z.useForm(),Z=(0,o.Z)(d,1)[0],j="contrato",y=(0,i.useContext)(c.s),D=y.createData,E=y.updateData,T=y.getData,M=y.setDataToEdit,k=y.dataToEdit,F=y.cargando,N=y.setCargando,C=(0,b.LR)(a.id),S=(0,i.useState)(C),q=(0,o.Z)(S,2),P=q[0],z=q[1],I=(0,i.useState)([]),R=(0,o.Z)(I,2),Y=R[0],L=R[1],O=(0,i.useState)([]),B=(0,o.Z)(O,2),V=B[0],A=B[1],H=(0,i.useState)([]),G=(0,o.Z)(H,2),J=G[0],X=G[1],K=(0,i.useState)([]),Q=(0,o.Z)(K,2),U=(Q[0],Q[1]),W=(0,i.useState)([]),$=(0,o.Z)(W,2),ee=$[0],te=$[1],ae=(0,i.useState)(""),ne=(0,o.Z)(ae,2),re=ne[0],oe=ne[1],ie=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a,r,o,i,c,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T("cargo"),a=T("campamento"),r=T("gerencia"),o=T("area"),i=T("socio"),c=T("contrato/last/id"),e.next=8,Promise.all([t,a,r,o,i,c]);case 8:s=e.sent,L(s[0].data),A(s[1].data),X(s[2].data),U(s[3].data),te(s[4].data),oe(s[5].data);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(k){var e,t=null===(e=k.map((function(e){return{codigo_contrato:e.codigo_contrato,fecha_inicio:w()(e.fecha_inicio).format("YYYY-MM-DD"),fecha_fin:w()(e.fecha_fin).format("YYYY-MM-DD"),periodo_trabajo:e.periodo_trabajo,tipo_contrato:e.tipo_contrato,gerencia:e.gerencia,campamento_id:e.campamento_id,volquete:e.volquete,teletran:e.teletran,suspendido:e.suspendido,termino_contrato:e.termino_contrato,nota_contrato:e.nota_contrato}})))||void 0===e?void 0:e.at(-1);z(t),Z.setFieldsValue(t)}else z(C)}),[k]),(0,i.useEffect)((function(){ie()}),[]),(0,i.useEffect)((function(){null===k&&z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{codigo_contrato:re})}))}),[re,k]);var ce=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var r,o,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==k){e.next=8;break}return N(!0),e.next=4,D(P,j);case 4:(r=e.sent)&&((0,v.q)(r.status,r.msg),se(),t(),N(!1)),e.next=13;break;case 8:return N(!0),e.next=11,E(P,null===k||void 0===k||null===(o=k.at(-1))||void 0===o?void 0:o.id,j);case 11:(i=e.sent)&&((0,v.q)(i.status,i.msg),se(),t(),N(!1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){u(!1),M(null),z(h.y7)},ue=(0,h.y7)(P,(function(e,t){if(!t&&e.target){var a=e.target,n=a.name,r=a.value;Z.setFieldsValue((0,f.Z)({},n,r)),z((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,f.Z)({},n,r))}))}else Z.setFieldsValue((0,f.Z)({},t,e)),z((function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,f.Z)({},t,e))}))}),J,Y,V,ee);return(0,x.jsx)(_.Z,{className:"modal-contrato-empresa",title:"Registrar contrato",open:s,width:900,closeModal:se,children:(0,x.jsxs)(p.Z,{form:Z,className:"modal-body",onFinish:ce,layout:"horizontal",children:[(0,x.jsx)("div",{className:"contrato",children:ue.slice(0,9).map((function(e,t){return(0,x.jsx)(p.Z.Item,{className:"item",name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:(0,x.jsxs)(x.Fragment,{children:[e.label,e.type]})},t)}))}),(0,x.jsx)("div",{className:"finalizacion",children:ue.slice(9,15).map((function(e,t){return(0,x.jsx)(p.Z.Item,{className:"item",name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:(0,x.jsxs)(x.Fragment,{children:[e.label,e.type]})},t)}))}),(0,x.jsx)(p.Z.Item,{className:"button-container",children:(0,x.jsx)(m.ZP,{htmlType:"submit",loading:!!F,icon:(0,x.jsx)(g.lFz,{}),children:k?"Editar":"Registrar"})})]})})},D=a(53939),E=(a(81837),function(e){var t=e.selected,a=e.modal1,s=e.setModal1,l=(0,i.useContext)(c.s),f=l.getDataById,p=l.deleteData,m=l.data1,h=l.setData1,g=l.setDataToEdit,Z=(l.modal2,l.setModal2,(0,i.useState)("")),b=(0,o.Z)(Z,2),j=b[0],w=b[1],E=(0,i.useState)(!1),T=(0,o.Z)(E,2),M=T[0],k=T[1],F=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"empresa",e.next=3,f("empresa",t.id);case 3:(a=e.sent).data.length>0&&h(a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("contrato",t.contratoId);case 2:(a=e.sent)&&((0,v.q)(a.status,a.msg),F());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){F()}),[]);var C=(0,D.qp)((function(e){g(e.contratos),k(!0),w(e)}),N);return(0,x.jsxs)(_.Z,{className:"modal-empresa-historial",title:"Historial de contratos",open:a,width:900,closeModal:function(){s(!1),g(null)},children:[(0,x.jsx)(d.Z,{abrirModal:k,registrar:!0,modal:!0}),(0,x.jsx)("div",{className:"container",children:(0,x.jsx)(u.Z,{columns:C,table:m})}),M&&(0,x.jsx)(y,{actualizarTabla:F,selected:j,data:t,modal2:M,setModal2:k})]})}),T=a(95579),M=a(34664),k=function(){var e=(0,i.useContext)(c.s),t=e.getData,a=e.deleteData,l=e.setDataToEdit,f=(0,i.useState)([]),p=(0,o.Z)(f,2),m=p[0],_=p[1],h=(0,i.useState)(""),g=(0,o.Z)(h,2),b=g[0],j=g[1],w=(0,i.useState)(!1),y=(0,o.Z)(w,2),k=y[0],F=y[1],N=(0,i.useState)(!1),C=(0,o.Z)(N,2),S=C[0],q=C[1],P=(0,T.Z)(m).result,z=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("empresa");case 2:a=e.sent,_(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("empresa",t);case 2:(r=e.sent)&&((0,v.q)(r.status,r.msg),z());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){z()}),[]);var R=(0,D.XQ)((function(e){q(!0),j(e)}),(function(e){l(e),F(!0)}),I);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Z,{text:"Empresas",user:"Usuario",ruta:"/personal"}),(0,x.jsxs)("div",{className:"margenes",children:[(0,x.jsx)(d.Z,{abrirModal:F,registrar:!0}),(null===P||void 0===P?void 0:P.length)>0?(0,x.jsx)(u.Z,{columns:R,table:P}):(0,x.jsx)(M.Z,{image:M.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})]}),k&&(0,x.jsx)(Z,{actualizarTabla:z,modal:k,setModal:F}),S&&(0,x.jsx)(E,{selected:b,modal1:S,setModal1:q})]})}},4808:function(e,t,a){"use strict";a(72791);var n=a(43513),r=a(34664),o=(a(51279),a(80184));t.Z=function(e){var t=e.columns,a=e.table,i=e.filas,c=i?[i,2*i,3*i,4*i,5*i]:[10,20,30,40,50];return(0,o.jsx)("div",{className:"table-container",children:(0,o.jsx)(n.ZP,{columns:t,data:a,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos",preserveSelectedOnPageChange:!0},paginationPerPage:i||10,paginationRowsPerPageOptions:c,noDataComponent:(0,o.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE,description:(0,o.jsx)("span",{children:"No hay registros para mostrar."})})})})}},16026:function(e,t,a){"use strict";a.d(t,{Bq:function(){return m},FH:function(){return r},FN:function(){return n},JL:function(){return o},LR:function(){return u},Md:function(){return l},Oj:function(){return i},TT:function(){return _},Tc:function(){return h},XK:function(){return g},bf:function(){return j},cB:function(){return Z},d_:function(){return d},eJ:function(){return s},eT:function(){return x},g5:function(){return c},kb:function(){return p},n4:function(){return b},s:function(){return f},v2:function(){return v}});var n={nombre:"",usuario:"",contrasenia:"",estado:""},r={nombre:""},o={nombre:"",direccion:""},i=function(){return{dni:"",codigo_trabajador:"",fecha_nacimiento:"",telefono:"",nombre:"",apellido_paterno:"",apellido_materno:"",email:"",estado_civil:"",genero:"",direccion:"",asociacion_id:null,eliminar:!1}},c=function(e){return{fecha_evaluacion:"",capacitacion_sso:"",capacitacion_gema:"",evaluacion_laboral:"",presion_arterial:"",temperatura:"",saturacion:"",imc:"",pulso:"",diabetes:"",antecedentes:"",emo:"",trabajador_id:e.dni,aprobado:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",fiscalizador:"",fiscalizador_aprobado:"no",control:"no",topico:"no",seguridad:"no",medio_ambiente:"no",recursos_humanos:"no",topico_observacion:"",control_observacion:"",seguridad_observacion:"",medio_ambiente_observacion:"",recursos_humanos_observacion:"",finalizado:!1,gerencia_id:"",area_id:"",puesto_id:"",campamento_id:""}},s=function(e,t){var a;return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia_id:"",area_id:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",asociacion_id:e&&(null===e||void 0===e?void 0:e.id),estado:!1,evaluacion_id:t,trabajadores:null===e||void 0===e||null===(a=e.trabajador)||void 0===a?void 0:a.map((function(e){return e.dni})),tareo:""}},u=function(e){return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia:"",area:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",puesto:"",estado:!1,empresa_id:e}},d=function(e){return{sucursal_id:e,fecha:"",movimiento:"",forma_pago:"",encargado:"",area:"",cantidad:"",medida:"",descripcion:"",monto:"",proveedor:"",comprobante:"",dni:"",sucursal_transferencia:"",precio:""}},l={nombre:""},f={nombre:"",codigo:"",descripcion:"",saldo_inicial:""},p={nombre:"",codigo:"",descripcion:""},m=function(e,t){return{codigo:parseInt(t)+1,nombre:"",codigo_interno:"",codigo_barras:"",descripcion:"",categoria_id:"",unidad_id:"",precio:"",fecha:"",observacion:"",almacen_id:"",stock:"0",costo_total:""}},v=function(e){return{codigo:"",motivo:"",fecha:"",encargado:"",codigo_compra:"",boleta:"",codigo_requerimiento:"",producto_id:"",categoria:"",cantidad:"",unidad:"",tipo:e,producto:"",almacen_id:"",codigo_pedido:"",costo:"",dni:"",costo_total:"",area_id:"",personal:"",retornable:""}},_=function(e,t){return{codigo:"",fecha_pedido:"",fecha_entrega:"",solicitante:"",area:"",celular:"",proyecto:"",producto_id:"",cantidad:"",unidad:"",estado:"",producto:"",personal:"",dni:""}},h=function(){return{id:"",nombre:"",contrato_id:"",observacion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajador_dni:""}},g=function(){return{id:"",observacion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajadores:[]}},x=function(){return{id:"",razon_social:"",contrato_id:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"casa"}},Z=function(){return{id:"",nombre:"",trabajador_dni:"",observacion:"",fecha_pago:new Date,hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:"",tipo:"extraordinario"}},b=function(){return{id:"",hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:""}},j=function(){return{id:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"asociacion",contrato_id:"",asociacion:[]}}},95579:function(e,t,a){"use strict";var n=a(72791),r=a(38411);t.Z=function(e){var t=(0,n.useContext)(r.s),a=t.filterText,o=(t.filterTextModal,t.result),i=t.setResult;return(0,n.useEffect)((function(){if(""!==a){var t=e.filter((function(e){return Object.values(e).join("").toLowerCase().includes(a.toLowerCase())}));i(t)}else i(e)}),[a,e]),{result:o}}},36752:function(){},81837:function(){},138:function(){},24654:function(){}}]);
//# sourceMappingURL=2598.9af997a1.chunk.js.map