/*! For license information please see 326.68dbe0fd.chunk.js.LICENSE.txt */
(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[326],{25513:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n=a(74165),r=a(15861),s=a(29439),i=a(72791),o=a(83188),u=a(38411),c=a(4808),d=a(91906),l=a(71368),m=a(53939),f=a(69967),h=(a(76487),a(99763)),_=a(97892),v=a.n(_),p=a(80184),M=function(e){var t=e.data,a=e.actualizarTabla,o=e.fechas,_=e.fechaCalendario,M=(0,i.useContext)(l.c),Y=(M.setControlAsistencia,M.fechaId,(0,i.useState)(null)),x=(0,s.Z)(Y,2),g=(x[0],x[1],(0,i.useState)("")),b=(0,s.Z)(g,2),j=b[0],y=b[1],L=(0,i.useState)([]),D=(0,s.Z)(L,2),Z=D[0],w=D[1],k=(0,i.useContext)(u.s),T=k.getData,C=k.data2,S=k.setData2,E=k.createData,H=k.updateData,A=k.modal,P=k.dataToEdit,R=(k.setDataToEdit,k.setModal),z=(k.cargando,k.setCargando,(0,i.useState)("")),N=(0,s.Z)(z,2),F=N[0],q=N[1];(0,i.useEffect)((function(){!function(){var e,a=o&&(null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)==t}))),n=a&&(null===a||void 0===a||null===(e=a.at(-1))||void 0===e?void 0:e.id);n&&q(n)}()}),[t,o]);var I=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="asistencia/trabajador/".concat(F),e.next=3,T(t);case 3:a=e.sent,S(a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){F&&I()}),[F]);var O=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r){var s,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/trabajador",s={asistencia_id:F,trabajador_id:r.dni,asistencia:t.target.value},e.next=4,E(s,"asistencia/trabajador");case 4:(i=e.sent)&&((0,h.q)(i.status,i.msg),a(),I());case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(r){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/hora_ingreso",s={hora_ingreso:r.target.value},e.next=4,H(s,t.id,"asistencia/hora_ingreso");case 4:200===e.sent.status&&a();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=null===C||void 0===C?void 0:C.filter((function(e){var t,a,n,r;return(null===(t="".concat(null===e||void 0===e?void 0:e.apellido_paterno," ").concat(null===e||void 0===e?void 0:e.apellido_materno," ").concat(null===e||void 0===e?void 0:e.nombre))||void 0===t||null===(a=t.toLowerCase())||void 0===a?void 0:a.includes(j.toLowerCase()))||(null===e||void 0===e||null===(n=e.dni)||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.includes(j.toLowerCase()))}));w(e)}),[j,C]);var V=(0,m.eF)(O);return(0,p.jsxs)(f.Z,{className:"modal-asistencia",title:P?"Editar asistencia - ".concat(v()(_).format("DD MMMM YYYY")):"Registrar asistencia - ".concat(v()(_).format("DD MMMM YYYY")),open:A,width:800,closeModal:function(){R(!1),S([])},children:[(0,p.jsx)("div",{className:"hora-ingreso",children:(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"",children:"Hora de ingreso: "}),(0,p.jsx)("input",{type:"time",name:"hora_ingreso",defaultValue:(null===t||void 0===t?void 0:t.hora_ingreso)||"07:30",onChange:U})]})}),(0,p.jsx)("div",{className:"buscador-container",children:(0,p.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!0,validacion:!1,buscador:!1,setFilterText:y,actualizar:I,fecha:t,setModal:R})}),(0,p.jsx)("br",{}),(0,p.jsx)(c.Z,{columns:V,table:Z})]})},Y=a(95579),x=a(91082),g=a(87309),b=a(19006),j=a(39126),y=(a(55795),a(35790)),L=function(){var e=(0,i.useContext)(u.s),t=e.getData,a=e.setData,c=e.data,d=e.deleteData,l=e.modal,m=e.setModal,f=e.createData,_=(0,i.useState)(""),L=(0,s.Z)(_,2),D=L[0],Z=L[1],w=(0,i.useState)(""),k=(0,s.Z)(w,2),T=(k[0],k[1],(0,Y.Z)(c).result,function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",e.next=3,t("asistencia");case 3:r=e.sent,a(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),C=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("control");case 2:a=e.sent,(0,h.q)(a.status,a.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){T()}),[]);var S=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),r=null===c||void 0===c?void 0:c.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)===v()(a).format("YYYY-MM-DD")})).map((function(e){return e.id})).toString(),"asistencia",e.next=5,d("asistencia",r);case 5:(s=e.sent)&&((0,h.q)(s.status,s.msg),T());case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",a={fecha:v()(t).format("YYYY-MM-DD"),hora_ingreso:"07:30"},e.next=4,f(a,"asistencia");case 4:e.sent&&T();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"lista-asistencia",children:[(0,p.jsx)(o.Z,{text:"Asistencia",user:"Usuario",ruta:"/planilla"}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"50px"},children:[(0,p.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",paddingLeft:"30px"},children:(0,p.jsx)(g.ZP,{onClick:function(){return C()},children:"Validar Asistencias"})}),(0,p.jsx)("div",{style:{width:"80%",height:"70%",border:"1px solid lightgrey",borderRadius:"6px",padding:"10px",marginBottom:"20px"},children:(0,p.jsx)(b.Z,{fullscreen:!0,onChange:function(e){var t=v()(e).format("YYYY-MM-DD");E(e,t)},mode:"month",locale:y.Z,dateCellRender:function(e){var t=v()(e).format("YYYY-MM-DD");return(null===c||void 0===c?void 0:c.filter((function(e){return e.fecha===t}))).length>0?(0,p.jsxs)("div",{className:"calendar-data",children:[(0,p.jsx)("label",{htmlFor:"",children:"Asistencia creada"}),(0,p.jsxs)("div",{children:[(0,p.jsx)(j.jox,{onClick:function(t){return function(e,t){e.stopPropagation(),Z(v()(t).format("YYYY-MM-DD")),m(!0)}(t,e)},style:{cursor:"pointer"}}),(0,p.jsx)(x.Z,{title:"Eliminar asistencia",description:"\xbfEstas seguro de eliminar?",onConfirm:function(t){return S(t,e)},okText:"Si",cancelText:"No",placement:"topRight",children:(0,p.jsx)(j.yvY,{style:{cursor:"pointer"},className:"eliminar"})})]})]}):""}})})]}),l&&(0,p.jsx)(M,{data:D,actualizarTabla:T,fechas:c,fechaCalendario:D})]})}},52563:function(e,t,a){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return a.default.locale(n,null,!0),n}(a(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,a,n){var r=a.prototype,s=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var a=this.$locale().formats,n=function(t,a){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var s=r&&r.toUpperCase();return n||a[r]||e[r]||a[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,a){return t||a.slice(1)}))}))}(t,void 0===a?{}:a);return s.call(this,n)}}}()},55795:function(e,t,a){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?a[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:4},invalidDate:"Fecha inv\xe1lida"})}(a(72426))}}]);
//# sourceMappingURL=326.68dbe0fd.chunk.js.map