"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[7199],{96972:function(e,o,n){n.d(o,{Z:function(){return j}});var a=n(4942),i=n(93433),t=n(1413),r=n(74165),c=n(15861),d=n(29439),u=n(72791),l=n(38411),s=n(53939),p=n(16026),f=n(49998),v=n(49389),m=n(80458),h=n(87309),_=n(99763),g=n(78820),b=n(4808),x=n(80184),j=function(e){var o=e.id,n=e.data,j=e.actualizarTabla,Z=e.modal3,y=e.setModal3,w=(0,u.useContext)(l.s),S=w.dataToEdit,q=w.createData,C=w.updateData,D=w.setDataToEdit,k=w.getData,P=(0,u.useState)(""),E=(0,d.Z)(P,2),T=(E[0],E[1]),N=(0,p.TT)(),F=(0,u.useState)(N),Y=(0,d.Z)(F,2),M=Y[0],L=Y[1],O=(0,u.useState)([]),A=(0,d.Z)(O,2),R=A[0],z=A[1],I=(0,u.useState)([]),H=(0,d.Z)(I,2),B=H[0],G=H[1],J=(0,u.useState)(""),W=(0,d.Z)(J,2),K=W[0],U=W[1],V=(0,u.useState)([]),X=(0,d.Z)(V,2),Q=X[0],$=X[1],ee=(0,u.useState)(""),oe=(0,d.Z)(ee,2),ne=oe[0],ae=oe[1],ie=(0,u.useState)([]),te=(0,d.Z)(ie,2),re=(te[0],te[1],function(){y(!1),D(null),z([]),L(N)}),ce=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var o,n,a,i,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento","area","requerimiento/trabajador","requerimiento/last/id",o=k("requerimiento"),n=k("area"),a=k("requerimiento/trabajador"),i=k("requerimiento/last/id"),e.next=10,Promise.all([o,n,a,i]);case 10:t=e.sent,T(t[0].data),G(t[1].data),$(t[2].data),ae(t[3].data);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){ce()}),[Z]),(0,u.useEffect)((function(){L((function(e){return(0,t.Z)((0,t.Z)({},e),{},{almacen_id:o})}))}),[o]),(0,u.useEffect)((function(){null===S&&L((function(e){return(0,t.Z)((0,t.Z)({},e),{},{codigo:ne})}))}),[S,ne,M.codigo]),(0,u.useEffect)((function(){if(null!==S){var e;L((0,t.Z)((0,t.Z)({},S),{},{codigo:S.id}));var o=null===S||void 0===S||null===(e=S.requerimiento_productos)||void 0===e?void 0:e.map((function(e){var o,n,a,i,t,r;return{codigo_producto:null===e||void 0===e||null===(o=e.producto)||void 0===o?void 0:o.id,fecha_pedido:M.fecha_pedido,fecha_entrega:M.fecha_entrega,solicitante:M.solicitante,area:M.area,celular:M.celular,proyecto:M.proyecto,producto_id:null===e||void 0===e?void 0:e.id,descripcion:null===e||void 0===e||null===(n=e.producto)||void 0===n?void 0:n.nombre,cantidad:null===e||void 0===e?void 0:e.cantidad,unidad:null===e||void 0===e||null===(a=e.producto)||void 0===a||null===(i=a.unidad)||void 0===i?void 0:i.nombre,almacen_id:null===e||void 0===e||null===(t=e.producto)||void 0===t?void 0:t.almacen_id,stock:null===e||void 0===e||null===(r=e.producto)||void 0===r?void 0:r.stock,dni:M.dni}}));z(o)}}),[S]),(0,u.useEffect)((function(){var e;if((null===M||void 0===M||null===(e=M.dni)||void 0===e?void 0:e.length)>=7){var o=null===Q||void 0===Q?void 0:Q.filter((function(e){return e.dni===M.dni}));o.length>0&&L((function(e){var n,a,i;return(0,t.Z)((0,t.Z)({},e),{},{solicitante:null===o||void 0===o||null===(n=o.at(0))||void 0===n?void 0:n.nombre,area:null===o||void 0===o||null===(a=o.at(0))||void 0===a?void 0:a.area,celular:null===o||void 0===o||null===(i=o.at(0))||void 0===i?void 0:i.telefono})}))}}),[M.dni,Q]),(0,u.useEffect)((function(){if(M.producto){var e=null===n||void 0===n?void 0:n.filter((function(e){return e.id===M.producto})),a=null===e||void 0===e?void 0:e.map((function(e){return{codigo_producto:null===e||void 0===e?void 0:e.id,producto_id:null===e||void 0===e?void 0:e.id,descripcion:null===e||void 0===e?void 0:e.nombre,unidad:null===e||void 0===e?void 0:e.unidad,almacen_id:o,stock:null===e||void 0===e?void 0:e.stock}})),t=null===R||void 0===R?void 0:R.filter((function(e){var o=a.find((function(o){return o.codigo_producto===e.codigo_producto}));return o?e:o}));0===(null===t||void 0===t?void 0:t.length)&&z((function(e){return[].concat((0,i.Z)(e),[a.at(-1)])}))}}),[M]),(0,u.useEffect)((function(){""!==K&&void 0!==K&&z((function(e){return null===e||void 0===e?void 0:e.map((function(e,o){return o===K?(0,t.Z)((0,t.Z)({},e),{},{cantidad:M.cantidad}):e}))}))}),[K,M]);var de=function(e,o,n){if(void 0!==o&&U(o),!n&&e.target){var i=e.target,r=i.name,c=i.value;L((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,a.Z)({},r,c))}))}else L((function(o){return(0,t.Z)((0,t.Z)({},o),{},(0,a.Z)({},n,e))}))},ue=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){var a,i,t,c,d,u,l,s,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requerimiento",t="requerimiento/producto",n.preventDefault(),c={dni:M.dni,codigo:M.codigo,fecha_pedido:M.fecha_pedido,fecha_entrega:M.fecha_entrega,solicitante:M.solicitante,area:M.area,celular:M.celular,proyecto:M.proyecto,almacen_id:o,requerimientos:R},d=null===(a=c.requerimientos)||void 0===a?void 0:a.filter((function(e){return e.cantidad<=0})),u=null===(i=c.requerimientos)||void 0===i?void 0:i.filter((function(e){return""!==e.cantidad})).length,l=c.requerimientos.length,u!==l){e.next=25;break}if(0!==d.length){e.next=22;break}if(null!==S){e.next=16;break}return e.next=12,q(c,"requerimiento");case 12:200===(s=e.sent).status&&((0,_.q)(s.status,s.msg),re()),e.next=20;break;case 16:return e.next=18,C(c,S.id,t);case 18:200===(p=e.sent).status&&((0,_.q)(p.status,p.msg),j(),re());case 20:e.next=23;break;case 22:return e.abrupt("return",(0,_.q)(500,"La cantidad debe ser mayor a 0."));case 23:e.next=26;break;case 25:return e.abrupt("return",(0,_.q)(500,"Debe completar el campo cantidad, para todos los productos seleccionados."));case 26:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),le=(0,s.wg)(de,(function(e){z((function(o){return o.filter((function(o){return o.producto_id!==e.producto_id}))})),L(N)}),M,S);return(0,x.jsxs)(f.Z,{destroyOnClose:!0,className:"modal-requerimiento",title:null===S?"Registrar requerimiento":"Editar requerimiento",open:Z,centered:!0,onCancel:re,footer:null,width:800,children:[(0,x.jsxs)("form",{className:"modal-body",children:[(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"C\xf3digo requerimiento"}),(0,x.jsx)(v.Z,{disabled:!0,value:M.codigo,type:"text",name:"codigo",onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Fecha de Requerimiento"}),(0,x.jsx)(v.Z,{type:"date",placeholder:"Fecha de pedido",name:"fecha_pedido",onChange:de,value:M.fecha_pedido})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Fecha de entrega"}),(0,x.jsx)(v.Z,{type:"date",placeholder:"Fecha de entrega",name:"fecha_entrega",value:M.fecha_entrega,onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Dni"}),(0,x.jsx)(v.Z,{type:"number",name:"dni",placeholder:"Dni",value:M.dni,onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Nombre solicitante"}),(0,x.jsx)(v.Z,{value:M.solicitante,type:"text",name:"solicitante",placeholder:"Solicitante",onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"\xc1rea"}),(0,x.jsx)(m.Z,{placeholder:"\xc1rea",name:"area",value:M.area?M.area:void 0,onChange:function(e){return de(e,null,"area")},dropdownMatchSelectWidth:!1,style:{width:"250px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,o){var n;return(null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:B.map((function(e,o){return{value:e.nombre,label:e.nombre}}))})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Celular"}),(0,x.jsx)(v.Z,{value:M.celular,placeholder:"Celular",type:"text",name:"celular",onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Proyecto/Actividad"}),(0,x.jsx)(v.Z,{value:M.proyecto,placeholder:"Proyecto",type:"text",name:"proyecto",onChange:de})]}),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("label",{children:"Productos"}),(0,x.jsx)(m.Z,{placeholder:"Ingrese un producto",showSearch:!0,optionFilterProp:"children",name:"producto",filterOption:function(e,o){var n;return(null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},dropdownMatchSelectWidth:!1,style:{width:"250px"},onChange:function(e){return de(e,null,"producto")},options:null===n||void 0===n?void 0:n.map((function(e,o){return{value:e.id,label:e.nombre}}))})]})]}),(0,x.jsx)("br",{}),(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{columns:le,table:R,filas:5})}),(0,x.jsx)("div",{className:"button-container",children:0!==(null===R||void 0===R?void 0:R.length)?(0,x.jsx)(h.ZP,{icon:(0,x.jsx)(g.lFz,{}),onClick:ue,children:"Guardar"}):""})]})}},4808:function(e,o,n){var a=n(29439),i=n(72791),t=n(43513),r=n(34664),c=(n(51279),n(76487),n(80184));o.Z=function(e){var o=e.columns,n=e.table,d=e.filas,u=i.useState(!0),l=(0,a.Z)(u,2),s=(l[0],l[1]),p=i.useState([]),f=(0,a.Z)(p,2),v=(f[0],f[1]);i.useEffect((function(){var e=setTimeout((function(){v(n),s(!1)}),2e3);return function(){return clearTimeout(e)}}),[]);var m=d?[d,2*d,3*d,4*d,5*d]:[10,20,30,40,50];return(0,c.jsx)("div",{className:"table-container",children:(0,c.jsx)(t.ZP,{columns:o,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos",preserveSelectedOnPageChange:!0},paginationPerPage:d||10,paginationRowsPerPageOptions:m,noDataComponent:(0,c.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE,description:(0,c.jsx)("span",{children:"No hay registros para mostrar."})})})})}},16026:function(e,o,n){n.d(o,{Bq:function(){return v},FH:function(){return i},FN:function(){return a},JL:function(){return t},LR:function(){return u},Md:function(){return s},Oj:function(){return r},TT:function(){return h},Tc:function(){return _},XK:function(){return g},bf:function(){return Z},cB:function(){return x},d_:function(){return l},eJ:function(){return d},eT:function(){return b},g5:function(){return c},kb:function(){return f},n4:function(){return j},s:function(){return p},v2:function(){return m}});var a={nombre:"",usuario:"",contrasenia:"",estado:""},i={nombre:""},t={nombre:"",direccion:""},r=function(){return{dni:"",codigo_trabajador:"",fecha_nacimiento:"",telefono:"",nombre:"",apellido_paterno:"",apellido_materno:"",email:"",estado_civil:"",genero:"",direccion:"",asociacion_id:null,eliminar:!1}},c=function(e){return{fecha_evaluacion:"",capacitacion_sso:"",capacitacion_gema:"",evaluacion_laboral:"",presion_arterial:"",temperatura:"",saturacion:"",imc:"",pulso:"",diabetes:"",antecedentes:"",emo:"",trabajador_id:e.dni,aprobado:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",fiscalizador:"",fiscalizador_aprobado:"no",control:"no",topico:"no",seguridad:"no",medio_ambiente:"no",recursos_humanos:"no",topico_observacion:"",control_observacion:"",seguridad_observacion:"",medio_ambiente_observacion:"",recursos_humanos_observacion:"",finalizado:!1,gerencia_id:"",area_id:"",puesto_id:"",campamento_id:""}},d=function(e,o){var n;return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia_id:"",area_id:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",asociacion_id:e&&(null===e||void 0===e?void 0:e.id),estado:!1,evaluacion_id:o,trabajadores:null===e||void 0===e||null===(n=e.trabajador)||void 0===n?void 0:n.map((function(e){return e.dni})),tareo:""}},u=function(e){return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia:"",area:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",puesto:"",estado:!1,empresa_id:e}},l=function(e){return{sucursal_id:e,fecha:"",movimiento:"",forma_pago:"",encargado:"",area:"",cantidad:"",medida:"",descripcion:"",monto:"",proveedor:"",comprobante:"",dni:"",sucursal_transferencia:"",precio:""}},s={nombre:""},p={nombre:"",codigo:"",descripcion:"",saldo_inicial:""},f={nombre:"",codigo:"",descripcion:""},v=function(e,o){return{codigo:parseInt(o)+1,nombre:"",codigo_interno:"",codigo_barras:"",descripcion:"",categoria_id:"",unidad_id:"",precio:"",fecha:"",observacion:"",almacen_id:"",stock:"0",costo_total:""}},m=function(e){return{codigo:"",motivo:"",fecha:"",encargado:"",codigo_compra:"",boleta:"",codigo_requerimiento:"",producto_id:"",categoria:"",cantidad:"",unidad:"",tipo:e,producto:"",almacen_id:"",codigo_pedido:"",costo:"",dni:"",costo_total:"",area_id:"",personal:"",retornable:""}},h=function(e,o){return{codigo:"",fecha_pedido:"",fecha_entrega:"",solicitante:"",area:"",celular:"",proyecto:"",producto_id:"",cantidad:"",unidad:"",estado:"",producto:"",personal:"",dni:""}},_=function(){return{id:"",nombre:"",contrato_id:"",observacion:"",unidad_produccion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajador_dni:""}},g=function(){return{id:"",unidad_produccion:"",observacion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajadores:[]}},b=function(){return{id:"",unidad_produccion:"",razon_social:"",contrato_id:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"casa"}},x=function(){return{id:"",nombre:"",trabajador_dni:"",observacion:"",fecha_pago:new Date,hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:"",tipo:"extraordinario"}},j=function(){return{id:"",hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:""}},Z=function(){return{id:"",unidad_produccion:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"asociacion",contrato_id:"",asociacion:[]}}},35790:function(e,o,n){n.d(o,{Z:function(){return t}});var a={locale:"es_ES",today:"Hoy",now:"Ahora",backToToday:"Volver a hoy",ok:"Aceptar",clear:"Limpiar",month:"Mes",year:"A\xf1o",timeSelect:"Seleccionar hora",dateSelect:"Seleccionar fecha",monthSelect:"Elegir un mes",yearSelect:"Elegir un a\xf1o",decadeSelect:"Elegir una d\xe9cada",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mes anterior (PageUp)",nextMonth:"Mes siguiente (PageDown)",previousYear:"A\xf1o anterior (Control + left)",nextYear:"A\xf1o siguiente (Control + right)",previousDecade:"D\xe9cada anterior",nextDecade:"D\xe9cada siguiente",previousCentury:"Siglo anterior",nextCentury:"Siglo siguiente"},i={placeholder:"Seleccionar hora"},t={lang:Object.assign({placeholder:"Seleccionar fecha",rangePlaceholder:["Fecha inicial","Fecha final"]},a),timePickerLocale:Object.assign({},i)}}}]);
//# sourceMappingURL=7199.4dab9121.chunk.js.map