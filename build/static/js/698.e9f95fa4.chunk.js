"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[698],{28181:function(e,n,t){var a=t(74165),o=t(15861),i=t(29439),r=t(49389),l=t(87309),s=t(72791),d=t(38411),c=t(99763),u=t(69967),v=t(80184);n.Z=function(e){var n=e.modal,t=e.setModal,p=(e.getPlanilla,e.data),h=e.observacion,x=e.boton,f=(0,s.useContext)(d.s).updateData,m=(0,s.useState)(""),b=(0,i.Z)(m,2),j=b[0],g=b[1],Z=function(){t(!1)},C=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={observaciones:j},e.next=3,f(n,p.aprobacion_id,"aprobacion/observacion");case 3:(t=e.sent)&&((0,c.q)(t.status,t.msg),Z());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log("===================================="),console.log(p),console.log("===================================="),(0,v.jsxs)(u.Z,{className:"modal-usuario",title:x?"Agregar Observaci\xf3n":"Observaci\xf3n RRHH",open:n,width:400,closeModal:Z,children:[(0,v.jsx)(r.Z.TextArea,{showCount:!0,maxLength:255,defaultValue:null!==p&&void 0!==p&&p.observaciones?null===p||void 0===p?void 0:p.observaciones:h||"",style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){g(e.target.value)},placeholder:"Observaci\xf3n"}),(0,v.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:x&&(0,v.jsx)(l.ZP,{onClick:C,children:"Guardar"})})]})}},20201:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(4942),o=t(1413),i=t(74165),r=t(15861),l=t(29439),s=t(72791),d=t(38411),c=t(71368),u=t(83188),v=t(83060),p=t(53939),h=t(49389),x=t(87309),f=t(80184),m=h.Z.Search,b=function(e){e.abrirModal;var n=e.registrar,t=(0,s.useContext)(c.c).setJuntarTeletrans,a=(0,s.useContext)(d.s).setFilterText;return(0,f.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)(m,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return a(e.target.value)},style:{width:300}}),(0,f.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,f.jsx)("div",{children:!1!==n?(0,f.jsx)(x.ZP,{onClick:function(){t(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})},j=t(95579),g=t(34664),Z=t(43513),C=t(78820),w=(t(51279),function(e){var n=e.table,t=e.handleContrato,a=e.filas,o=(0,s.useState)(0),i=(0,l.Z)(o,2),r=(i[0],i[1]),d=[{id:"Nro",name:"Nro",width:"60px",selector:function(e,n){return null===e||void 0===e?void 0:e.id}},{id:"nombres",name:"Nombres y apellidos",selector:function(e){return null===e||void 0===e?void 0:e.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(e){return null!==e&&void 0!==e&&e.telefono?e.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha de inicio",width:"150px",selector:function(e){return null===e||void 0===e?void 0:e.fecha_inicio}},{id:"fecha_fin",name:"Fecha de fin",width:"150px",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(e){var n,t,a,o;return null!==e&&void 0!==e&&null!==(n=e.evaluacion)&&void 0!==n&&null!==(t=n.at(-1))&&void 0!==t&&t.recomendado_por?null===e||void 0===e||null===(a=e.evaluacion)||void 0===a||null===(o=a.at(-1))||void 0===o?void 0:o.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(e){return null!==e&&void 0!==e&&e.asistencia?e.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"volquete",name:"Volquete",selector:function(e){return null!==e&&void 0!==e&&e.volquete?null===e||void 0===e?void 0:e.volquete:0},center:!0},{id:"teletrans",name:"Teletrans",selector:function(e){return null!==e&&void 0!==e&&e.teletran?e.teletran:0},center:!0},{id:"total",name:"Total",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.total},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(e){return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(C.w8I,{onClick:function(){return t(e)},style:{cursor:"pointer"}})})}}];return(0,f.jsx)("div",{className:"table-container",children:(0,f.jsx)(Z.ZP,{columns:d,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:a,paginationRowsPerPageOptions:[a,2*a,3*a,4*a,5*a],onChangePage:function(e){r(e)},noDataComponent:(0,f.jsx)(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE,description:(0,f.jsx)("span",{children:"No hay registros para mostrar."})})})})}),E=t(80458),y=t(34045),S=function(){var e=(0,s.useContext)(c.c).setUserdata,n=(0,s.useContext)(d.s),t=n.getData,h=n.setResult,m=(0,s.useState)([]),g=(0,l.Z)(m,2),Z=g[0],C=g[1],S=(0,s.useState)([]),N=(0,l.Z)(S,2),T=N[0],P=N[1],_=(0,s.useState)([]),A=(0,l.Z)(_,2),M=A[0],O=A[1],D=(0,s.useState)([]),I=(0,l.Z)(D,2),F=I[0],R=I[1],k=(0,s.useState)([]),L=(0,l.Z)(k,2),B=(L[0],L[1],(0,s.useState)({})),q=(0,l.Z)(B,2),z=q[0],H=q[1],U=(0,s.useState)([]),V=(0,l.Z)(U,2),G=V[0],J=V[1],Q=(0,s.useState)(!1),W=(0,l.Z)(Q,2),$=W[0],K=W[1],X=(0,j.Z)(G).result,Y=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,a,o,r,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla","area","cargo","campamento",n=t("planilla"),a=t("area"),o=t("cargo"),r=t("campamento"),e.next=10,Promise.all([n,a,o,r]);case 10:l=e.sent,J(l[0].data),P(l[1].data),O(l[2].data),R(l[3].data);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){Y()}),[]),(0,s.useEffect)((function(){h(z.campamento||z.area||z.puesto?G.filter((function(e){return(!z.campamento||(null===e||void 0===e?void 0:e.campamento)===z.campamento)&&(!z.area||(null===e||void 0===e?void 0:e.area)===z.area)&&(!z.puesto||(null===e||void 0===e?void 0:e.puesto)===z.puesto)})):G)}),[z,G]);var ee=function(n){K(!0),C(n),e(n)},ne=function(e,n){H((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,a.Z)({},n,e))}))},te=(0,p.B)(ee);return(0,f.jsxs)("div",{children:[(0,f.jsx)(u.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,f.jsxs)("div",{className:"margenes",children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,f.jsx)(b,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,f.jsx)(E.Z,{name:"campamento",placeholder:"Campamento",onChange:function(e){return ne(e,"campamento")},style:{width:"200px"},showSearch:!0,optionFilterProp:"children",value:z.campamento,dropdownMatchSelectWidth:!1,filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:F.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,f.jsx)(E.Z,{name:"area",placeholder:"\xc1rea",showSearch:!0,optionFilterProp:"children",dropdownMatchSelectWidth:!1,filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},value:z.area,onChange:function(e){return ne(e,"area")},style:{width:"200px"},options:T.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,f.jsx)(E.Z,{name:"puesto",placeholder:"Puesto",onChange:function(e){return ne(e,"puesto")},style:{width:"200px"},showSearch:!0,optionFilterProp:"children",value:z.puesto,dropdownMatchSelectWidth:!1,filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:M.map((function(e){return{id:e.id,value:e.nombre}}))}),(0,f.jsx)(x.ZP,{onClick:function(){!function(e,n,t){var a=y.P6.book_new(),o=y.P6.json_to_sheet(e);y.P6.book_append_sheet(a,o,n),(0,y.Fv)(a,"".concat(t,".xlsx"))}(null===X||void 0===X?void 0:X.map((function(e,n){var t,a,o,i,r,l,s,d;return{Nro:n+1,DNI:null===e||void 0===e?void 0:e.dni,NOMBRE:null===e||void 0===e?void 0:e.nombre,FECHA_NACIMIENTO:null===e||void 0===e||null===(t=e.fecha_nacimiento)||void 0===t?void 0:t.split("T")[0],CELULAR:null===e||void 0===e?void 0:e.telefono,CARGO:null===e||void 0===e?void 0:e.puesto,"\xc1REA":null===e||void 0===e?void 0:e.area,COOPERATIVA:null===e||void 0===e||null===(a=e.evaluacion)||void 0===a||null===(o=a.at(-1))||void 0===o?void 0:o.cooperativa,FECHA_DE_INGRESO:null===e||void 0===e||null===(i=e.fecha_inicio)||void 0===i?void 0:i.split("T")[0],VOLQUETE:null===e||void 0===e?void 0:e.volquete,TELETRAN:null===e||void 0===e?void 0:e.teletran,PERIODO_DE_TRABAJO:null===e||void 0===e?void 0:e.asistencia,FECHA_DE_SALIDA:null===e||void 0===e||null===(r=e.fecha_fin)||void 0===r?void 0:r.split("T")[0],ANTECEDENTES:!1===(null===e||void 0===e||null===(l=e.contratos)||void 0===l?void 0:l.suspendido)?"Ninguno":"Suspendido",RECOMENDADO_POR:null===e||void 0===e||null===(s=e.evaluacion)||void 0===s||null===(d=s.at(-1))||void 0===d?void 0:d.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:parseInt(null===e||void 0===e?void 0:e.asistencia)%15===0?parseInt(null===e||void 0===e?void 0:e.asistencia)/15:""}})),"Planilla","reporte")},children:" Descargar"}),(0,f.jsx)(x.ZP,{onClick:function(){H({campamento:void 0,area:void 0,puesto:void 0})},children:" Limpiar Busqueda"})]}),(0,f.jsx)(w,{columns:te,table:X,handleContrato:ee,filas:10})]}),$&&(0,f.jsx)(v.Z,{selected:Z,actualizarTabla:Y,planillaControl:$,setPlanillaControl:K})]})}},83060:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(74165),o=t(15861),i=t(29439),r=t(72791),l=t(71368),s=t(4808),d=t(91906),c=t(38411),u=t(53939),v=t(69967),p=t(28181),h=t(17615),x=t(87309),f=t(99763),m=t(72966),b=t(80184),j=function(e){var n=e.modal,t=e.setModal,l=e.data,s=e.actualizarTabla,d=(0,r.useState)(null),c=(0,i.Z)(d,2),u=c[0],p=c[1],j=function(){t(!1)},g=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,(null===u||void 0===u?void 0:u.file)&&n.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===l||void 0===l?void 0:l.aprobacion_id),{method:"PUT",body:n});case 4:return t=e.sent,e.next=7,t.json();case 7:(o=e.sent)&&((0,f.q)(o.status,o.msg),j(),s());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(v.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:n,width:400,closeModal:j,children:(0,b.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,b.jsx)(h.Z.Item,{children:(0,b.jsx)("div",{className:"drag-container",children:(0,b.jsx)(m.Z,{avatar:u,setAvatar:p,selected:l})})}),(0,b.jsx)("div",{className:"button-container",children:(0,b.jsx)(x.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var n,t=e.data,h=e.modal,x=e.setModal,f=e.actualizarTabla,m=(0,r.useContext)(l.c),g=(m.verificacion,m.setVerificacion,(0,r.useContext)(c.s)),Z=(g.getDataById,g.data2,(0,r.useState)()),C=(0,i.Z)(Z,2),w=(C[0],C[1],(0,r.useState)([])),E=(0,i.Z)(w,2),y=E[0],S=(E[1],(0,r.useState)(!1)),N=(0,i.Z)(S,2),T=N[0],P=N[1],_=(0,r.useState)(!1),A=(0,i.Z)(_,2),M=A[0],O=A[1],D=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){D()}),[]);var I=(0,u.MK)();return(0,b.jsxs)(v.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){x(!1)},children:[(0,b.jsxs)("div",{className:"tareo-container",children:[(0,b.jsxs)("section",{className:"tareo-datos",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!0,validacion:!0,cargar:!1,data1:t,data2:y,observacion:!0,modal:P,setModal1:O})})]}),(0,b.jsx)(s.Z,{columns:I,table:null===t||void 0===t||null===(n=t.asistencia_completa)||void 0===n?void 0:n.reverse()}),T&&(0,b.jsx)(j,{modal:T,setModal:P,data:t,actualizarTabla:f}),M&&(0,b.jsx)(p.Z,{setModal:O,modal:M,data:t,observacion:"",boton:!0})]})},Z=function(e){var n=e.data,t=e.modal,a=e.setModal,o=(0,r.useContext)(l.c),s=(o.setValidacionPagosAsociacion,o.setFechas,o.fechas,o.verificacion,o.setVerificacion,(0,r.useState)(!1)),u=(0,i.Z)(s,2),h=u[0],x=u[1],f=(0,r.useContext)(c.s),m=(f.getData,f.data3,f.setData3,f.data2,f.dataToEdit,(0,r.useState)()),j=(0,i.Z)(m,2);j[0],j[1];return(0,b.jsxs)(v.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:950,closeModal:function(){a(!1)},children:[(0,b.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:" Nombre: "})," ",n&&null!==n&&void 0!==n&&n.nombre?n.nombre:"---"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono:"})," ",n&&null!==n&&void 0!==n&&n.telefono?n.telefono:"---"]})})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:n,data2:null,modal:null,descargar:!0,observacion:!0,setModal1:x})})]}),(0,b.jsx)("section",{className:"table-container",children:(0,b.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,b.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,b.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),n.trabajadores.length>0&&Object.keys(n.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,n){return(0,b.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,b.jsx)("span",{children:e})},n)}))]})}),(0,b.jsx)("tbody",{children:n.trabajadores.map((function(e,n){return(0,b.jsxs)("tr",{style:{padding:"5px"},children:[(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:n+1}),(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var n=(0,i.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(n)})).map((function(e,n){var t=(0,i.Z)(e,2),a=(t[0],t[1]);return(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a},n)}))]},n)}))})]})}),h&&(0,b.jsx)(p.Z,{setModal:x,modal:h,data:n,observacion:"",boton:!0})]})},C=function(e){var n=e.selected,t=(e.actualizarTabla,e.planillaControl),d=e.setPlanillaControl,p=(0,r.useState)([]),h=(0,i.Z)(p,2),x=(h[0],h[1]),f=(0,r.useState)([]),m=(0,i.Z)(f,2),j=m[0],C=m[1],w=(0,r.useContext)(l.c).setPago,E=(0,r.useContext)(c.s).getData,y=(0,r.useState)([]),S=(0,i.Z)(y,2),N=S[0],T=S[1],P=(0,r.useState)(!1),_=(0,i.Z)(P,2),A=_[0],M=_[1],O=(0,r.useState)(!1),D=(0,i.Z)(O,2),I=D[0],F=D[1],R=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,o,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.dni){e.next=8;break}return t="planilla/tareo/".concat(n.dni),e.next=4,E(t);case 4:o=e.sent,T(o.data),e.next=13;break;case 8:return i="planilla/tareo/asociacion/".concat(n.asociacion_id),e.next=11,E(i);case 11:r=e.sent,T(r.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){R()}),[n]),(0,r.useEffect)((function(){x([n])}),[n]);var k=(0,u.qQ)((function(e){""===n.codigo?(F(!0),C(e)):(M(!0),C(e))}),(function(e){w(!0),C(e)}));return(0,b.jsxs)(v.Z,{className:"modal-planilla",title:"Control de planilla",open:t,width:900,closeModal:function(){d(!1)},children:[(0,b.jsx)(s.Z,{columns:k,table:N}),A&&(0,b.jsx)(g,{data:j,modal:A,setModal:M,actualizarTabla:R}),I&&(0,b.jsx)(Z,{data:j,modal:I,setModal:F,actualizarTabla:R})]})}}}]);
//# sourceMappingURL=698.e9f95fa4.chunk.js.map