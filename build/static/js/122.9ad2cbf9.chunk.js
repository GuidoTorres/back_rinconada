"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[122],{91906:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(1413),i=t(93433),r=t(4942),o=t(74165),l=t(15861),s=t(72791),c=t(71368),d=t(300),u=t(87309),v=t(99763),h=t(2541),f=(t(4333),t(80184)),x=d.Z.Search,p=function(e){var n=e.abrirModal,t=e.registrar,d=(e.crear,e.exportar),p=e.cargar,j=e.actualizar,m=e.buscador,b=e.data1,g=e.validacion,Z=e.modal,y=e.setFilterText,C=e.fecha,w=(0,s.useContext)(c.c).setControlAsistencia,F=(0,s.useRef)(null),k=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n){var t,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("myFile",n.target.files[0]),t.append("fecha",C),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:t});case 5:return a=e.sent,e.next=8,a.json();case 8:(i=e.sent)&&((0,v.q)(i.status,i.msg),j(),w(!1),F.current.value=null);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,f.jsx)("input",{type:"file",ref:F,onChange:k,style:{display:"none"}}),m?(0,f.jsx)(x,{placeholder:"Ingresa una nombre...",onChange:function(e){return y(e.target.value)},style:{width:300}}):(0,f.jsxs)("div",{style:{width:"100%"},children:[!1!==t?(0,f.jsx)(u.ZP,{onClick:function(){n(!0)},children:"Registrar"}):"",!1!==d&&null!==b&&void 0!==b&&b.firma_gerente&&null!==b&&void 0!==b&&b.firma_jefe&&null!==b&&void 0!==b&&b.foto?(0,f.jsx)(u.ZP,{onClick:function(e){var n,t,o=null===(n=b.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var n;return(0,r.Z)({},null===e||void 0===e||null===(n=e.asistencium)||void 0===n?void 0:n.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),l=Object.assign.apply(Object,[{}].concat((0,i.Z)(o))),s=null===b||void 0===b||null===(t=b.trabajador_asistencia)||void 0===t?void 0:t.slice(0,1).map((function(e,n){var t,i;return(0,a.Z)({Nro:n+1,Nombre:null===b||void 0===b?void 0:b.nombre,Dni:null===b||void 0===b?void 0:b.dni,Celular:null===b||void 0===b?void 0:b.telefono,Cargo:null===b||void 0===b||null===(t=b.contratos)||void 0===t?void 0:t.puesto,"\xc1rea":null===b||void 0===b||null===(i=b.contratos)||void 0===i?void 0:i.area},l)}));(0,h.H)(s,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==g?(0,f.jsx)(u.ZP,{onClick:function(){Z(!0)},children:"Validaci\xf3n "}):"",!1!==p?(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)(x,{placeholder:"Ingresa una nombre...",onChange:function(e){return y(e.target.value)},style:{width:300}}),(0,f.jsx)(u.ZP,{style:{width:"100px"},onClick:function(){F.current.click()},children:"Cargar"})]}):""]})]})}},32163:function(e,n,t){var a=t(300),i=t(87309),r=t(72791),o=t(38411),l=t(71368),s=t(80184),c=a.Z.Search;n.Z=function(e){e.abrirModal;var n=e.registrar,t=(0,r.useContext)(l.c).setJuntarTeletrans,a=(0,r.useContext)(o.s).setFilterText;return(0,s.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(c,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return a(e.target.value)},style:{width:300}}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,s.jsx)("div",{children:!1!==n?(0,s.jsx)(i.ZP,{onClick:function(){t(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})}},85530:function(e,n,t){t.d(n,{Z:function(){return b}});var a=t(74165),i=t(15861),r=t(29439),o=t(72791),l=t(38411),s=t(71368),c=t(4808),d=t(91906),u=t(79260),v=(t(95579),t(69967)),h=t(17615),f=t(87309),x=t(99763),p=t(72966),j=t(80184),m=function(e){var n=e.modal,t=e.setModal,l=e.data,s=e.actualizarTabla,c=(0,o.useState)(null),d=(0,r.Z)(c,2),u=d[0],m=d[1],b=function(){t(!1)},g=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,(null===u||void 0===u?void 0:u.file)&&n.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===l||void 0===l?void 0:l.aprobacion_id),{method:"PUT",body:n});case 4:return t=e.sent,e.next=7,t.json();case 7:(i=e.sent)&&((0,x.q)(i.status,i.msg),b(),s());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsx)(v.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:n,width:400,closeModal:b,children:(0,j.jsxs)(h.Z,{onFinish:g,layout:"horizontal",children:[(0,j.jsx)(h.Z.Item,{children:(0,j.jsx)("div",{className:"drag-container",children:(0,j.jsx)(p.Z,{avatar:u,setAvatar:m,selected:l})})}),(0,j.jsx)("div",{className:"button-container",children:(0,j.jsx)(f.ZP,{htmlType:"submit",children:"Guardar"})})]})})},b=function(e){var n,t=e.data,h=e.modal,f=e.setModal,x=e.actualizarTabla,p=(0,o.useContext)(s.c),b=(p.verificacion,p.setVerificacion,(0,o.useContext)(l.s)),g=(b.getDataById,b.data2,(0,o.useState)()),Z=(0,r.Z)(g,2),y=(Z[0],Z[1],(0,o.useState)([])),C=(0,r.Z)(y,2),w=C[0],F=(C[1],(0,o.useState)(!1)),k=(0,r.Z)(F,2),_=k[0],P=k[1],N=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){N()}),[]);var D=(0,u.MK)();return console.log("===================================="),console.log(t),console.log("===================================="),(0,j.jsxs)(v.Z,{className:"modal-validacion",title:"Hoja de tareo",open:h,width:900,closeModal:function(){f(!1)},children:[(0,j.jsxs)("div",{className:"tareo-container",children:[(0,j.jsxs)("section",{className:"tareo-datos",children:[(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,j.jsx)("div",{children:(0,j.jsxs)("label",{htmlFor:"",children:[(0,j.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,j.jsx)("section",{className:"tareo-boton",children:(0,j.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!0,validacion:!0,cargar:!1,data1:t,data2:w,modal:P})})]}),(0,j.jsx)(c.Z,{columns:D,table:null===t||void 0===t||null===(n=t.asistencia_completa)||void 0===n?void 0:n.reverse()}),_&&(0,j.jsx)(m,{modal:_,setModal:P,data:t,actualizarTabla:x})]})}},38316:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(74165),i=t(15861),r=t(29439),o=t(72791),l=t(38411),s=(t(91906),t(4808),t(71368)),c=t(69967),d=t(80184),u=function(e){var n=e.data,t=e.modal,u=e.setModal,v=(0,o.useContext)(s.c),h=(v.setValidacionPagosAsociacion,v.setFechas),f=(v.fechas,v.verificacion,v.setVerificacion,(0,o.useContext)(l.s)),x=f.getData,p=f.data3,j=f.setData3,m=(f.data2,f.dataToEdit,(0,o.useState)()),b=(0,r.Z)(m,2),g=(b[0],b[1],(0,o.useState)()),Z=(0,r.Z)(g,2),y=Z[0],C=Z[1],w=(0,o.useState)([]),F=(0,r.Z)(w,2),k=(F[0],F[1],function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="planilla/tareo/asociacion/".concat(n.id),e.next=3,x(t);case 3:i=e.sent,j(i.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,o.useEffect)((function(){k()}),[]),console.log(n);return(0,o.useEffect)((function(){var e;h(p),C(null===p||void 0===p||null===(e=p.map((function(e){return e.fecha})))||void 0===e?void 0:e.filter((function(e){return void 0!==e})))}),[p]),(0,d.jsxs)(c.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:900,closeModal:function(){u(!1)},children:[(0,d.jsxs)("section",{style:{paddingLeft:"30px"},children:[(0,d.jsx)("div",{children:(0,d.jsxs)("label",{htmlFor:"",children:["Nombre: ",n&&null!==n&&void 0!==n&&n.nombre?n.nombre:"---"]})}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"5px"},children:[(0,d.jsx)("div",{children:(0,d.jsxs)("label",{htmlFor:"",children:["Dni: ",n&&null!==n&&void 0!==n&&n.dni?n.dni:"---"]})}),(0,d.jsx)("div",{style:{marginLeft:"50px"},children:(0,d.jsxs)("label",{htmlFor:"",children:["Tel\xe9fono: ",n&&null!==n&&void 0!==n&&n.telefono?n.telefono:"---"]})}),(0,d.jsx)("div",{style:{marginLeft:"50px"},children:(0,d.jsxs)("label",{htmlFor:"",children:["Cargo: ",n&&null!==n&&void 0!==n&&n.cargo?n.cargo:"---"]})})]})]}),(0,d.jsx)("section",{className:"table-container",children:(0,d.jsxs)("table",{children:[(0,d.jsxs)("tr",{style:{},children:[(0,d.jsx)("th",{children:"Nro"}),(0,d.jsx)("th",{children:"Hoja de tareo asistencia de operacion"}),null===y||void 0===y?void 0:y.map((function(e){return e.map((function(e){return(0,d.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)"},children:(0,d.jsx)("span",{children:e})})}))}))]}),null===p||void 0===p?void 0:p.map((function(e,n){var t;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:n+1}),(0,d.jsx)("td",{children:(null===e||void 0===e?void 0:e.nombre)+" "+(null===e||void 0===e?void 0:e.apellido_paterno)+" "+(null===e||void 0===e?void 0:e.apellido_materno)}),null===e||void 0===e||null===(t=e.trabajador_asistencia)||void 0===t?void 0:t.map((function(e){return(0,d.jsx)("td",{children:"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F"})}))]},n+2)}))]})})]})}},2541:function(e,n,t){t.d(n,{H:function(){return o},S:function(){return r}});var a=t(93433),i=t(34045),r=function(e,n,t){var a=i.P6.book_new(),r=i.P6.json_to_sheet(e);i.P6.book_append_sheet(a,r,n),(0,i.Fv)(a,"".concat(t,".xlsx"))},o=function(e,n,t){var r=i.P6.book_new(),o=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],l=[o,Object.keys(e[0])],s=[].concat(l,(0,a.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,n,t){return e[o[t]]=n,e}),{})})),c=i.P6.json_to_sheet(s);c["!cols"]=o.map((function(){return{width:20,height:40,textAlign:"center"}})),c["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],c.A1.s={font:{bold:!0}},c.B1.s={font:{bold:!0}},c.C1.s={font:{bold:!0}},c.D1.s={font:{bold:!0}},c.E1.s={font:{bold:!0}},c.F1.s={font:{bold:!0}},i.P6.book_append_sheet(r,c,n),(0,i.Fv)(r,"".concat(t,".xlsx"))}},97603:function(){}}]);
//# sourceMappingURL=122.9ad2cbf9.chunk.js.map