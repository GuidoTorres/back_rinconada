"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2287],{69967:function(e,a,n){n(72791);var o=n(49998),i=n(80184);a.Z=function(e){var a=e.className,n=e.title,r=e.open,t=e.width,l=e.closeModal,s=e.children;return(0,i.jsx)(o.Z,{destroyOnClose:!0,className:a,title:n,open:r,centered:!0,onCancel:l,footer:null,width:t,children:s})}},22552:function(e,a,n){var o=n(74165),i=n(15861),r=n(72791),t=n(38411),l=n(49389),s=n(87309),c=n(99763),d=n(78820),u=(n(36752),n(80184)),v=l.Z.Search;a.Z=function(e){var a=e.abrirModal,n=e.importar,l=e.actualizarTrabajadores,h=e.registrar,p=(e.modal,e.setFilterText),m=(0,r.useContext)(t.s),f=(m.cargando,m.setCargando),x=(0,r.useRef)(null),j=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(a){var n,i,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("myFile",a.target.files[0]),f(!0),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/trabajador/bulk"),{method:"post",body:n});case 5:return i=e.sent,e.next=8,i.json();case 8:(r=e.sent)&&(f(!1),(0,c.q)(r.status,r.msg),l()),x.current.value=null;case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"buscador-personal",children:[(0,u.jsx)("input",{type:"file",ref:x,onChange:j,style:{display:"none"},accept:".xlsx, .xls, .csv"}),(0,u.jsx)(v,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return p(e.target.value)},style:{width:300}}),(0,u.jsxs)("div",{className:"button-container",children:[n&&(0,u.jsx)(s.ZP,{icon:(0,u.jsx)(d.ndd,{}),onClick:function(e){x.current.click()},children:"Importar Trabajadores"}),h?(0,u.jsx)(s.ZP,{icon:(0,u.jsx)(d.lFz,{}),onClick:function(){return a(!0)},children:"Registrar"}):""]})]})})}},86717:function(e,a,n){n(72791),n(38411);var o=n(49389),i=n(87309),r=n(78820),t=(n(97434),n(80184)),l=o.Z.Search;a.Z=function(e){var a=e.abrirModal,n=(e.registrar,e.data,e.setFilterText);return(0,t.jsxs)("div",{className:"personal-buscador",children:[(0,t.jsx)(l,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return n(e.target.value)},style:{width:300}}),(0,t.jsx)("div",{className:"button-container",children:(0,t.jsx)(i.ZP,{onClick:function(){return a(!0)},icon:(0,t.jsx)(r.lFz,{}),children:"Registrar"})})]})}},8034:function(e,a,n){var o=n(1413),i=n(72791),r=n(18267),t=(n(77457),n(80184));a.Z=function(e){var a=e.setAvatar,n=e.avatar,l=e.selected,s=(0,i.useCallback)((function(e){var n=e[0];a({file:n,preview:URL.createObjectURL(n)})}),[a]),c=(0,r.uI)({accept:{"image/png":[".png"],"image/jpg":[".jpg"],"image/jpeg":[".jpeg"]},noKeyboard:!0,onDrop:s}),d=c.getRootProps,u=c.getInputProps,v=c.isDragActive;return(0,t.jsxs)("div",(0,o.Z)((0,o.Z)({},d()),{},{className:"drag",children:[(0,t.jsx)("input",(0,o.Z)({},u())),v?(0,t.jsx)("p",{children:"Coloca la imagen aqui..."}):null!==l&&void 0!==l&&l.foto||null!==n&&void 0!==n&&n.preview?(0,t.jsx)("img",{src:(null===n||void 0===n?void 0:n.preview)||(null===l||void 0===l?void 0:l.foto),alt:""}):(0,t.jsx)("p",{children:"Arrastra la imagen aqui, o has click para seleccionar la imagen."})]}))}},1333:function(e,a,n){n.d(a,{Z:function(){return w}});var o=n(74165),i=n(15861),r=n(29439),t=n(72791),l=n(38411),s=n(4942),c=n(1413),d=n(78820),u=n(16026),v=n(69967),h=n(49389),p=n(80458),m=n(82339),f=n(87309),x=n(99763),j=n(76641),b=(n(72426),n(80184)),g=function(e){var a,n,g,_,C=e.actualizarTabla,Z=e.selected,w=e.actualizarTrabajador,y="evaluacion",F=(0,u.g5)(Z),S=(0,t.useContext)(l.s),z=S.createData,N=S.updateData,M=S.getData,k=S.setDataToEdit,T=S.dataToEdit,L=S.modal3,D=S.setModal3,R=S.cargando,E=S.setCargando,P=(0,t.useState)(F),I=(0,r.Z)(P,2),O=I[0],A=I[1],Y=(0,t.useState)([]),q=(0,r.Z)(Y,2),H=q[0],B=q[1],V=(0,t.useState)([]),G=(0,r.Z)(V,2),U=G[0],W=G[1],J=(0,t.useState)([]),K=(0,r.Z)(J,2),X=K[0],Q=K[1],$=(0,t.useState)([]),ee=(0,r.Z)($,2),ae=ee[0],ne=ee[1],oe=(0,t.useState)([]),ie=(0,r.Z)(oe,2),re=ie[0],te=ie[1],le=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var a,n,i,r,t,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("gerencia"),n=M("area"),i=M("cargo"),r=M("socio"),t=M("campamento"),e.next=7,Promise.all([a,n,i,r,t]);case 7:l=e.sent,B(l[0].data),W(l[1].data),Q(l[2].data),te(l[3].data),ne(l[4].data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){A(T||F)}),[T]),(0,t.useEffect)((function(){le()}),[]),(0,t.useEffect)((function(){var e=re.filter((function(e){return(null===e||void 0===e?void 0:e.nombre)==O.recomendado_por}));A((function(a){var n;return(0,c.Z)((0,c.Z)({},a),{},{cooperativa:null===e||void 0===e||null===(n=e.at(-1))||void 0===n?void 0:n.cooperativa})}))}),[O.recomendado_por,T,re]),(0,t.useEffect)((function(){null===T&&A((function(e){return(0,c.Z)((0,c.Z)({},e),{},{area_id:"",puesto_id:""})}))}),[O.gerencia_id,T]);var se=function(e,a){if(!a&&e.target){var n=e.target,o=n.name,i=n.value;A((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,s.Z)({},o,i))}))}else A((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,s.Z)({},a,e))}))};console.log(T);var ce=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(a){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),E(!0),!T){e.next=8;break}return e.next=5,N(O,T.evaluacion_id,y);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,z(O,y);case 10:e.t0=e.sent;case 11:(n=e.t0)&&((0,x.q)(n.status,n.msg),de(),C(),w(),T&&D(!1),E(!1));case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),de=function(){D(!1),k(null),A(F),E(!1)};return(0,b.jsx)(v.Z,{className:"modal-registrar-contrato",title:T?"Editar evaluaci\xf3n":"Registrar evaluaci\xf3n",open:L,width:700,closeModal:de,children:(0,b.jsxs)("form",{className:"modal-body",onSubmit:ce,style:{pointerEvents:null!==T&&null!==T&&void 0!==T&&T.finalizado?"none":"auto"},children:[(0,b.jsxs)("fieldset",{className:"cabecera",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:" Fecha de evaluaci\xf3n"}),(0,b.jsx)(h.Z,{type:"date",value:null===O||void 0===O||null===(a=O.fecha_evaluacion)||void 0===a?void 0:a.split("T")[0],placeholder:"Fecha de evaluaci\xf3n",name:"fecha_evaluacion",style:{width:"300px"},onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Gerencia"}),(0,b.jsx)(p.Z,{placeholder:"Gerencia",style:{width:"300px"},name:"gerencia_id",size:"small",className:"area",value:null===O||void 0===O?void 0:O.gerencia_id,onChange:function(e){return se(e,"gerencia_id")},showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:H.map((function(e){return{label:e.nombre,value:e.id}}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"\xc1rea"}),(0,b.jsx)(p.Z,{value:O.area_id,name:"area_id",size:"small",style:{width:"300px"},onChange:function(e){return se(e,"area_id")},showSearch:!0,dropdownMatchSelectWidth:!1,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:""!==O.gerencia_id?null===U||void 0===U||null===(n=U.filter((function(e){return(null===e||void 0===e?void 0:e.gerencia_id)===(null===O||void 0===O?void 0:O.gerencia_id)})))||void 0===n?void 0:n.map((function(e){return{label:e.nombre,value:e.id}})):null})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Cargo al que postula"}),(0,b.jsx)(p.Z,{value:O.puesto_id,name:"puesto_id",size:"small",style:{width:"300px"},onChange:function(e){return se(e,"puesto_id")},showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:""!==O.area_id?null===X||void 0===X||null===(g=X.filter((function(e){var a;return(null===e||void 0===e||null===(a=e.area)||void 0===a?void 0:a.id)===(null===O||void 0===O?void 0:O.area_id)})))||void 0===g?void 0:g.map((function(e){return{label:e.nombre,value:e.id}})):null})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Campamento"}),(0,b.jsx)(p.Z,{value:O.campamento_id,name:"campamento_id",size:"small",style:{width:"300px"},onChange:function(e){return se(e,"campamento_id")},showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:null===ae||void 0===ae?void 0:ae.map((function(e){return{value:e.id,label:e.nombre}}))})]})]}),(0,b.jsxs)("fieldset",{className:"cooperativa",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Cooperativa"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Recomendado por"}),(0,b.jsx)(p.Z,{value:null===O||void 0===O?void 0:O.recomendado_por,name:"recomendado_por",size:"small",style:{width:"200px"},onChange:function(e){return se(e,"recomendado_por")},dropdownMatchSelectWidth:!1,showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:re.map((function(e){return{value:e.nombre,label:e.nombre}}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Cooperativa"}),(0,b.jsx)(h.Z,{disabled:!0,type:"text",name:"cooperativa",value:null===O||void 0===O?void 0:O.cooperativa,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Condici\xf3n cooperativa"}),(0,b.jsx)(p.Z,{value:null===O||void 0===O?void 0:O.condicion_cooperativa,name:"condicion_cooperativa",style:{width:"200px"},size:"small",onChange:function(e){return se(e,"condicion_cooperativa")},options:[{label:"Hijo",value:"Hijo"},{label:"Sobrino",value:"Sobrino"},{label:"Primo",value:"Primo"},{label:"Tio",value:"Tio"},{label:"Compadre",value:"Compadre"},{label:"Compa\xf1ero",value:"Compa\xf1ero"},{label:"Amigo",value:"Amigo"},{label:"Nuera",value:"Nuera"},{label:"Conocido",value:"Conocido"},{label:"Recomendado",value:"Recomendado"},{label:"Titular",value:"Titular"},{label:"Externo",value:"Externo"}]})]})]}),(0,b.jsxs)("section",{className:"prueba",children:[(0,b.jsxs)("fieldset",{className:"fiscalizador",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Fiscalizador"})}),(0,b.jsxs)("div",{className:"fiscalizador",children:[(0,b.jsx)("label",{htmlFor:"",children:" Fiscalizador a cargo "}),(0,b.jsx)(p.Z,{value:null===O||void 0===O?void 0:O.fiscalizador,name:"fiscalizador",onChange:function(e){return se(e,"fiscalizador")},size:"small",dropdownMatchSelectWidth:!1,showSearch:!0,optionFilterProp:"children",filterOption:function(e,a){var n;return(null!==(n=null===a||void 0===a?void 0:a.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:null===(_=re.slice(1))||void 0===_?void 0:_.map((function(e){return{label:e.nombre,value:e.nombre}}))})]}),(0,b.jsxs)("div",{className:"autoriza",children:[(0,b.jsx)("div",{className:"",children:(0,b.jsx)("label",{htmlFor:"",children:" Autoriza:"})}),(0,b.jsxs)("div",{className:"radio",children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"fiscalizador_aprobado",value:"si",checked:"si"===(null===O||void 0===O?void 0:O.fiscalizador_aprobado),onChange:se}),(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"fiscalizador_aprobado",value:"no",checked:"si"!==(null===O||void 0===O?void 0:O.fiscalizador_aprobado),onChange:se})]})]})]}),(0,b.jsxs)("fieldset",{className:"control",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Control"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Estado:"})," ","true"===O.suspendido?(0,b.jsx)(m.Z,{color:"purple",children:"Suspendido"}):(0,b.jsx)(m.Z,{color:"green",children:"Normal"})]})}),(0,b.jsxs)("label",{htmlFor:"",style:{fontSize:"13px"},children:[" ",(0,b.jsx)("strong",{children:"Evaluaci\xf3n laboral:"})," ",null===O||void 0===O?void 0:O.nota_contrato]})]}),(0,b.jsxs)("div",{className:"autoriza",children:[(0,b.jsxs)("label",{htmlFor:"",children:[" ",(0,b.jsx)("strong",{children:"Autoriza:"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"control",value:"si",checked:"si"===O.control,onChange:se}),(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"control",value:"no",checked:"si"!==O.control,onChange:se})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:(0,b.jsx)("strong",{children:"Observaciones:"})}),(0,b.jsx)(j.Z,{name:"control_observacion",value:null===O||void 0===O?void 0:O.control_observacion,onChange:se,rows:1})]})]})]}),(0,b.jsxs)("section",{className:"prueba2",children:[(0,b.jsxs)("fieldset",{className:"topico",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Topico"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Presi\xf3n arterial"}),(0,b.jsx)(h.Z,{value:O.presion_arterial,name:"presion_arterial",onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Temperatura"}),(0,b.jsx)(h.Z,{type:"number",value:O.temperatura,name:"temperatura",onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Saturaci\xf3n de ox\xedgeno"}),(0,b.jsx)(h.Z,{type:"number",value:O.saturacion,name:"saturacion",onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"IMC"}),(0,b.jsx)(h.Z,{type:"number",value:O.imc,name:"imc",onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Pulso(pm)"}),(0,b.jsx)(h.Z,{type:"number",value:O.pulso,name:"pulso",onChange:se,size:"small"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Diabetes"}),(0,b.jsxs)("div",{className:"autoriza",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"diabetes",value:"Si",checked:"Si"===O.diabetes,onChange:se})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"diabetes",value:"No",checked:"Si"!==O.diabetes,onChange:se})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Observaciones"}),(0,b.jsx)(j.Z,{name:"topico_observacion",value:null===O||void 0===O?void 0:O.topico_observacion,onChange:se,rows:1})]}),(0,b.jsxs)("div",{className:"autoriza",children:[(0,b.jsx)("label",{htmlFor:"",children:" Autoriza:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"topico",value:"si",checked:"si"===O.topico,onChange:se})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"topico",value:"no",checked:"si"!==O.topico,onChange:se})]})]})]}),(0,b.jsxs)("fieldset",{className:"seguridad",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Seguridad"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Capacitaci\xf3n SSO: "}),(0,b.jsx)(h.Z,{value:null===O||void 0===O?void 0:O.capacitacion_sso,name:"capacitacion_sso",onChange:se,type:"number",size:"small"})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Observaciones:"}),(0,b.jsx)(j.Z,{name:"seguridad_observacion",value:null===O||void 0===O?void 0:O.seguridad_observacion,onChange:se,rows:1})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Autoriza:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"seguridad",value:"si",checked:"si"===(null===O||void 0===O?void 0:O.seguridad),onChange:se}),(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"seguridad",value:"no",checked:"si"!==(null===O||void 0===O?void 0:O.seguridad),onChange:se})]})]})]})]}),(0,b.jsxs)("fieldset",{className:"ambiente",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Medio Ambiente"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Capacitaci\xf3n GEMA: "}),(0,b.jsx)(h.Z,{type:"number",value:null===O||void 0===O?void 0:O.capacitacion_gema,name:"capacitacion_gema",onChange:se})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Observaciones"}),(0,b.jsx)(j.Z,{name:"medio_ambiente_observacion",value:null===O||void 0===O?void 0:O.medio_ambiente_observacion,onChange:se,rows:1})]}),(0,b.jsxs)("div",{className:"titulo",children:[(0,b.jsx)("label",{htmlFor:"",children:" Autoriza"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"medio_ambiente",value:"si",checked:"si"===(null===O||void 0===O?void 0:O.medio_ambiente),onChange:se}),(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"medio_ambiente",value:"no",checked:"si"!==(null===O||void 0===O?void 0:O.medio_ambiente),onChange:se})]})]})]})]})]}),(0,b.jsxs)("fieldset",{className:"recursos",children:[(0,b.jsx)("legend",{children:(0,b.jsx)("strong",{children:"Recursos Humanos"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:"Observaciones: "}),(0,b.jsx)(j.Z,{name:"recursos_humanos_observacion",value:null===O||void 0===O?void 0:O.recursos_humanos_observacion,onChange:se,rows:1})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Autoriza:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" Si"}),(0,b.jsx)("input",{type:"radio",name:"recursos_humanos",value:"si",checked:"si"===(null===O||void 0===O?void 0:O.recursos_humanos),onChange:se})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"",children:" No"}),(0,b.jsx)("input",{type:"radio",name:"recursos_humanos",value:"no",checked:"si"!==(null===O||void 0===O?void 0:O.recursos_humanos),onChange:se})]})]})]}),(0,b.jsx)("div",{className:"button-container",children:T?(0,b.jsx)(f.ZP,{icon:(0,b.jsx)(d.lFz,{}),onClick:ce,loading:!!R,children:"Editar"}):(0,b.jsx)(f.ZP,{icon:(0,b.jsx)(d.lFz,{}),onClick:ce,loading:!!R,children:"Registrar"})})]})})},_=n(4808),C=n(53939),Z=n(86717),w=(n(76487),function(e){var a=e.selected,n=e.actualizarTrabajador,s=e.data,c=e.modal1,d=e.setModal1,u="evaluacion",h=(0,t.useState)([]),p=(0,r.Z)(h,2),m=p[0],f=p[1],j=(0,t.useState)(""),w=(0,r.Z)(j,2),y=w[0],F=w[1],S=(0,t.useContext)(l.s),z=S.getDataById,N=S.deleteData,M=(S.setData1,S.setDataToEdit),k=S.setModal3,T=S.modal3,L=(0,t.useState)([]),D=(0,r.Z)(L,2),R=D[0],E=D[1],P=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(u,a.dni);case 2:n=e.sent,E(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(a){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(u,a.evaluacion_id);case 2:(i=e.sent)&&((0,x.q)(i.status,i.msg),O(),n());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){var e=null===R||void 0===R?void 0:R.filter((function(e){var a,n;return null===e||void 0===e||null===(a=e.fecha_evaluacion)||void 0===a||null===(n=a.split("T")[0])||void 0===n?void 0:n.toLowerCase().includes(y.toLowerCase())})).flat();f(e)}),[y,R]),(0,t.useEffect)((function(){P()}),[]);var O=function(){d(!1),n()},A=(0,C.a8)((function(e){M(e),k(!0)}),I);return(0,b.jsxs)(v.Z,{className:"modal-historial-evaluacion",title:"Historial de evaluaciones",open:c,width:950,closeModal:O,children:[(0,b.jsx)("section",{className:"evaluacion-buscador",children:(0,b.jsx)(Z.Z,{abrirModal:k,registrar:!0,data:s,setFilterText:F})}),(0,b.jsx)(_.Z,{columns:A,table:m}),T&&(0,b.jsx)(g,{actualizarTabla:P,selected:a,actualizarTrabajador:n})]})})},45180:function(e,a,n){var o=n(1413),i=n(4942),r=n(74165),t=n(15861),l=n(29439),s=n(72791),c=n(38411),d=n(16026),u=n(69967),v=n(8034),h=n(17615),p=n(87309),m=n(63998),f=n(99763),x=n(78820),j=(n(77457),n(80184));a.Z=function(e){var a=e.actualizarTabla,n=(e.data,e.modal),b=e.setModal,g=h.Z.useForm(),_=(0,l.Z)(g,1)[0],C=(0,s.useContext)(c.s),Z=C.getData,w=C.setData3,y=C.dataToEdit,F=C.setDataToEdit,S=C.cargando,z=C.setCargando,N=C.data3,M=(0,s.useState)(d.Oj),k=(0,l.Z)(M,2),T=k[0],L=k[1],D=(0,s.useState)(null),R=(0,l.Z)(D,2),E=R[0],P=R[1],I=(0,s.useState)(""),O=(0,l.Z)(I,2),A=O[0],Y=O[1],q=(0,s.useState)(),H=(0,l.Z)(q,2),B=H[0],V=H[1],G=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){var a,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z("asociacion");case 2:return a=e.sent,e.next=5,Z("trabajador/last/id");case 5:n=e.sent,w(a.data),V(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){G()}),[]),(0,s.useEffect)((function(){if(null===y&&(0===(null===B||void 0===B?void 0:B.length)&&Y("CCMRL00001"),(null===B||void 0===B?void 0:B.length)>0)){var e,a=(null===B||void 0===B||null===(e=B.at(-1))||void 0===e?void 0:e.codigo_trabajador)||"CCMRL00000",n=a&&null!==a&&void 0!==a&&a.includes("CCMRL0000")?a.split("CCMRL0000")[1]:a.includes("CCMRL000")?a.split("CCMRL000")[1]:a.includes("CCMRL00")?a.split("CCMRL00")[1]:a.includes("CCMRL0")?a.split("CCMRL0")[1]:a.includes("CCMRL")?a.split("CCMRL")[1]:"",o=parseInt(n)+1<10?"CCMRL0000"+(parseInt(n)+1):parseInt(n)+1>9&&parseInt(n)+1<100?"CCMRL000"+(parseInt(n)+1):parseInt(n)+1>99&&parseInt(n)+1<1e3?"CCMRL00"+(parseInt(n)+1):parseInt(n)+1>999&&parseInt(n)+1<1e4?"CCMRL0"+(parseInt(n)+1):"CCMRL"+(parseInt(n)+1);Y(o)}}),[B,y]),(0,s.useEffect)((function(){y?(L(y),_.setFieldsValue(y)):L(d.Oj)}),[y,_]);var U=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n){var o,i,t,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=new FormData).set("dni",T.dni||""),o.set("codigo_trabajador",T.codigo_trabajador||A||""),o.set("fecha_nacimiento",T.fecha_nacimiento||""),o.set("telefono",T.telefono||""),o.set("apellido_paterno",T.apellido_paterno||""),o.set("apellido_materno",T.apellido_materno||""),o.set("nombre",T.nombre||""),o.set("email",T.email||""),o.set("estado_civil",T.estado_civil||""),o.set("genero",T.genero||""),o.set("direccion",T.direccion||""),o.set("asociacion_id",T.asociacion_id||""),o.set("foto",T.foto||""),(null===E||void 0===E?void 0:E.file)&&o.set("image",E.file||""),null!==y){e.next=24;break}return z(!0),e.next=19,fetch("".concat("http://13.58.131.42:3000/api/v1","/trabajador"),{method:"POST",body:o});case 19:return i=e.sent,e.next=22,i.json();case 22:(t=e.sent)&&((0,f.q)(t.status,t.msg),a(),W(),z(!1));case 24:if(null===y){e.next=33;break}return z(!0),e.next=28,fetch("".concat("http://13.58.131.42:3000/api/v1","/trabajador/").concat(y.dni),{method:"PUT",body:o});case 28:return l=e.sent,e.next=31,l.json();case 31:(s=e.sent)&&((0,f.q)(s.status,s.msg),a(),W(),z(!1));case 33:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),W=function(){b(!1),F(null),L(d.Oj),z(!1)},J=(0,m.nb)(T,(function(e,a){if(!a&&e.target){var n=e.target,r=n.name,t=n.value;_.setFieldsValue((0,i.Z)({},r,t)),L((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,i.Z)({},r,t))}))}else _.setFieldsValue((0,i.Z)({},a,e)),L((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,i.Z)({},a,e))}))}),A,N);return(0,j.jsx)(u.Z,{className:"modal-trabajador",title:y?"Editar trabajador":"Registrar trabajador",open:n,width:800,closeModal:W,children:(0,j.jsxs)(h.Z,{form:_,className:"modal-body",onFinish:U,layout:"horizontal",children:[(0,j.jsxs)("section",{children:[(0,j.jsx)("div",{className:"data",children:J.map((function(e,a){return(0,j.jsx)(h.Z.Item,{name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:(0,j.jsxs)(j.Fragment,{children:[e.label,e.type]})},a)}))}),(0,j.jsx)("div",{className:"avatar",children:(0,j.jsx)(v.Z,{avatar:E,setAvatar:P,selected:y})})]}),(0,j.jsx)("div",{className:"buttton-container",children:(0,j.jsx)(p.ZP,{htmlType:"submit",icon:(0,j.jsx)(x.lFz,{}),loading:!!S,children:y?"Editar":"Registrar"})})]})})}},4808:function(e,a,n){var o=n(29439),i=n(72791),r=n(43513),t=n(34664),l=(n(51279),n(76487),n(80184));a.Z=function(e){var a=e.columns,n=e.table,s=e.filas,c=i.useState(!0),d=(0,o.Z)(c,2),u=(d[0],d[1]),v=i.useState([]),h=(0,o.Z)(v,2),p=(h[0],h[1]);i.useEffect((function(){var e=setTimeout((function(){p(n),u(!1)}),2e3);return function(){return clearTimeout(e)}}),[]);var m=s?[s,2*s,3*s,4*s,5*s]:[10,20,30,40,50];return(0,l.jsx)("div",{className:"table-container",children:(0,l.jsx)(r.ZP,{columns:a,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos",preserveSelectedOnPageChange:!0},paginationPerPage:s||10,paginationRowsPerPageOptions:m,noDataComponent:(0,l.jsx)(t.Z,{image:t.Z.PRESENTED_IMAGE_SIMPLE,description:(0,l.jsx)("span",{children:"No hay registros para mostrar."})})})})}},16026:function(e,a,n){n.d(a,{Bq:function(){return p},FH:function(){return i},FN:function(){return o},JL:function(){return r},LR:function(){return c},Md:function(){return u},Oj:function(){return t},TT:function(){return f},Tc:function(){return x},XK:function(){return j},bf:function(){return C},cB:function(){return g},d_:function(){return d},eJ:function(){return s},eT:function(){return b},g5:function(){return l},kb:function(){return h},n4:function(){return _},s:function(){return v},v2:function(){return m}});var o={nombre:"",usuario:"",contrasenia:"",estado:""},i={nombre:""},r={nombre:"",direccion:""},t=function(){return{dni:"",codigo_trabajador:"",fecha_nacimiento:"",telefono:"",nombre:"",apellido_paterno:"",apellido_materno:"",email:"",estado_civil:"",genero:"",direccion:"",asociacion_id:null,eliminar:!1}},l=function(e){return{fecha_evaluacion:"",capacitacion_sso:"",capacitacion_gema:"",evaluacion_laboral:"",presion_arterial:"",temperatura:"",saturacion:"",imc:"",pulso:"",diabetes:"",antecedentes:"",emo:"",trabajador_id:e.dni,aprobado:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",fiscalizador:"",fiscalizador_aprobado:"no",control:"no",topico:"no",seguridad:"no",medio_ambiente:"no",recursos_humanos:"no",topico_observacion:"",control_observacion:"",seguridad_observacion:"",medio_ambiente_observacion:"",recursos_humanos_observacion:"",finalizado:!1,gerencia_id:"",area_id:"",puesto_id:"",campamento_id:""}},s=function(e,a){var n;return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia_id:"",area_id:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",asociacion_id:e&&(null===e||void 0===e?void 0:e.id),estado:!1,evaluacion_id:a,trabajadores:null===e||void 0===e||null===(n=e.trabajador)||void 0===n?void 0:n.map((function(e){return e.dni})),tareo:""}},c=function(e){return{fecha_inicio:"",codigo_contrato:"",tipo_contrato:"",recomendado_por:"",cooperativa:"",condicion_cooperativa:"",periodo_trabajo:"",fecha_fin:"",gerencia:"",area:"",jefe_directo:"",base:"",termino_contrato:"",campamento_id:"",nota_contrato:"",puesto:"",estado:!1,empresa_id:e}},d=function(e){return{sucursal_id:e,fecha:"",movimiento:"",forma_pago:"",encargado:"",area:"",cantidad:"",medida:"",descripcion:"",monto:"",proveedor:"",comprobante:"",dni:"",sucursal_transferencia:"",precio:""}},u={nombre:""},v={nombre:"",codigo:"",descripcion:"",saldo_inicial:""},h={nombre:"",codigo:"",descripcion:""},p=function(e,a){return{codigo:parseInt(a)+1,nombre:"",codigo_interno:"",codigo_barras:"",descripcion:"",categoria_id:"",unidad_id:"",precio:"",fecha:"",observacion:"",almacen_id:"",stock:"0",costo_total:""}},m=function(e){return{codigo:"",motivo:"",fecha:"",encargado:"",codigo_compra:"",boleta:"",codigo_requerimiento:"",producto_id:"",categoria:"",cantidad:"",unidad:"",tipo:e,producto:"",almacen_id:"",codigo_pedido:"",costo:"",dni:"",costo_total:"",area_id:"",personal:"",retornable:""}},f=function(e,a){return{codigo:"",fecha_pedido:"",fecha_entrega:"",solicitante:"",area:"",celular:"",proyecto:"",producto_id:"",cantidad:"",unidad:"",estado:"",producto:"",personal:"",dni:""}},x=function(){return{id:"",nombre:"",contrato_id:"",observacion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajador_dni:""}},j=function(){return{id:"",observacion:"",fecha_pago:new Date,teletrans:"",tipo:"incentivo",trabajadores:[]}},b=function(){return{id:"",razon_social:"",contrato_id:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"casa"}},g=function(){return{id:"",nombre:"",trabajador_dni:"",observacion:"",fecha_pago:new Date,hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:"",tipo:"extraordinario"}},_=function(){return{id:"",hora:new Date,placa:"",propietario:"",trapiche:"",volquetes:"",teletrans:""}},C=function(){return{id:"",observacion:"",fecha_pago:new Date,teletrans:"",volquetes:"",tipo:"asociacion",contrato_id:"",asociacion:[]}}},86281:function(e,a,n){n.d(a,{E:function(){return r}});var o=n(97892),i=n.n(o),r=(n(72426),function(e,a,n){var o=[0],r=0,t=i()(e);if("Mes cerrado"===n){var l=t.clone().add(a,"month").subtract(1,"day");t=l.clone()}var s=t.clone().add(15*a-1,"days");if("Lunes a sabado"===n)for(;r<14*a;)t=t.add(1,"day"),o.includes(t.weekday())||r++,(15===r&&a>1||1===a&&r===14*a)&&(s=t.clone().subtract(1,"day"),t=s.clone().add(1,"day"),r=0,a--);return 0===t.day()&&(t=t.add(1,"day")),t.isValid()?t.format("YYYY-MM-DD"):null})},35790:function(e,a,n){n.d(a,{Z:function(){return r}});var o={locale:"es_ES",today:"Hoy",now:"Ahora",backToToday:"Volver a hoy",ok:"Aceptar",clear:"Limpiar",month:"Mes",year:"A\xf1o",timeSelect:"Seleccionar hora",dateSelect:"Seleccionar fecha",monthSelect:"Elegir un mes",yearSelect:"Elegir un a\xf1o",decadeSelect:"Elegir una d\xe9cada",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mes anterior (PageUp)",nextMonth:"Mes siguiente (PageDown)",previousYear:"A\xf1o anterior (Control + left)",nextYear:"A\xf1o siguiente (Control + right)",previousDecade:"D\xe9cada anterior",nextDecade:"D\xe9cada siguiente",previousCentury:"Siglo anterior",nextCentury:"Siglo siguiente"},i={placeholder:"Seleccionar hora"},r={lang:Object.assign({placeholder:"Seleccionar fecha",rangePlaceholder:["Fecha inicial","Fecha final"]},o),timePickerLocale:Object.assign({},i)}},36752:function(){},97434:function(){},81837:function(){},138:function(){},77457:function(){}}]);
//# sourceMappingURL=2287.e720ccad.chunk.js.map