/*! For license information please see 513.365ec1d7.chunk.js.LICENSE.txt */
(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[513],{91906:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var a=t(1413),r=t(93433),i=t(4942),o=t(74165),s=t(15861),c=t(72791),u=t(71368),l=t(300),d=t(87309),f=t(99763),v=t(2541),m=(t(4333),t(80184)),h=l.Z.Search,p=function(e){var n=e.abrirModal,t=e.registrar,l=(e.crear,e.exportar),p=e.cargar,_=e.actualizar,x=e.buscador,b=e.data1,g=e.validacion,j=e.modal,y=e.setFilterText,Z=e.fecha,w=(0,c.useContext)(u.c).setControlAsistencia,M=(0,c.useRef)(null),Y=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,a,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("myFile",n.target.files[0]),t.append("fecha",Z),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:t});case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent)&&((0,f.q)(r.status,r.msg),_(),w(!1),M.current.value=null);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,m.jsx)("input",{type:"file",ref:M,onChange:Y,style:{display:"none"}}),x?(0,m.jsx)(h,{placeholder:"Ingresa una nombre...",onChange:function(e){return y(e.target.value)},style:{width:300}}):(0,m.jsxs)("div",{style:{width:"100%"},children:[!1!==t?(0,m.jsx)(d.ZP,{onClick:function(){n(!0)},children:"Registrar"}):"",!1!==l&&null!==b&&void 0!==b&&b.firma_gerente&&null!==b&&void 0!==b&&b.firma_jefe&&null!==b&&void 0!==b&&b.foto?(0,m.jsx)(d.ZP,{onClick:function(e){var n,t,o=null===(n=b.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var n;return(0,i.Z)({},null===e||void 0===e||null===(n=e.asistencium)||void 0===n?void 0:n.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),s=Object.assign.apply(Object,[{}].concat((0,r.Z)(o))),c=null===b||void 0===b||null===(t=b.trabajador_asistencia)||void 0===t?void 0:t.slice(0,1).map((function(e,n){var t,r;return(0,a.Z)({Nro:n+1,Nombre:null===b||void 0===b?void 0:b.nombre,Dni:null===b||void 0===b?void 0:b.dni,Celular:null===b||void 0===b?void 0:b.telefono,Cargo:null===b||void 0===b||null===(t=b.contratos)||void 0===t?void 0:t.puesto,"\xc1rea":null===b||void 0===b||null===(r=b.contratos)||void 0===r?void 0:r.area},s)}));(0,v.H)(c,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==g?(0,m.jsx)(d.ZP,{onClick:function(){j(!0)},children:"Validaci\xf3n "}):"",!1!==p?(0,m.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsx)(h,{placeholder:"Ingresa una nombre...",onChange:function(e){return y(e.target.value)},style:{width:300}}),(0,m.jsx)(d.ZP,{style:{width:"100px"},onClick:function(){M.current.click()},children:"Cargar"})]}):""]})]})}},25513:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var a=t(74165),r=t(15861),i=t(29439),o=t(72791),s=t(83188),c=t(38411),u=t(4808),l=t(91906),d=t(71368),f=t(79260),v=t(69967),m=(t(76487),t(99763)),h=t(80184),p=function(e){var n=e.data,t=e.actualizarTabla,s=e.fechas,p=(0,o.useContext)(d.c),_=(p.setControlAsistencia,p.fechaId,(0,o.useState)(null)),x=(0,i.Z)(_,2),b=(x[0],x[1]),g=(0,o.useState)(""),j=(0,i.Z)(g,2),y=j[0],Z=j[1],w=(0,o.useState)([]),M=(0,i.Z)(w,2),Y=M[0],D=M[1],C=(0,o.useContext)(c.s),k=C.getData,L=C.data2,P=C.setData2,T=C.createData,S=C.updateData,F=C.modal,H=C.dataToEdit,E=(C.setDataToEdit,C.setModal),N=(C.cargando,C.setCargando,(0,o.useState)("")),R=(0,i.Z)(N,2),z=R[0],A=R[1];(0,o.useEffect)((function(){!function(){var e,t=s&&(null===s||void 0===s?void 0:s.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)==n}))),a=t&&(null===t||void 0===t||null===(e=t.at(-1))||void 0===e?void 0:e.id);a&&A(a)}()}),[n,s]);var I=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="asistencia/trabajador/".concat(z),e.next=3,k(n);case 3:t=e.sent,P(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){z&&I()}),[z]);var O=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/trabajador",i={asistencia_id:z,trabajador_id:r.dni,asistencia:n.target.value},e.next=4,T(i,"asistencia/trabajador");case 4:(o=e.sent)&&((0,m.q)(o.status,o.msg),t(),I());case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/hora_ingreso",i={hora_ingreso:r.target.value},e.next=4,S(i,n.id,"asistencia/hora_ingreso");case 4:200===e.sent.status&&t();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){b(n)}),[n]),(0,o.useEffect)((function(){var e=null===L||void 0===L?void 0:L.filter((function(e){var n,t,a,r;return(null===(n="".concat(null===e||void 0===e?void 0:e.nombre).concat(null===e||void 0===e?void 0:e.apellido_paterno).concat(null===e||void 0===e?void 0:e.apellido_materno))||void 0===n||null===(t=n.toLowerCase())||void 0===t?void 0:t.includes(y.toLowerCase()))||(null===e||void 0===e||null===(a=e.dni)||void 0===a||null===(r=a.toLowerCase())||void 0===r?void 0:r.includes(y.toLowerCase()))}));D(e)}),[y,L]);var V=(0,f.eF)(O);return(0,h.jsxs)(v.Z,{className:"modal-asistencia",title:H?"Editar asistencia":"Registrar asistencia",open:F,width:800,closeModal:function(){E(!1),P([])},children:[(0,h.jsx)("div",{className:"hora-ingreso",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"",children:"Hora de ingreso: "}),(0,h.jsx)("input",{type:"time",name:"hora_ingreso",defaultValue:(null===n||void 0===n?void 0:n.hora_ingreso)||"07:00",onChange:q})]})}),(0,h.jsx)("div",{className:"buscador-container",children:(0,h.jsx)(l.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!0,validacion:!1,buscador:!1,setFilterText:Z,actualizar:I,fecha:n})}),(0,h.jsx)("br",{}),(0,h.jsx)(u.Z,{columns:V,table:Y})]})},_=t(95579),x=t(91082),b=t(19006),g=t(39126),j=(t(55795),t(35790)),y=t(97892),Z=t.n(y),w=function(){var e=(0,o.useContext)(c.s),n=e.getData,t=e.setData,u=e.data,l=e.deleteData,d=e.modal,f=e.setModal,v=e.createData,y=(0,o.useState)(""),w=(0,i.Z)(y,2),M=w[0],Y=w[1],D=((0,_.Z)(u).result,function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",e.next=3,n("asistencia");case 3:r=e.sent,t(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,o.useEffect)((function(){D()}),[]);var C=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n,t){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),r=null===u||void 0===u?void 0:u.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)===Z()(t).format("YYYY-MM-DD")})).map((function(e){return e.id})).toString(),"asistencia",e.next=5,l("asistencia",r);case 5:(i=e.sent)&&((0,m.q)(i.status,i.msg),D());case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",t={fecha:Z()(n).format("YYYY-MM-DD"),hora_ingreso:"07:30"},e.next=4,v(t,"asistencia");case 4:e.sent&&D();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"lista-asistencia",children:[(0,h.jsx)(s.Z,{text:"Asistencia",user:"Usuario",ruta:"/planilla"}),(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"50px"},children:(0,h.jsx)("div",{style:{width:"80%",height:"70%",border:"1px solid lightgrey",borderRadius:"6px",padding:"10px"},children:(0,h.jsx)(b.Z,{fullscreen:!0,onChange:function(e){var n=Z()(e).format("YYYY-MM-DD");k(e,n)},mode:"month",locale:j.Z,dateCellRender:function(e){var n=Z()(e).format("YYYY-MM-DD");return(null===u||void 0===u?void 0:u.filter((function(e){return e.fecha===n}))).length>0?(0,h.jsxs)("div",{className:"calendar-data",children:[(0,h.jsx)("label",{htmlFor:"",children:"Asistencia creada"}),(0,h.jsxs)("div",{children:[(0,h.jsx)(g.jox,{onClick:function(n){return function(e,n){e.stopPropagation(),Y(Z()(n).format("YYYY-MM-DD")),f(!0)}(n,e)},style:{cursor:"pointer"}}),(0,h.jsx)(x.Z,{title:"Eliminar asistencia",description:"\xbfEstas seguro de eliminar?",onConfirm:function(n){return C(n,e)},okText:"Si",cancelText:"No",placement:"topRight",children:(0,h.jsx)(g.yvY,{style:{cursor:"pointer"},className:"eliminar"})})]})]}):""}})})}),d&&(0,h.jsx)(p,{data:M,actualizarTabla:D,fechas:u})]})}},2541:function(e,n,t){"use strict";t.d(n,{H:function(){return o},S:function(){return i}});var a=t(93433),r=t(34045),i=function(e,n,t){var a=r.P6.book_new(),i=r.P6.json_to_sheet(e);r.P6.book_append_sheet(a,i,n),(0,r.Fv)(a,"".concat(t,".xlsx"))},o=function(e,n,t){var i=r.P6.book_new(),o=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],s=[o,Object.keys(e[0])],c=[].concat(s,(0,a.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,n,t){return e[o[t]]=n,e}),{})})),u=r.P6.json_to_sheet(c);u["!cols"]=o.map((function(){return{width:20,height:40,textAlign:"center"}})),u["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],u.A1.s={font:{bold:!0}},u.B1.s={font:{bold:!0}},u.C1.s={font:{bold:!0}},u.D1.s={font:{bold:!0}},u.E1.s={font:{bold:!0}},u.F1.s={font:{bold:!0}},r.P6.book_append_sheet(i,u,n),(0,r.Fv)(i,"".concat(t,".xlsx"))}},55795:function(e,n,t){!function(e){"use strict";var n="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),t="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?t[e.month()]:n[e.month()]:n},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:4},invalidDate:"Fecha inv\xe1lida"})}(t(72426))}}]);
//# sourceMappingURL=513.365ec1d7.chunk.js.map