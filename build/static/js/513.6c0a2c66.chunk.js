/*! For license information please see 513.6c0a2c66.chunk.js.LICENSE.txt */
(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[513],{91743:function(e,a,n){"use strict";n.d(a,{Z:function(){return x}});var t=n(1413),r=n(93433),i=n(4942),s=n(74165),o=n(15861),c=n(29439),u=n(72791),l=n(38411),d=n(71368),f=n(300),m=n(87309),v=n(99763),h=(n(37530),n(4333),n(80184)),p=n(2541),_=f.Z.Search,x=function(e){var a=e.abrirModal,n=e.registrar,f=(e.crear,e.exportar),x=e.cargar,b=e.actualizarTabla,g=(e.actualizarAsistencia,e.actualizar,e.buscador),j=(e.cargando,e.setCargando,e.data1),y=(e.data2,e.validacion),Z=e.modal,M=(e.data,(0,u.useContext)(l.s)),Y=(M.createData,M.setFilterText),D=(0,u.useContext)(d.c).setControlAsistencia,w=(0,u.useState)(!1),k=(0,c.Z)(w,2),C=(k[0],k[1],(0,u.useState)(null)),L=(0,c.Z)(C,2),P=(L[0],L[1],(0,u.useRef)(null)),T=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var n,t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("myFile",a.target.files[0]),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:n});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent)&&((0,v.q)(r.status,r.msg),b(),D(!1),P.current.value=null),P.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return console.log("===================================="),console.log(j),console.log("===================================="),(0,h.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)("input",{type:"file",ref:P,onChange:T,style:{display:"none"}}),g?(0,h.jsx)(_,{placeholder:"Ingresa una nombre...",onChange:function(e){return Y(e.target.value)},style:{width:300}}):(0,h.jsxs)("div",{children:[!1!==n?(0,h.jsx)(m.ZP,{onClick:function(){a(!0)},children:"Registrar"}):"",!1!==f&&null!==j&&void 0!==j&&j.firma_gerente&&null!==j&&void 0!==j&&j.firma_jefe&&null!==j&&void 0!==j&&j.foto?(0,h.jsx)(m.ZP,{onClick:function(e){var a,n,s=null===(a=j.trabajador_asistencia)||void 0===a?void 0:a.map((function(e){var a;return(0,i.Z)({},null===e||void 0===e||null===(a=e.asistencium)||void 0===a?void 0:a.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),o=Object.assign.apply(Object,[{}].concat((0,r.Z)(s))),c=null===j||void 0===j||null===(n=j.trabajador_asistencia)||void 0===n?void 0:n.slice(0,1).map((function(e,a){var n,r;return(0,t.Z)({Nro:a+1,Nombre:null===j||void 0===j?void 0:j.nombre,Dni:null===j||void 0===j?void 0:j.dni,Celular:null===j||void 0===j?void 0:j.telefono,Cargo:null===j||void 0===j||null===(n=j.contratos)||void 0===n?void 0:n.puesto,"\xc1rea":null===j||void 0===j||null===(r=j.contratos)||void 0===r?void 0:r.area},o)}));(0,p.H)(c,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==y?(0,h.jsx)(m.ZP,{onClick:function(){Z(!0)},children:"Validaci\xf3n "}):"",!1!==x?(0,h.jsx)(m.ZP,{style:{width:"100px"},onClick:function(){P.current.click()},children:"Cargar"}):""]})]})}},25513:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Z}});var t=n(74165),r=n(15861),i=n(29439),s=n(72791),o=n(83188),c=n(38411),u=n(4808),l=n(91743),d=n(71368),f=n(79260),m=n(69967),v=(n(76487),n(99763)),h=n(80184),p=function(e){var a=e.data,n=e.actualizarTabla,o=e.fechas,p=(0,s.useContext)(d.c),_=(p.setControlAsistencia,p.fechaId,(0,s.useState)(null)),x=(0,i.Z)(_,2),b=(x[0],x[1]),g=(0,s.useContext)(c.s),j=g.getData,y=g.data2,Z=g.setData2,M=g.createData,Y=g.updateData,D=g.modal,w=g.dataToEdit,k=(g.setDataToEdit,g.setModal),C=(g.cargando,g.setCargando,(0,s.useState)("")),L=(0,i.Z)(C,2),P=L[0],T=L[1];(0,s.useEffect)((function(){!function(){var e,n=o&&(null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)==a}))),t=n&&(null===n||void 0===n||null===(e=n.at(-1))||void 0===e?void 0:e.id);t&&T(t)}()}),[a,o]);var S=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var a,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="asistencia/trabajador/".concat(P),e.next=3,j(a);case 3:n=e.sent,Z(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){P&&S()}),[P]);var F=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(a,r){var i,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/trabajador",i={asistencia_id:P,trabajador_id:r.dni,asistencia:a.target.value},e.next=4,M(i,"asistencia/trabajador");case 4:(s=e.sent)&&((0,v.q)(s.status,s.msg),n(),S());case 6:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),H=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(r){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia/hora_ingreso",i={hora_ingreso:r.target.value},e.next=4,Y(i,a.id,"asistencia/hora_ingreso");case 4:200===e.sent.status&&n();case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){b(a)}),[a]);var E=(0,f.eF)(F);return(0,h.jsxs)(m.Z,{className:"modal-asistencia",title:w?"Editar asistencia":"Registrar asistencia",open:D,width:800,closeModal:function(){k(!1),Z([])},children:[(0,h.jsxs)("div",{className:"hora-ingreso",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"",children:"Hora de ingreso: "}),(0,h.jsx)("input",{type:"time",name:"hora_ingreso",defaultValue:(null===a||void 0===a?void 0:a.hora_ingreso)||"07:00",onChange:H})]}),(0,h.jsx)("br",{}),(0,h.jsx)(l.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!0,validacion:!1,buscador:!1})]}),(0,h.jsx)("br",{}),(0,h.jsx)(u.Z,{columns:E,table:y})]})},_=n(95579),x=n(19006),b=n(39126),g=(n(55795),n(35790)),j=n(97892),y=n.n(j),Z=function(){var e=(0,s.useContext)(c.s),a=e.getData,n=e.setData,u=e.data,l=e.deleteData,d=e.modal,f=e.setModal,m=e.createData,j=(0,s.useState)(""),Z=(0,i.Z)(j,2),M=Z[0],Y=Z[1],D=((0,_.Z)(u).result,function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",e.next=3,a("asistencia");case 3:r=e.sent,n(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,s.useEffect)((function(){D()}),[]);var w=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(a,n){var r,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),r=null===u||void 0===u?void 0:u.filter((function(e){return(null===e||void 0===e?void 0:e.fecha)===y()(n).format("YYYY-MM-DD")})).map((function(e){return e.id})).toString(),"asistencia",e.next=5,l("asistencia",r);case 5:(i=e.sent)&&((0,v.q)(i.status,i.msg),D());case 7:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(a){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"asistencia",n={fecha:y()(a).format("YYYY-MM-DD"),hora_ingreso:"07:30"},e.next=4,m(n,"asistencia");case 4:e.sent&&D();case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"lista-asistencia",children:[(0,h.jsx)(o.Z,{text:"Asistencia",user:"Usuario",ruta:"/planilla"}),(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"50px"},children:(0,h.jsx)("div",{style:{width:"80%",height:"70%",border:"1px solid lightgrey",borderRadius:"6px",padding:"10px"},children:(0,h.jsx)(x.Z,{fullscreen:!0,onChange:function(e){var a=y()(e).format("YYYY-MM-DD");k(e,a)},mode:"month",locale:g.Z,dateCellRender:function(e){var a=y()(e).format("YYYY-MM-DD");return(null===u||void 0===u?void 0:u.filter((function(e){return e.fecha===a}))).length>0?(0,h.jsxs)("div",{className:"calendar-data",children:[(0,h.jsx)("label",{htmlFor:"",children:"Asistencia creada"}),(0,h.jsxs)("div",{children:[(0,h.jsx)(b.jox,{onClick:function(a){return function(e,a){e.stopPropagation(),Y(y()(a).format("YYYY-MM-DD")),f(!0)}(a,e)}}),(0,h.jsx)(b.yvY,{onClick:function(a){return w(a,e)},className:"eliminar"})]})]}):""}})})}),d&&(0,h.jsx)(p,{data:M,actualizarTabla:D,fechas:u})]})}},2541:function(e,a,n){"use strict";n.d(a,{H:function(){return s},S:function(){return i}});var t=n(93433),r=n(34045),i=function(e,a,n){var t=r.P6.book_new(),i=r.P6.json_to_sheet(e);r.P6.book_append_sheet(t,i,a),(0,r.Fv)(t,"".concat(n,".xlsx"))},s=function(e,a,n){var i=r.P6.book_new(),s=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],o=[s,Object.keys(e[0])],c=[].concat(o,(0,t.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,a,n){return e[s[n]]=a,e}),{})})),u=r.P6.json_to_sheet(c);u["!cols"]=s.map((function(){return{width:20,height:40,textAlign:"center"}})),u["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],u.A1.s={font:{bold:!0}},u.B1.s={font:{bold:!0}},u.C1.s={font:{bold:!0}},u.D1.s={font:{bold:!0}},u.E1.s={font:{bold:!0}},u.F1.s={font:{bold:!0}},r.P6.book_append_sheet(i,u,a),(0,r.Fv)(i,"".concat(n,".xlsx"))}},55795:function(e,a,n){!function(e){"use strict";var a="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),t=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?n[e.month()]:a[e.month()]:a},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:t,longMonthsParse:t,shortMonthsParse:t,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:4},invalidDate:"Fecha inv\xe1lida"})}(n(72426))}}]);
//# sourceMappingURL=513.6c0a2c66.chunk.js.map