"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[34],{91743:function(e,t,n){n.d(t,{Z:function(){return _}});var l=n(1413),i=n(93433),a=n(4942),o=n(74165),r=n(15861),s=n(29439),d=n(72791),c=n(71368),u=n(49389),h=n(87309),v=n(99763),f=n(4333),x=n(37530),m=n(97892),p=n.n(m),b=n(99893),j=n.n(b),g=(n(52563),n(80184));p().extend(j()),p().locale("es");var y=function(e){console.log(e);var t=f.mM.create({page:{display:"flex",alignItems:"center",width:"100%"},tableContainer:{padding:6,width:"100%"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,marginTop:20},tableRow:{display:"flex",alignItems:"center",flexDirection:"row",height:50},tableRow1:{display:"flex",alignItems:"center",flexDirection:"row",height:30},tableRow2:{display:"flex",alignItems:"center",flexDirection:"row",height:60},tableColHeader1:{flex:1.5,borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:50,justifyContent:"center",alignItems:"center"},tableColHeader2:{flex:1.5,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:50,textAlign:"center"},tableColHeader3:{flex:1.8,backgroundColor:"#c5e0b3",height:50},tableCell:{margin:"auto",marginTop:5,fontSize:10},tableCell1:{marginTop:"25px",fontSize:10,transform:"rotate(-90deg)"},text1:{fontSize:8,backgroundColor:"#c5e0b3",textAlign:"center",padding:2,width:"40%"},text2:{fontSize:8,textAlign:"center",padding:2,width:"60%"},tableCol1:{flex:.2,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol2:{flex:.8,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol3:{flex:.4,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol4:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol5:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol1Data:{flex:.2,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol2Data:{flex:.8,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol3Data:{flex:.4,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol4Data:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",transform:"rotate(-90deg)"},tableCol5Data:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},firma:{position:"absolute",bottom:220,left:5},firma2:{position:"absolute",bottom:220,left:15},firmaDiv:{display:"flex",flexDirection:"column"},firmaImg:{height:"60px",width:"160px",marginLeft:40,marginTop:20},firmaText:{fontSize:13,textAlign:"center",padding:2,width:"40%"},img:{height:30,width:30,position:"absolute",left:5,borderRadius:"50%"}}),n=/^\d{4}-\d{2}-\d{2}$/;return(0,g.jsx)(f.BB,{children:(0,g.jsxs)(f.T3,{orientation:"landscape",size:"A4",style:t.page,children:[(0,g.jsx)(f.G7,{style:t.tableContainer,children:(0,g.jsxs)(f.G7,{style:t.table,children:[(0,g.jsxs)(f.G7,{style:t.tableRow,children:[(0,g.jsx)(f.G7,{style:t.tableColHeader1,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",width:"100%",textAlign:"center",verticalAlign:"middle",paddingTop:"12px",fontSize:"15px"}],children:"Hoja de Tareo"})}),(0,g.jsx)(f.G7,{style:t.tableColHeader2,children:(0,g.jsx)(f.Ee,{src:x,style:[t.img,{height:"40px",width:"40px",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"100px"}]})}),(0,g.jsxs)(f.G7,{style:t.tableColHeader3,children:[(0,g.jsx)(f.G7,{style:[t.tableColHeader3,{backgroundColor:"#8EAADB"}],children:(0,g.jsx)(f.G7,{style:t.tableRow,children:null===e||void 0===e?void 0:e.map((function(e,l){return Object.keys(e).filter((function(e){return n.test(e)})).map((function(e){return(0,g.jsx)(f.G7,{style:t.tableCol5,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:p()(e).date()})})}))}))})}),(0,g.jsx)(f.G7,{style:[t.tableColHeader3,{backgroundColor:"white"}],children:(0,g.jsx)(f.G7,{style:t.tableRow,children:null===e||void 0===e?void 0:e.map((function(e,l){return Object.keys(e).filter((function(e){return n.test(e)})).map((function(e){return(0,g.jsx)(f.G7,{style:t.tableCol4,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:p()(e).format("ddd")})})}))}))})})]})]}),(0,g.jsxs)(f.G7,{style:[t.tableRow1,{height:"70px"}],children:[(0,g.jsx)(f.G7,{style:t.tableCol1,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"N\xba"})}),(0,g.jsx)(f.G7,{style:t.tableCol2,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Apellidos y nombres"})}),(0,g.jsx)(f.G7,{style:t.tableCol3,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Dni"})}),(0,g.jsx)(f.G7,{style:t.tableCol3,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Celular"})}),(0,g.jsx)(f.G7,{style:t.tableCol3,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Cargo"})}),(0,g.jsx)(f.G7,{style:t.tableCol3,children:(0,g.jsx)(f.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"\xc1rea"})}),null===e||void 0===e?void 0:e.map((function(e,l){return Object.keys(e).filter((function(e){return n.test(e)})).map((function(e){return(0,g.jsx)(f.G7,{style:t.tableCol4,children:(0,g.jsx)(f.xv,{style:t.tableCell1,children:p()(e).format("DD-MM-YYYY")})})}))}))]}),null===e||void 0===e?void 0:e.map((function(e,l){return(0,g.jsxs)(f.G7,{style:t.tableRow1,children:[(0,g.jsx)(f.G7,{style:t.tableCol1Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Nro})}),(0,g.jsx)(f.G7,{style:t.tableCol2Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Nombre})}),(0,g.jsx)(f.G7,{style:t.tableCol3Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Dni})}),(0,g.jsx)(f.G7,{style:t.tableCol3Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Celular})}),(0,g.jsx)(f.G7,{style:t.tableCol3Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Cargo})}),(0,g.jsx)(f.G7,{style:t.tableCol3Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Area})}),Object.values(e).filter((function(t,l){var i=Object.keys(e)[l];return n.test(i)})).map((function(e){return(0,g.jsx)(f.G7,{style:t.tableCol5Data,children:(0,g.jsx)(f.xv,{style:t.tableCell,children:e})})}))]})}))]})}),e.map((function(e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.G7,{style:t.firma,children:(0,g.jsxs)(f.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.firma_jefe)&&(0,g.jsx)(f.Ee,{src:null===e||void 0===e?void 0:e.firma_jefe,style:t.firmaImg}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"_____________________"}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"Gerente de Op. Mina"})]})}),(0,g.jsx)(f.G7,{style:[t.firma2,{marginLeft:"200px"}],children:(0,g.jsxs)(f.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.firma_gerente)&&(0,g.jsx)(f.Ee,{src:null===e||void 0===e?void 0:e.firma_gerente,style:t.firmaImg}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"_____________________"}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"Jefe de operaciones"})]})}),(0,g.jsx)(f.G7,{style:[t.firma2,{marginLeft:"400px"}],children:(0,g.jsxs)(f.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.foto)&&(0,g.jsx)(f.Ee,{src:null===e||void 0===e?void 0:e.foto,style:t.firmaImg}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"_____________________"}),(0,g.jsx)(f.xv,{style:t.firmaText,children:"Huella trabajador"})]})})]})}))]})})},C=u.Z.Search,_=function(e){var t=e.abrirModal,n=e.registrar,u=(e.crear,e.exportar),x=e.cargar,m=e.actualizar,p=e.buscador,b=e.data1,j=e.validacion,_=e.modal,Z=e.setFilterText,w=e.fecha,T=e.setModal,D=(0,d.useContext)(c.c).setControlAsistencia,S=(0,d.useState)(null),E=(0,s.Z)(S,2),A=(E[0],E[1],(0,d.useRef)(null)),I=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n,l,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("myFile",t.target.files[0]),n.append("fecha",w),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:n});case 5:return l=e.sent,e.next=8,l.json();case 8:(i=e.sent)&&((0,v.q)(i.status,i.msg),m(),D(!1),T(!1),A.current.value=null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n,r,s,d,c,u,h,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=b.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var t;return(0,a.Z)({},null===e||void 0===e||null===(t=e.asistencium)||void 0===t?void 0:t.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),d=Object.assign.apply(Object,[{}].concat((0,i.Z)(s))),!(c=null===b||void 0===b||null===(r=b.trabajador_asistencia)||void 0===r?void 0:r.slice(0,1).map((function(e,t){var n,i;return(0,l.Z)({Nro:t+1,Nombre:null===b||void 0===b?void 0:b.nombre,Dni:null===b||void 0===b?void 0:b.dni,Firma_jefe:null===b||void 0===b?void 0:b.firma_jefe,Firma_gerente:null===b||void 0===b?void 0:b.firma_gerente,Foto:null===b||void 0===b?void 0:b.foto,Celular:null===b||void 0===b?void 0:b.telefono,Cargo:null===b||void 0===b||null===(n=b.contratos)||void 0===n?void 0:n.puesto,"\xc1rea":null===b||void 0===b||null===(i=b.contratos)||void 0===i?void 0:i.area},d)})))){e.next=8;break}return e.next=6,(0,f.eA)(y(c)).toBlob();case 6:(u=e.sent)&&(h=URL.createObjectURL(u),(v=document.createElement("a")).href=h,v.download="nombre-del-archivo.pdf",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(h));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,g.jsx)("input",{type:"file",ref:A,onChange:I,style:{display:"none"}}),p?(0,g.jsx)(C,{placeholder:"Ingresa una nombre...",onChange:function(e){return Z(e.target.value)},style:{width:300}}):(0,g.jsxs)("div",{style:{width:"100%"},children:[!1!==n?(0,g.jsx)(h.ZP,{onClick:function(){t(!0)},children:"Registrar"}):"",!1!==u&&null!==b&&void 0!==b&&b.firma_gerente&&null!==b&&void 0!==b&&b.firma_jefe&&null!==b&&void 0!==b&&b.foto?(0,g.jsx)(h.ZP,{onClick:N,children:"Descargar"}):"",!1!==j?(0,g.jsx)(h.ZP,{onClick:function(){_(!0)},children:"Validaci\xf3n "}):"",!1!==x?(0,g.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)(C,{placeholder:"Ingresa una nombre...",onChange:function(e){return Z(e.target.value)},style:{width:300}}),(0,g.jsx)(h.ZP,{style:{width:"100px"},onClick:function(){A.current.click()},children:"Cargar"})]}):""]})]})}},73034:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var l=n(4942),i=n(1413),a=n(74165),o=n(15861),r=n(29439),s=n(72791),d=n(38411),c=n(71368),u=n(83188),h=n(4808),v=n(91743),f=n(53939),x=n(95579),m=n(69967),p=n(17615),b=n(87309),j=n(99763),g=n(72966),y=n(80184),C=function(e){var t=e.modal,n=e.setModal,l=e.data,i=e.actualizarTabla,d=(0,s.useState)(null),c=(0,r.Z)(d,2),u=c[0],h=c[1],v=function(){n(!1)},f=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,(null===u||void 0===u?void 0:u.file)&&t.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===l||void 0===l?void 0:l.aprobacion_id),{method:"PUT",body:t});case 4:return n=e.sent,e.next=7,n.json();case 7:(o=e.sent)&&((0,j.q)(o.status,o.msg),v(),i());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)(m.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:t,width:400,closeModal:v,children:(0,y.jsxs)(p.Z,{onFinish:f,layout:"horizontal",children:[(0,y.jsx)(p.Z.Item,{children:(0,y.jsx)("div",{className:"drag-container",children:(0,y.jsx)(g.Z,{avatar:u,setAvatar:h,selected:l})})}),(0,y.jsx)("div",{className:"button-container",children:(0,y.jsx)(b.ZP,{htmlType:"submit",children:"Guardar"})})]})})},_=function(e){var t,n=e.data,l=e.modal,i=e.setModal,u=e.actualizarTabla,x=(0,s.useContext)(c.c),p=(x.verificacion,x.setVerificacion,(0,s.useContext)(d.s)),b=(p.getDataById,p.data2,(0,s.useState)()),j=(0,r.Z)(b,2),g=(j[0],j[1],(0,s.useState)([])),_=(0,r.Z)(g,2),Z=_[0],w=(_[1],(0,s.useState)(!1)),T=(0,r.Z)(w,2),D=T[0],S=T[1],E=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){E()}),[]);var A=(0,f.MK)();return(0,y.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo",open:l,width:900,closeModal:function(){i(!1)},children:[(0,y.jsxs)("div",{className:"tareo-container",children:[(0,y.jsxs)("section",{className:"tareo-datos",children:[(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:[(0,y.jsx)("strong",{children:"Nombre: "}),null===n||void 0===n?void 0:n.nombre]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:[(0,y.jsx)("strong",{children:"Dni: "}),null===n||void 0===n?void 0:n.dni]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:[(0,y.jsx)("strong",{children:"Tel\xe9fono: "}),null===n||void 0===n?void 0:n.celular]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:[(0,y.jsx)("strong",{children:"Cargo:"})," ",null===n||void 0===n?void 0:n.cargo]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:[(0,y.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===n||void 0===n?void 0:n.asistencia]})})]}),(0,y.jsx)("section",{className:"tareo-boton",children:(0,y.jsx)(v.Z,{registrar:!1,crear:!1,exportar:!0,validacion:!0,cargar:!1,data1:n,data2:Z,modal:S})})]}),(0,y.jsx)(h.Z,{columns:A,table:null===n||void 0===n||null===(t=n.asistencia_completa)||void 0===t?void 0:t.reverse()}),D&&(0,y.jsx)(C,{modal:D,setModal:S,data:n,actualizarTabla:u})]})},Z=n(93433),w=function(e){var t=e.data,n=e.modal,a=e.setModal,o=(0,s.useContext)(c.c),u=(o.setValidacionPagosAsociacion,o.setFechas),h=(o.fechas,o.verificacion,o.setVerificacion,(0,s.useContext)(d.s)),v=(h.getData,h.data3),f=(h.setData3,h.data2,h.dataToEdit,(0,s.useState)()),x=(0,r.Z)(f,2),p=(x[0],x[1],(0,s.useState)()),b=(0,r.Z)(p,2),j=(b[0],b[1]),g=(0,s.useState)([]),C=(0,r.Z)(g,2),_=C[0],w=C[1];return(0,s.useEffect)((function(){var e=t.trabajadores.map((function(e){var t;return null===(t=e.asistencias)||void 0===t?void 0:t.map((function(e){return(0,l.Z)({},null===e||void 0===e?void 0:e.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")}))})).flat(),n=Object.assign.apply(Object,[{}].concat((0,Z.Z)(e))),a=t.trabajadores.map((function(e){var t;return null===(t=e.asistencias)||void 0===t?void 0:t.map((function(t,l){return(0,i.Z)({Nro:l+1,Nombre:null===e||void 0===e?void 0:e.nombres},n)}))}));a&&w(a),console.log("===================================="),console.log(_),console.log("====================================")}),[t]),(0,s.useEffect)((function(){var e;u(v),j(null===v||void 0===v||null===(e=v.map((function(e){return e.fecha})))||void 0===e?void 0:e.filter((function(e){return void 0!==e})))}),[v]),(0,y.jsxs)(m.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:n,width:900,closeModal:function(){a(!1)},children:[(0,y.jsxs)("section",{style:{paddingLeft:"30px"},children:[(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:["Nombre: ",t&&null!==t&&void 0!==t&&t.nombre?t.nombre:"---"]})}),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"5px"},children:[(0,y.jsx)("div",{children:(0,y.jsxs)("label",{htmlFor:"",children:["Dni: ",t&&null!==t&&void 0!==t&&t.dni?t.dni:"---"]})}),(0,y.jsx)("div",{style:{marginLeft:"50px"},children:(0,y.jsxs)("label",{htmlFor:"",children:["Tel\xe9fono: ",t&&null!==t&&void 0!==t&&t.telefono?t.telefono:"---"]})}),(0,y.jsx)("div",{style:{marginLeft:"50px"},children:(0,y.jsxs)("label",{htmlFor:"",children:["Cargo: ",t&&null!==t&&void 0!==t&&t.cargo?t.cargo:"---"]})})]})]}),(0,y.jsx)("section",{className:"table-container",children:(0,y.jsxs)("table",{children:[(0,y.jsxs)("tr",{style:{},children:[(0,y.jsx)("th",{children:"Nro"}),(0,y.jsx)("th",{children:"Hoja de tareo asistencia de operacion"})]}),null===_||void 0===_?void 0:_.map((function(e,t){var n,l;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:t+1}),(0,y.jsx)("td",{children:e.Nombre}),(null===_||void 0===_?void 0:_.length)>0&&(null===(n=Object.entries(_[0]))||void 0===n||null===(l=n.filter((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1];return/^\d{2}-\d{2}-\d{4}$/.test(n)})))||void 0===l?void 0:l.map((function(e,t){var n=(0,r.Z)(e,2),l=(n[0],n[1]);return(0,y.jsx)("td",{children:l},t)})))]},t+2)}))]})})]})},T=function(e){var t=e.selected,n=(e.actualizarTabla,(0,s.useState)([])),l=(0,r.Z)(n,2),i=(l[0],l[1]),u=(0,s.useState)([]),v=(0,r.Z)(u,2),x=v[0],p=v[1],b=(0,s.useContext)(c.c),j=b.setPlanillaControl,g=b.setPago,C=b.planillaControl,Z=(0,s.useContext)(d.s).getData,T=(0,s.useState)([]),D=(0,r.Z)(T,2),S=D[0],E=D[1],A=(0,s.useState)(!1),I=(0,r.Z)(A,2),N=I[0],G=I[1],W=(0,s.useState)(!1),P=(0,r.Z)(W,2),k=P[0],R=P[1],F=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,l,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||!t.dni){e.next=8;break}return n="planilla/tareo/".concat(t.dni),e.next=4,Z(n);case 4:l=e.sent,E(l.data),e.next=13;break;case 8:return i="planilla/tareo/asociacion/".concat(t.asociacion_id),e.next=11,Z(i);case 11:o=e.sent,E(o.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){F()}),[t]),(0,s.useEffect)((function(){i([t])}),[t]);var O=(0,f.qQ)((function(e){""===t.codigo?(R(!0),p(e)):(G(!0),p(e))}),(function(e){g(!0),p(e)}));return(0,y.jsxs)(m.Z,{className:"modal-planilla",title:"Control de planilla",open:C,width:900,closeModal:function(){j(!1)},children:[(0,y.jsx)(h.Z,{columns:O,table:S}),N&&(0,y.jsx)(_,{data:x,modal:N,setModal:G,actualizarTabla:F}),k&&(0,y.jsx)(w,{data:x,modal:k,setModal:R,actualizarTabla:F})]})},D=n(49389).Z.Search,S=function(e){e.abrirModal;var t=e.registrar,n=(0,s.useContext)(c.c).setJuntarTeletrans,l=(0,s.useContext)(d.s).setFilterText;return(0,y.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,y.jsx)(D,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return l(e.target.value)},style:{width:300}}),(0,y.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,y.jsx)("div",{children:!1!==t?(0,y.jsx)(b.ZP,{onClick:function(){n(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})},E=n(34664),A=n(43513),I=n(78820),N=(n(51279),function(e){var t=e.table,n=e.handleContrato,l=e.filas,i=(0,s.useState)(0),a=(0,r.Z)(i,2),o=(a[0],a[1]),d=[{id:"Nro",name:"Nro",width:"60px",selector:function(e,t){return null===e||void 0===e?void 0:e.id}},{id:"nombres",name:"Nombres y apellidos",selector:function(e){return null===e||void 0===e?void 0:e.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(e){return null!==e&&void 0!==e&&e.telefono?e.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha de inicio",width:"150px",selector:function(e){return null===e||void 0===e?void 0:e.fecha_inicio}},{id:"fecha_fin",name:"Fecha de fin",width:"150px",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(e){var t,n,l,i;return null!==e&&void 0!==e&&null!==(t=e.evaluacion)&&void 0!==t&&null!==(n=t.at(-1))&&void 0!==n&&n.recomendado_por?null===e||void 0===e||null===(l=e.evaluacion)||void 0===l||null===(i=l.at(-1))||void 0===i?void 0:i.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(e){return null!==e&&void 0!==e&&e.asistencia?e.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"volquete",name:"Volquete",selector:function(e){return null!==e&&void 0!==e&&e.volquete?null===e||void 0===e?void 0:e.volquete:0},center:!0},{id:"teletrans",name:"Teletrans",selector:function(e){return null!==e&&void 0!==e&&e.teletran?e.teletran:0},center:!0},{id:"total",name:"Total",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.total},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(I.w8I,{onClick:function(){return n(e)},style:{cursor:"pointer"}})})}}];return(0,y.jsx)("div",{className:"table-container",children:(0,y.jsx)(A.ZP,{columns:d,data:t,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:l,paginationRowsPerPageOptions:[l,2*l,3*l,4*l,5*l],onChangePage:function(e){o(e)},noDataComponent:(0,y.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE,description:(0,y.jsx)("span",{children:"No hay registros para mostrar."})})})})}),G=n(80458),W=n(34045),P=function(){var e=(0,s.useContext)(c.c),t=e.planillaControl,n=e.setPlanillaControl,h=e.setUserdata,v=(0,s.useContext)(d.s),m=v.getData,p=v.setResult,j=(0,s.useState)([]),g=(0,r.Z)(j,2),C=g[0],_=g[1],Z=(0,s.useState)([]),w=(0,r.Z)(Z,2),D=w[0],E=w[1],A=(0,s.useState)([]),I=(0,r.Z)(A,2),P=I[0],k=I[1],R=(0,s.useState)([]),F=(0,r.Z)(R,2),O=F[0],L=F[1],M=(0,s.useState)([]),B=(0,r.Z)(M,2),H=(B[0],B[1],(0,s.useState)({})),z=(0,r.Z)(H,2),U=z[0],q=z[1],V=(0,s.useState)([]),J=(0,r.Z)(V,2),Q=J[0],Y=J[1],X=(0,x.Z)(Q).result,$=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,l,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla","area","cargo","campamento",t=m("planilla"),n=m("area"),l=m("cargo"),i=m("campamento"),e.next=10,Promise.all([t,n,l,i]);case 10:o=e.sent,console.log(o[0].data),Y(o[0].data),E(o[1].data),k(o[2].data),L(o[3].data);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){$()}),[]),(0,s.useEffect)((function(){if(U.campamento){var e=null===Q||void 0===Q?void 0:Q.filter((function(e){return(null===e||void 0===e?void 0:e.campamento)===U.campamento}));p(e)}if(U.area){var t=null===Q||void 0===Q?void 0:Q.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.contratos)||void 0===t?void 0:t.area)===U.area}));p(t)}if(U.puesto){var n=null===Q||void 0===Q?void 0:Q.filter((function(e){return(null===e||void 0===e?void 0:e.puesto)===U.puesto}));p(n)}}),[U]);var K=function(e){n(!0),_(e),h(e)},ee=function(e,t){q((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,l.Z)({},t,e))}))},te=(0,f.B)(K);return(0,y.jsxs)("div",{children:[(0,y.jsx)(u.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,y.jsxs)("div",{className:"margenes",children:[(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,y.jsx)(S,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,y.jsx)(G.Z,{name:"campamento",placeholder:"Campamento",onChange:function(e){return ee(e,"campamento")},style:{width:"200px"},options:O.map((function(e){return{id:e.id,value:e.nombre}}))}),(0,y.jsx)(G.Z,{name:"area",placeholder:"\xc1rea",onChange:function(e){return ee(e,"area")},style:{width:"200px"},options:D.map((function(e){return{id:e.id,value:e.nombre}}))}),(0,y.jsx)(G.Z,{name:"puesto",placeholder:"Puesto",onChange:function(e){return ee(e,"puesto")},style:{width:"200px"},options:P.map((function(e){return{id:e.id,value:e.nombre}}))}),(0,y.jsx)(b.ZP,{onClick:function(){!function(e,t,n){var l=W.P6.book_new(),i=W.P6.json_to_sheet(e);W.P6.book_append_sheet(l,i,t),(0,W.Fv)(l,"".concat(n,".xlsx"))}(null===X||void 0===X?void 0:X.map((function(e,t){var n,l,i,a,o,r,s,d,c;return{Nro:t+1,DNI:null===e||void 0===e?void 0:e.dni,NOMBRE:null===e||void 0===e?void 0:e.nombre,FECHA_NACIMIENTO:null===e||void 0===e||null===(n=e.fecha_nacimiento)||void 0===n?void 0:n.split("T")[0],CELULAR:null===e||void 0===e?void 0:e.telefono,CARGO:null===e||void 0===e?void 0:e.puesto,"\xc1REA":null===e||void 0===e||null===(l=e.contratos)||void 0===l?void 0:l.area,COOPERATIVA:null===e||void 0===e||null===(i=e.evaluacion)||void 0===i||null===(a=i.at(-1))||void 0===a?void 0:a.cooperativa,FECHA_DE_INGRESO:null===e||void 0===e||null===(o=e.fecha_inicio)||void 0===o?void 0:o.split("T")[0],VOLQUETE:null===e||void 0===e?void 0:e.volquete,TELETRAN:null===e||void 0===e?void 0:e.teletran,PERIODO_DE_TRABAJO:null===e||void 0===e?void 0:e.asistencia,FECHA_DE_SALIDA:null===e||void 0===e||null===(r=e.fecha_fin)||void 0===r?void 0:r.split("T")[0],ANTECEDENTES:!1===(null===e||void 0===e||null===(s=e.contratos)||void 0===s?void 0:s.suspendido)?"Ninguno":"Suspendido",RECOMENDADO_POR:null===e||void 0===e||null===(d=e.evaluacion)||void 0===d||null===(c=d.at(-1))||void 0===c?void 0:c.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:parseInt(null===e||void 0===e?void 0:e.asistencia)%15===0?parseInt(null===e||void 0===e?void 0:e.asistencia)/15:""}})),"Planilla","reporte")},children:" Descargar"})]}),(0,y.jsx)(N,{columns:te,table:X,handleContrato:K,filas:10})]}),t&&(0,y.jsx)(T,{selected:C,actualizarTabla:$})]})}}}]);
//# sourceMappingURL=34.c0950787.chunk.js.map