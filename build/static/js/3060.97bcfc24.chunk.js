"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[3060],{8034:function(e,a,n){var t=n(1413),o=n(72791),r=n(18267),i=(n(77457),n(80184));a.Z=function(e){var a=e.setAvatar,n=e.avatar,s=e.selected,l=(0,o.useCallback)((function(e){var n=e[0];a({file:n,preview:URL.createObjectURL(n)})}),[a]),d=(0,r.uI)({accept:{"image/png":[".png"],"image/jpg":[".jpg"],"image/jpeg":[".jpeg"]},noKeyboard:!0,onDrop:l}),c=d.getRootProps,u=d.getInputProps,x=d.isDragActive;return(0,i.jsxs)("div",(0,t.Z)((0,t.Z)({},c()),{},{className:"drag",children:[(0,i.jsx)("input",(0,t.Z)({},u())),x?(0,i.jsx)("p",{children:"Coloca la imagen aqui..."}):null!==s&&void 0!==s&&s.foto||null!==n&&void 0!==n&&n.preview?(0,i.jsx)("img",{src:(null===n||void 0===n?void 0:n.preview)||(null===s||void 0===s?void 0:s.foto),alt:""}):(0,i.jsx)("p",{children:"Arrastra la imagen aqui, o has click para seleccionar la imagen."})]}))}},28181:function(e,a,n){var t=n(74165),o=n(15861),r=n(29439),i=n(49389),s=n(87309),l=n(72791),d=n(38411),c=n(99763),u=n(69967),x=n(80184);a.Z=function(e){var a=e.modal,n=e.setModal,h=(e.getPlanilla,e.data),v=e.observacion,p=e.boton,j=e.actualizarTabla,f=(0,l.useContext)(d.s).updateData,b=(0,l.useState)(""),m=(0,r.Z)(b,2),g=m[0],Z=m[1],y=function(){n(!1)},w=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var a,n,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={observaciones:g},e.next=3,f(n,null!==(a=h.aprobacion_id)&&void 0!==a?a:h.id,"aprobacion/observacion");case 3:(o=e.sent)&&((0,c.q)(o.status,o.msg),y(),j());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(u.Z,{className:"modal-usuario",title:p?"Agregar Observaci\xf3n":"Observaci\xf3n RRHH",open:a,width:400,closeModal:y,children:[(0,x.jsx)(i.Z.TextArea,{showCount:!0,maxLength:255,defaultValue:null!==h&&void 0!==h&&h.observaciones?null===h||void 0===h?void 0:h.observaciones:v||"",style:{height:120,marginBottom:24,marginTop:15},onChange:function(e){Z(e.target.value)},placeholder:"Observaci\xf3n"}),(0,x.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:p&&(0,x.jsx)(s.ZP,{onClick:w,children:"Guardar"})})]})}},83060:function(e,a,n){n.d(a,{Z:function(){return y}});var t=n(74165),o=n(15861),r=n(29439),i=n(72791),s=n(71368),l=n(4808),d=n(91906),c=n(38411),u=n(53939),x=n(69967),h=n(28181),v=n(17615),p=n(87309),j=n(99763),f=n(8034),b=n(80184),m=function(e){var a=e.modal,n=e.setModal,s=e.data,l=e.actualizarTabla,d=(0,i.useState)(null),c=(0,r.Z)(d,2),u=c[0],h=c[1],m=function(){n(!1)},g=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var a,n,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,(null===u||void 0===u?void 0:u.file)&&a.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===s||void 0===s?void 0:s.aprobacion_id),{method:"PUT",body:a});case 4:return n=e.sent,e.next=7,n.json();case 7:(o=e.sent)&&((0,j.q)(o.status,o.msg),m(),l());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(x.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:a,width:400,closeModal:m,children:(0,b.jsxs)(v.Z,{onFinish:g,layout:"horizontal",children:[(0,b.jsx)(v.Z.Item,{children:(0,b.jsx)("div",{className:"drag-container",children:(0,b.jsx)(f.Z,{avatar:u,setAvatar:h,selected:s})})}),(0,b.jsx)("div",{className:"button-container",children:(0,b.jsx)(p.ZP,{htmlType:"submit",children:"Guardar"})})]})})},g=function(e){var a,n=e.data,v=e.modal,p=e.setModal,j=e.actualizarTabla,f=(0,i.useContext)(s.c),g=(f.verificacion,f.setVerificacion,(0,i.useContext)(c.s)),Z=(g.getDataById,g.data2,(0,i.useState)()),y=(0,r.Z)(Z,2),w=(y[0],y[1],(0,i.useState)([])),C=(0,r.Z)(w,2),M=C[0],N=(C[1],(0,i.useState)(!1)),T=(0,r.Z)(N,2),k=T[0],S=T[1],E=(0,i.useState)(!1),D=(0,r.Z)(E,2),F=D[0],z=D[1],P=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){P()}),[]);var A=(0,u.MK)();return(0,b.jsxs)(x.Z,{className:"modal-validacion",title:"Hoja de tareo",open:v,width:900,closeModal:function(){p(!1)},children:[(0,b.jsxs)("div",{className:"tareo-container",children:[(0,b.jsxs)("section",{className:"tareo-datos",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Nombre: "}),null===n||void 0===n?void 0:n.nombre]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Dni: "}),null===n||void 0===n?void 0:n.dni]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono: "}),null===n||void 0===n?void 0:n.celular]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Cargo:"})," ",null===n||void 0===n?void 0:n.cargo]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===n||void 0===n?void 0:n.asistencia]})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,descargar:!1,validacion:!0,cargar:!1,data1:n,data2:M,observacion:!0,modal:S,setModal1:z})})]}),(0,b.jsx)(l.Z,{columns:A,table:null===n||void 0===n||null===(a=n.asistencia_completa)||void 0===a?void 0:a.reverse()}),k&&(0,b.jsx)(m,{modal:k,setModal:S,data:n,actualizarTabla:j}),F&&(0,b.jsx)(h.Z,{setModal:z,modal:F,data:n,observacion:"",boton:!0})]})},Z=function(e){var a=e.data,n=e.modal,t=e.setModal,o=(0,i.useContext)(s.c),l=(o.setValidacionPagosAsociacion,o.setFechas,o.fechas,o.verificacion,o.setVerificacion,(0,i.useState)(!1)),u=(0,r.Z)(l,2),v=u[0],p=u[1],j=(0,i.useContext)(c.s),f=(j.getData,j.data3,j.setData3,j.data2,j.dataToEdit,(0,i.useState)()),m=(0,r.Z)(f,2);m[0],m[1];return(0,b.jsxs)(x.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:n,width:950,closeModal:function(){t(!1)},children:[(0,b.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:" Nombre: "})," ",a&&null!==a&&void 0!==a&&a.nombre?a.nombre:"---"]})}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{children:(0,b.jsxs)("label",{htmlFor:"",children:[(0,b.jsx)("strong",{children:"Tel\xe9fono:"})," ",a&&null!==a&&void 0!==a&&a.telefono?a.telefono:"---"]})})})]}),(0,b.jsx)("section",{className:"tareo-boton",children:(0,b.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:a,data2:null,modal:null,descargar:!1,observacion:!0,setModal1:p})})]}),(0,b.jsx)("section",{className:"table-container",children:(0,b.jsxs)("table",{cellSpacing:0,border:0,style:{fontSize:"10px",border:"none"},children:[(0,b.jsx)("thead",{style:{backgroundColor:"#D1C126",border:"none"},children:(0,b.jsxs)("tr",{style:{border:"none",padding:"5px"},children:[(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Nro"}),(0,b.jsx)("th",{style:{border:"none",padding:"5px"},children:"Apellidos y nombres"}),a.trabajadores.length>0&&Object.keys(a.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,a){return(0,b.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)",border:"none",padding:"5px"},children:(0,b.jsx)("span",{children:e})},a)}))]})}),(0,b.jsx)("tbody",{children:a.trabajadores.map((function(e,a){return(0,b.jsxs)("tr",{style:{padding:"5px"},children:[(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:a+1}),(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:e.nombres}),Object.entries(e).filter((function(e){var a=(0,r.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(a)})).map((function(e,a){var n=(0,r.Z)(e,2),t=(n[0],n[1]);return(0,b.jsx)("td",{style:{border:"none",padding:"5px",borderBottom:"1px solid #E4E4E4"},children:t},a)}))]},a)}))})]})}),v&&(0,b.jsx)(h.Z,{setModal:p,modal:v,data:a,observacion:"",boton:!0})]})},y=function(e){var a=e.selected,n=(e.actualizarTabla,e.planillaControl),d=e.setPlanillaControl,h=(0,i.useState)([]),v=(0,r.Z)(h,2),p=(v[0],v[1]),j=(0,i.useState)([]),f=(0,r.Z)(j,2),m=f[0],y=f[1],w=(0,i.useContext)(s.c).setPago,C=(0,i.useContext)(c.s).getData,M=(0,i.useState)([]),N=(0,r.Z)(M,2),T=N[0],k=N[1],S=(0,i.useState)(!1),E=(0,r.Z)(S,2),D=E[0],F=E[1],z=(0,i.useState)(!1),P=(0,r.Z)(z,2),A=P[0],O=P[1],q=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n,o,r,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a||!a.dni){e.next=8;break}return n="planilla/tareo/".concat(a.dni),e.next=4,C(n);case 4:o=e.sent,k(o.data),e.next=13;break;case 8:return r="planilla/tareo/asociacion/".concat(a.asociacion_id),e.next=11,C(r);case 11:i=e.sent,k(i.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){q()}),[a]),(0,i.useEffect)((function(){p([a])}),[a]);var B=(0,u.qQ)((function(e){""===a.codigo?(O(!0),y(e)):(F(!0),y(e))}),(function(e){w(!0),y(e)}));return(0,b.jsxs)(x.Z,{className:"modal-planilla",title:"Control de planilla",open:n,width:900,closeModal:function(){d(!1)},children:[(0,b.jsx)(l.Z,{columns:B,table:T}),D&&(0,b.jsx)(g,{data:m,modal:D,setModal:F,actualizarTabla:q}),A&&(0,b.jsx)(Z,{data:m,modal:A,setModal:O,actualizarTabla:q})]})}},77457:function(){}}]);
//# sourceMappingURL=3060.97bcfc24.chunk.js.map