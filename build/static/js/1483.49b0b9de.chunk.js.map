{"version":3,"file":"static/js/1483.49b0b9de.chunk.js","mappings":"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","sources":["components/planillas/BuscadorControlPlanilla.jsx","components/tabla/TablaPlanilla.jsx","components/planillas/control/ControlPlanilla.jsx","helpers/tablaExcel.jsx","hooks/useSearch.jsx"],"sourcesContent":["import { Button, Input } from \"antd\";\nimport React from \"react\";\nimport { useContext, useRef } from \"react\";\nimport { AiOutlineSearch } from \"react-icons/ai\";\nimport { CrudContext } from \"../../context/CrudContext\";\nimport { PlanillaContext } from \"../../context/PlanillaContext\";\nconst { Search } = Input;\n\nconst BuscadorControlPlanilla = ({ abrirModal, registrar }) => {\n  const { setJuntarTeletrans } = useContext(PlanillaContext);\n  const { setFilterText } = useContext(CrudContext);\n  const handleModal = () => {\n    setJuntarTeletrans(true);\n  };\n  return (\n    <div\n      className=\"buscador-container\"\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n      }}\n    >\n      <Search\n        placeholder=\"Ingresa un termino aqui...\"\n        onChange={(e) => setFilterText(e.target.value)}\n        style={{\n          width: 300,\n        }}\n      />\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"flex-end\",\n        }}\n      >\n        <div>\n          {registrar !== false ? (\n            <Button onClick={handleModal} style={{ width: \"150px\" }}>\n              Juntar teletrans\n            </Button>\n          ) : (\n            \"\"\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BuscadorControlPlanilla;\n","import { Empty } from \"antd\";\nimport dayjs from \"dayjs\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport { AiFillEye } from \"react-icons/ai\";\nimport \"./tabla.css\";\n\nconst TablaPlanilla = ({ table, handleContrato, filas }) => {\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const handlePageChange = (selected) => {\n    setCurrentPage(selected); // actualiza el número de página actual al cambiar de página\n  };\n  const paginationComponentOptions = {\n    rowsPerPageText: \"Filas por página\",\n    rangeSeparatorText: \"de\",\n    selectAllRowsItem: false,\n    selectAllRowsItemText: \"Todos\",\n  };\n  const cargo = JSON.parse(localStorage.getItem(\"cargo\"));\n  const columns = [\n    {\n      id: \"Nro\",\n      name: \"Nro\",\n      width: \"60px\",\n      selector: (row, index) => row?.id,\n    },\n    {\n      id: \"nombres\",\n      name: \"Apellidos y nombres\",\n      selector: (row) => row?.nombre,\n      width: \"250px\",\n      sortable: true,\n    },\n    {\n      id: \"celular\",\n      name: \"Celular\",\n      width: \"150px\",\n\n      sortable: true,\n      selector: (row) => (row?.telefono ? row.telefono : \"---\"),\n      center: true,\n    },\n    {\n      id: \"fecha_inicio\",\n      name: \"Fecha inicio\",\n      width: \"120px\",\n\n      selector: (row) => row?.fecha_inicio,\n    },\n    {\n      id: \"fecha_fin\",\n      name: \"Fecha fin\",\n      width: \"150px\",\n      button: true,\n      selector: (row) => row?.fecha_fin,\n    },\n    {\n      id: \"recomendado_por\",\n      name: \"Recomendado por\",\n      width: \"150px\",\n\n      button: true,\n      selector: (row) =>\n        row?.evaluacion?.at(-1)?.recomendado_por\n          ? row?.evaluacion?.at(-1)?.recomendado_por\n          : \"---\",\n    },\n    {\n      id: \"Dias\",\n      name: \"Dias laborados\",\n      button: true,\n      selector: (row) => (row?.asistencia ? row.asistencia : \"--\"),\n      style: {\n        borderBotton: \"none\",\n        color: \"#555555\",\n        // maxWidth: \"40px\",\n      },\n    },\n    {\n      id: \"pago\",\n      name: \"Pago\",\n\n      selector: (row) => (\n        <p\n          style={{\n            display:\n              cargo === 11 || cargo === 83 || cargo === 15 ? \"auto\" : \"none\",\n          }}\n        >\n          {\" \"}\n          {(row.volquete || 0) +\n            \" (Volq.) - \" +\n            (row?.teletran || 0) +\n            \" (Tele.)\"}\n        </p>\n      ),\n\n      center: true,\n    },\n\n    {\n      id: \"total\",\n      name: \"Total\",\n      button: true,\n      selector: (row) => (\n        <p\n          style={{\n            display:\n              cargo === 11 || cargo === 83 || cargo === 15 ? \"auto\" : \"none\",\n          }}\n        >\n          {\" \"}\n          {(row?.total || 0) + \" (Tele.)\"}\n        </p>\n      ),\n\n      center: true,\n    },\n    {\n      id: \"control\",\n      name: \"Control\",\n      button: true,\n      center: true,\n      cell: (e) => (\n        <>\n          <AiFillEye\n            onClick={() => handleContrato(e)}\n            style={{ cursor: \"pointer\" }}\n          />\n        </>\n      ),\n    },\n  ];\n\n  const conditionalRowStyles = [\n    {\n      when: (row) => row.fecha_fin_estimada || row.fecha_fin,\n      style: (row) => {\n        let fechaFin = row.fecha_fin_estimada\n          ? row.fecha_fin_estimada\n          : row.fecha_fin;\n        // Cambiar formato de fecha a mm-dd-yyyy\n        fechaFin = fechaFin.split(\"-\").reverse().join(\"-\");\n        const fechaFinDate = new Date(fechaFin);\n        const now = new Date();\n        // Asegurarse de que las fechas se comparen solo en términos de día, mes y año.\n        const fechaFinSimple = new Date(\n          fechaFinDate.getFullYear(),\n          fechaFinDate.getMonth(),\n          fechaFinDate.getDate()\n        );\n        const nowSimple = new Date(\n          now.getFullYear(),\n          now.getMonth(),\n          now.getDate()\n        );\n        const differenceInTime = fechaFinSimple.getTime() - nowSimple.getTime();\n        const differenceInDays = Math.ceil(\n          differenceInTime / (1000 * 3600 * 24)\n        );\n\n        if (differenceInDays > 5) {\n          return {}; // No cambies el color si la fecha está a más de 5 días de distancia\n        } else if (differenceInDays <= 5 && differenceInDays > 3) {\n          return { backgroundColor: \"#D4E8CF\" }; // Cambia a color verde si faltan 5 días o menos, pero más de 3 días\n        } else if (differenceInDays <= 3 && differenceInDays >= 0) {\n          return { backgroundColor: \"#e8d2cf\" }; // Cambia a color rojo si faltan 3 días o menos\n        } else if (differenceInDays < 0) {\n          return { backgroundColor: \"#e8d2cf\" }; // Cambia a color rojo si la fecha estimada ya ha pasado\n        }\n      },\n    },\n  ];\n\n  return (\n    <div className=\"table-container\">\n      <DataTable\n        columns={columns}\n        data={table}\n        pagination\n        striped\n        highlightOnHover\n        responsive\n        paginationComponentOptions={paginationComponentOptions}\n        paginationPerPage={filas}\n        paginationRowsPerPageOptions={[\n          filas,\n          filas * 2,\n          filas * 3,\n          filas * 4,\n          filas * 5,\n        ]}\n        onChangePage={handlePageChange}\n        conditionalRowStyles={conditionalRowStyles}\n        noDataComponent={\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={<span>No hay registros para mostrar.</span>}\n          />\n        }\n      />\n    </div>\n  );\n};\n\nexport default TablaPlanilla;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { CrudContext } from \"../../../context/CrudContext\";\nimport { PlanillaContext } from \"../../../context/PlanillaContext\";\nimport Header from \"../../header/Header\";\nimport ModalPlanillaControl from \"./ModalPlanillaControl\";\nimport { controlPlanilla } from \"../../../data/dataTable\";\nimport BuscadorControlPlanilla from \"../BuscadorControlPlanilla\";\nimport useSearch from \"../../../hooks/useSearch\";\nimport TablaPlanilla from \"../../tabla/TablaPlanilla\";\nimport { Button, Empty, Input, Select } from \"antd\";\nimport { handleDownloadExcel } from \"../../../helpers/tablaExcel\";\nimport dayjs from \"dayjs\";\n\nconst ControlPlanilla = () => {\n  const { setUserdata } = useContext(PlanillaContext);\n  const { getData, setResult, setFilterText } = useContext(CrudContext);\n  const [tableData, setTableData] = useState([]);\n  const [area, setArea] = useState([]);\n  const [cargo, setCargo] = useState([]);\n  const [campamento, setCampamento] = useState([]);\n  const [filterData, setFilterData] = useState([]);\n  const [filtros, setFiltros] = useState({});\n  const [planilla, setPlanilla] = useState([]);\n  const [planillaControl, setPlanillaControl] = useState(false);\n\n  const { result } = useSearch(planilla);\n\n  const getTrabajadores = async () => {\n    const route = \"planilla\";\n    const route1 = \"area\";\n    const route2 = \"cargo\";\n    const route3 = \"campamento\";\n    const response = getData(route);\n    const response1 = getData(route1);\n    const response2 = getData(route2);\n    const response3 = getData(route3);\n\n    const all = await Promise.all([response, response1, response2, response3]);\n    setPlanilla(all[0].data);\n    setArea(all[1].data);\n    setCargo(all[2].data);\n    setCampamento(all[3].data);\n  };\n\n  useEffect(() => {\n    getTrabajadores();\n  }, []);\n\n  useEffect(() => {\n    const filterData = () => {\n      if (!filtros.campamento && !filtros.area && !filtros.puesto) {\n        return planilla;\n      }\n\n      return planilla.filter((item) => {\n        if (filtros.campamento && item?.campamento !== filtros.campamento) {\n          return false;\n        }\n\n        if (filtros.area && item?.area !== filtros.area) {\n          return false;\n        }\n\n        if (filtros.puesto && item?.puesto !== filtros.puesto) {\n          return false;\n        }\n\n        return true;\n      });\n    };\n\n    setResult(filterData());\n  }, [filtros, planilla]);\n\n  const limpiarBusqueda = () => {\n    setFiltros({ campamento: undefined, area: undefined, puesto: undefined });\n    setFilterText(\"\")\n    \n  };\n\n  const handleContrato = (e) => {\n    setPlanillaControl(true);\n    setTableData(e);\n    setUserdata(e);\n  };\n\n  const handleFilters = (e, text) => {\n    setFiltros((values) => {\n      return { ...values, [text]: e };\n    });\n  };\n\n  console.log('====================================');\n  console.log(result);\n  console.log('====================================');\n  const downloadExcel = () => {\n    const formatData = result?.map((item, i) => {\n      return {\n        Nro: i + 1,\n        DNI: item?.dni,\n        NOMBRE: item?.nombre,\n        FECHA_NACIMIENTO: item?.fecha_nacimiento,\n        CELULAR: item?.telefono,\n        CARGO: item?.puesto,\n        ÁREA: item?.area,\n        COOPERATIVA: item?.evaluacion?.at(-1)?.cooperativa,\n        FECHA_DE_INGRESO: item?.fecha_inicio,\n        VOLQUETE: item?.volquete,\n        TELETRAN: item?.teletran,\n        PERIODO_DE_TRABAJO: item?.periodo_trabajo,\n        FECHA_DE_SALIDA: item?.fecha_fin,\n        ANTECEDENTES:\n          item?.asociacion_id !== null && item?.contratos?.suspendido !== false\n            ? \"Suspendido\"\n            : \"Normal\",\n        RECOMENDADO_POR: item?.evaluacion?.at(-1)?.recomendado_por,\n        PROXIMA_QUINCENA: \"\",\n        NUMERO_DE_QUINCENAS_TRABAJADOS:\n          Math.floor(parseInt(item?.asistencia) / 15) || 0,\n      };\n    });\n\n    handleDownloadExcel(formatData, \"Planilla\", \"reporte\");\n  };\n\n\n  return (\n    <div>\n      <Header text={\"Planilla\"} user={\"Usuario\"} ruta={\"/planilla\"} />\n      <div className=\"margenes\">\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"5px\" }}>\n          <BuscadorControlPlanilla\n            registrar={false}\n            crear={false}\n            exportar={false}\n            cargar={false}\n          />\n          <Select\n            name=\"campamento\"\n            placeholder=\"Campamento\"\n            onChange={(e) => handleFilters(e, \"campamento\")}\n            value={filtros.campamento}\n            style={{ width: \"200px\" }}\n            showSearch\n            optionFilterProp=\"children\"\n            dropdownMatchSelectWidth={false}\n            filterOption={(input, option) =>\n              (option?.label ?? \"\").toLowerCase().includes(input.toLowerCase())\n            }\n            options={campamento.map((item) => {\n              return { label: item.nombre, value: item.nombre };\n            })}\n          />\n          <Select\n            name=\"area\"\n            placeholder=\"Área\"\n            showSearch\n            optionFilterProp=\"children\"\n            dropdownMatchSelectWidth={false}\n            filterOption={(input, option) =>\n              (option?.label ?? \"\").toLowerCase().includes(input.toLowerCase())\n            }\n            value={filtros.area}\n            onChange={(e) => handleFilters(e, \"area\")}\n            style={{ width: \"200px\" }}\n            options={area.map((item) => {\n              return { label: item.nombre, value: item.nombre };\n            })}\n          />\n          <Select\n            name=\"puesto\"\n            placeholder=\"Puesto\"\n            onChange={(e) => handleFilters(e, \"puesto\")}\n            style={{ width: \"200px\" }}\n            showSearch\n            optionFilterProp=\"children\"\n            value={filtros.puesto}\n            dropdownMatchSelectWidth={false}\n            filterOption={(input, option) =>\n              (option?.label ?? \"\").toLowerCase().includes(input.toLowerCase())\n            }\n            options={cargo.map((item) => {\n              return { label: item.nombre, value: item.nombre };\n            })}\n          />\n          <Button onClick={downloadExcel}> Descargar</Button>\n          <Button onClick={limpiarBusqueda}> Limpiar Busqueda</Button>\n        </div>\n\n        <TablaPlanilla\n          \n          table={result}\n          handleContrato={handleContrato}\n          filas={10}\n        />\n      </div>\n\n      {planillaControl && (\n        <ModalPlanillaControl\n          selected={tableData}\n          actualizarTabla={getTrabajadores}\n          planillaControl={planillaControl}\n          setPlanillaControl={setPlanillaControl}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ControlPlanilla;\n","import { utils, writeFileXLSX, writeFile } from \"xlsx\";\nexport const handleDownloadExcel = (dataSource, sheetName, fileName) => {\n  const wb = utils.book_new();\n  const ws = utils.json_to_sheet(dataSource);\n  utils.book_append_sheet(wb, ws, sheetName);\n  writeFileXLSX(wb, `${fileName}.xlsx`);\n};\n\nexport const handleDownloadExcel1 = (dataSource, sheetName, fileName) => {\n  const wb = utils.book_new();\n  const headers = [\n    \"Hoja de Tareo\",\n    \"Header 2\",\n    \"Header 3\",\n    \"Header 4\",\n    \"Header 5\",\n    \"Header 6\",\n  ];\n\n  // Crear un array con la cabecera y las llaves de los objetos\n  const keys = [headers, Object.keys(dataSource[0])];\n\n  // Crear un array con la cabecera, las llaves y los valores de los objetos\n  const data = [...keys, ...dataSource.map((obj) => Object.values(obj))];\n\n  // Transformar el array de arrays en un array de objetos\n  const rows = data.map((arr) =>\n    arr.reduce((acc, val, i) => {\n      acc[headers[i]] = val;\n      return acc;\n    }, {})\n  );\n\n  const ws = utils.json_to_sheet(rows);\n\n  // Establecer el ancho de las columnas de la cabecera\n  ws[\"!cols\"] = headers.map(() => ({\n    width: 20,\n    height: 40,\n    textAlign: \"center\",\n  }));\n\n  // Establecer el estilo de la cabecera\n  ws[\"!merges\"] = [{ s: { r: 0, c: 0 }, e: { r: 0, c: 1 } }];\n  ws[\"A1\"].s = { font: { bold: true } };\n  ws[\"B1\"].s = { font: { bold: true } };\n  ws[\"C1\"].s = { font: { bold: true } };\n  ws[\"D1\"].s = { font: { bold: true } };\n  ws[\"E1\"].s = { font: { bold: true } };\n  ws[\"F1\"].s = { font: { bold: true } };\n\n  utils.book_append_sheet(wb, ws, sheetName);\n  writeFileXLSX(wb, `${fileName}.xlsx`);\n};\n","import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useContext } from \"react\";\nimport { useState } from \"react\";\nimport { CrudContext } from \"../context/CrudContext\";\n\nconst useSearch = (data) => {\n  const { filterText, filterTextModal, result, setResult } = useContext(CrudContext);\n\n  useEffect(() => {\n    if (filterText !== \"\") {\n      const filteredData = data.filter((item) => {\n        return Object.values(item)\n          .join(\"\")\n          .toLowerCase()\n          .includes(filterText.toLowerCase());\n      });\n      setResult(filteredData);\n    } else {\n      setResult(data);\n    }\n  }, [filterText, data]);\n\n\n  return { result };\n};\n\nexport default useSearch;\n"],"names":["Search","Input","abrirModal","registrar","setJuntarTeletrans","useContext","PlanillaContext","setFilterText","CrudContext","className","style","display","alignItems","placeholder","onChange","e","target","value","width","onClick","table","handleContrato","filas","useState","setCurrentPage","cargo","JSON","parse","localStorage","getItem","columns","id","name","selector","row","index","nombre","sortable","telefono","center","fecha_inicio","button","fecha_fin","evaluacion","at","recomendado_por","asistencia","borderBotton","color","volquete","teletran","total","cell","cursor","conditionalRowStyles","when","fecha_fin_estimada","fechaFin","split","reverse","join","fechaFinDate","Date","now","fechaFinSimple","getFullYear","getMonth","getDate","nowSimple","differenceInTime","getTime","differenceInDays","Math","ceil","backgroundColor","data","pagination","striped","highlightOnHover","responsive","paginationComponentOptions","rowsPerPageText","rangeSeparatorText","selectAllRowsItem","selectAllRowsItemText","paginationPerPage","paginationRowsPerPageOptions","onChangePage","selected","noDataComponent","image","Empty","description","setUserdata","getData","setResult","tableData","setTableData","area","setArea","setCargo","campamento","setCampamento","filtros","setFiltros","planilla","setPlanilla","planillaControl","setPlanillaControl","result","useSearch","getTrabajadores","response","response1","response2","response3","Promise","all","useEffect","puesto","filter","item","handleFilters","text","values","console","log","Header","user","ruta","gap","crear","exportar","cargar","showSearch","optionFilterProp","dropdownMatchSelectWidth","filterOption","input","option","label","toLowerCase","includes","options","map","dataSource","sheetName","fileName","wb","utils","ws","writeFileXLSX","handleDownloadExcel","i","Nro","DNI","dni","NOMBRE","FECHA_NACIMIENTO","fecha_nacimiento","CELULAR","CARGO","ÁREA","COOPERATIVA","cooperativa","FECHA_DE_INGRESO","VOLQUETE","TELETRAN","PERIODO_DE_TRABAJO","periodo_trabajo","FECHA_DE_SALIDA","ANTECEDENTES","asociacion_id","contratos","suspendido","RECOMENDADO_POR","PROXIMA_QUINCENA","NUMERO_DE_QUINCENAS_TRABAJADOS","floor","parseInt","undefined","ModalPlanillaControl","actualizarTabla","filterText","filterTextModal","filteredData","Object"],"sourceRoot":""}