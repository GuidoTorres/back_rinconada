"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[908],{55861:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var o=t(4942),a=t(1413),i=t(74165),l=t(15861),r=t(29439),u=t(72791),s=t(38411),d=t(71368),c=t(83188),v=t(4808),p=(t(91743),t(97603),t(85530)),f=t(38316),m=t(79260),h=t(69967),x=t(80184),E=function(n){var e=n.selected,t=(n.actualizarTabla,(0,u.useState)([])),o=(0,r.Z)(t,2),a=(o[0],o[1]),c=(0,u.useState)([]),E=(0,r.Z)(c,2),g=E[0],Z=E[1],C=(0,u.useContext)(d.c),b=C.setPlanillaControl,_=C.setPago,A=C.planillaControl,N=(0,u.useContext)(s.s).getData,S=(0,u.useState)([]),T=(0,r.Z)(S,2),j=T[0],P=T[1],w=(0,u.useState)(!1),R=(0,r.Z)(w,2),I=R[0],D=R[1],O=(0,u.useState)(!1),y=(0,r.Z)(O,2),M=y[0],k=y[1],F=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var t,o,a,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e||!e.dni){n.next=8;break}return t="planilla/tareo/".concat(e.dni),n.next=4,N(t);case 4:o=n.sent,P(o.data),n.next=13;break;case 8:return a="planilla/tareo/asociacion/".concat(e.id),n.next=11,N(a);case 11:l=n.sent,P(l.data);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){F()}),[e]),(0,u.useEffect)((function(){a([e])}),[e]);var L=(0,m.qQ)((function(n){""===e.codigo?(k(!0),Z(n)):(D(!0),Z(n))}),(function(n){_(!0),Z(n)}));return(0,x.jsxs)(h.Z,{className:"modal-planilla",title:"Control de planilla",open:A,width:900,closeModal:function(){b(!1)},children:[(0,x.jsx)(v.Z,{columns:L,table:j}),I&&(0,x.jsx)(p.Z,{data:g,modal:I,setModal:D,actualizarTabla:F}),M&&(0,x.jsx)(f.Z,{data:g,modal:M,setModal:k,actualizarTabla:F})]})},g=t(32163),Z=t(95579),C=t(34664),b=t(43513),_=t(78820),A=(t(51279),function(n){var e=n.table,t=n.handleContrato,o=n.filas,a=(0,u.useState)(0),i=(0,r.Z)(a,2),l=i[0],s=i[1],d=[{id:"Nro",name:"Nro",width:"60px",selector:function(n,e){return(parseInt(l)-1)*o+e+1}},{id:"nombres",name:"Nombres y apellidos",selector:function(n){return null===n||void 0===n?void 0:n.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(n){return null!==n&&void 0!==n&&n.telefono?n.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha de inicio",width:"150px",selector:function(n){return null===n||void 0===n?void 0:n.fecha_inicio}},{id:"fecha_fin",name:"Fecha de fin",width:"150px",button:!0,selector:function(n){return null===n||void 0===n?void 0:n.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(n){var e,t,o,a;return null!==n&&void 0!==n&&null!==(e=n.evaluacion)&&void 0!==e&&null!==(t=e.at(-1))&&void 0!==t&&t.recomendado_por?null===n||void 0===n||null===(o=n.evaluacion)||void 0===o||null===(a=o.at(-1))||void 0===a?void 0:a.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(n){return null!==n&&void 0!==n&&n.asistencia?n.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"volquete",name:"Volquete",selector:function(n){return null!==n&&void 0!==n&&n.volquete?null===n||void 0===n?void 0:n.volquete:0},center:!0},{id:"teletrans",name:"Teletrans",selector:function(n){return null!==n&&void 0!==n&&n.teletran?n.teletran:0},center:!0},{id:"total",name:"Total",button:!0,selector:function(n){return null===n||void 0===n?void 0:n.total},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(n){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(_.w8I,{onClick:function(){return t(n)},style:{cursor:"pointer"}})})}}];return(0,x.jsx)("div",{className:"table-container",children:(0,x.jsx)(b.ZP,{keyField:"id",columns:d,data:e,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:o,paginationTotalRows:e.length,paginationRowsPerPageOptions:[o,2*o,3*o,4*o,5*o],onChangePage:function(n){s(n)},noDataComponent:(0,x.jsx)(C.Z,{image:C.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})})})}),N=t(80458),S=t(87309),T=t(2541),j=function(){var n=(0,u.useContext)(d.c),e=n.planillaControl,t=n.setPlanillaControl,v=n.setUserdata,p=(0,u.useContext)(s.s),f=p.getData,h=p.setResult,b=(0,u.useState)([]),_=(0,r.Z)(b,2),j=_[0],P=_[1],w=(0,u.useState)([]),R=(0,r.Z)(w,2),I=R[0],D=R[1],O=(0,u.useState)([]),y=(0,r.Z)(O,2),M=y[0],k=y[1],F=(0,u.useState)([]),L=(0,r.Z)(F,2),U=L[0],q=L[1],B=(0,u.useState)([]),z=(0,r.Z)(B,2),G=(z[0],z[1],(0,u.useState)({})),H=(0,r.Z)(G,2),Q=H[0],V=H[1],J=(0,u.useState)([]),X=(0,r.Z)(J,2),K=X[0],W=X[1],Y=(0,Z.Z)(K).result,$=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(){var e,t,o,a,l;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"planilla","area","cargo","campamento",e=f("planilla"),t=f("area"),o=f("cargo"),a=f("campamento"),n.next=10,Promise.all([e,t,o,a]);case 10:l=n.sent,console.log(l[0].data),W(l[0].data),D(l[1].data),k(l[2].data),q(l[3].data);case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){$()}),[]),(0,u.useEffect)((function(){if(Q.campamento){var n=null===K||void 0===K?void 0:K.filter((function(n){return(null===n||void 0===n?void 0:n.campamento)===Q.campamento}));h(n)}if(Q.area){var e=null===K||void 0===K?void 0:K.filter((function(n){var e;return(null===n||void 0===n||null===(e=n.contratos)||void 0===e?void 0:e.area)===Q.area}));h(e)}if(Q.puesto){var t=null===K||void 0===K?void 0:K.filter((function(n){return(null===n||void 0===n?void 0:n.puesto)===Q.puesto}));h(t)}}),[Q]);var nn=function(n){t(!0),P(n),v(n)},en=function(n,e){V((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,o.Z)({},e,n))}))},tn=(0,m.B)(nn);return(0,x.jsxs)("div",{children:[(0,x.jsx)(c.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,x.jsxs)("div",{className:"margenes",children:[(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,x.jsx)(g.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,x.jsx)(N.Z,{name:"campamento",placeholder:"Campamento",onChange:function(n){return en(n,"campamento")},style:{width:"200px"},options:U.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,x.jsx)(N.Z,{name:"area",placeholder:"\xc1rea",onChange:function(n){return en(n,"area")},style:{width:"200px"},options:I.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,x.jsx)(N.Z,{name:"puesto",placeholder:"Puesto",onChange:function(n){return en(n,"puesto")},style:{width:"200px"},options:M.map((function(n){return{id:n.id,value:n.nombre}}))}),(0,x.jsx)(S.ZP,{onClick:function(){var n=null===Y||void 0===Y?void 0:Y.map((function(n,e){var t,o,a,i,l,r,u,s,d;return{Nro:e+1,DNI:null===n||void 0===n?void 0:n.dni,NOMBRE:null===n||void 0===n?void 0:n.nombre,FECHA_NACIMIENTO:null===n||void 0===n||null===(t=n.fecha_nacimiento)||void 0===t?void 0:t.split("T")[0],CELULAR:null===n||void 0===n?void 0:n.telefono,CARGO:null===n||void 0===n?void 0:n.puesto,"\xc1REA":null===n||void 0===n||null===(o=n.contratos)||void 0===o?void 0:o.area,COOPERATIVA:null===n||void 0===n||null===(a=n.evaluacion)||void 0===a||null===(i=a.at(-1))||void 0===i?void 0:i.cooperativa,FECHA_DE_INGRESO:null===n||void 0===n||null===(l=n.fecha_inicio)||void 0===l?void 0:l.split("T")[0],VOLQUETE:null===n||void 0===n?void 0:n.volquete,TELETRAN:null===n||void 0===n?void 0:n.teletran,PERIODO_DE_TRABAJO:null===n||void 0===n?void 0:n.asistencia,FECHA_DE_SALIDA:null===n||void 0===n||null===(r=n.fecha_fin)||void 0===r?void 0:r.split("T")[0],ANTECEDENTES:!1===(null===n||void 0===n||null===(u=n.contratos)||void 0===u?void 0:u.suspendido)?"Ninguno":"Suspendido",RECOMENDADO_POR:null===n||void 0===n||null===(s=n.evaluacion)||void 0===s||null===(d=s.at(-1))||void 0===d?void 0:d.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:parseInt(null===n||void 0===n?void 0:n.asistencia)%15===0?parseInt(null===n||void 0===n?void 0:n.asistencia)/15:""}}));(0,T.S)(n,"Planilla","reporte")},children:" Descargar"})]}),(null===Y||void 0===Y?void 0:Y.length)>0?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(A,{columns:tn,table:Y,handleContrato:nn,filas:10})}):(0,x.jsx)(C.Z,{image:C.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})]}),e&&(0,x.jsx)(E,{selected:j,actualizarTabla:$})]})}}}]);
//# sourceMappingURL=908.f7287e9f.chunk.js.map