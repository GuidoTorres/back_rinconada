"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[202],{91906:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(1413),r=t(93433),o=t(4942),i=t(74165),s=t(15861),c=t(72791),l=t(71368),u=t(300),d=t(87309),p=t(99763),f=t(2541),v=(t(4333),t(80184)),h=u.Z.Search,x=function(e){var n=e.abrirModal,t=e.registrar,u=(e.crear,e.exportar),x=e.cargar,m=e.actualizar,b=e.buscador,g=e.data1,j=e.validacion,Z=e.modal,w=e.setFilterText,y=e.fecha,C=(0,c.useContext)(l.c).setControlAsistencia,_=(0,c.useRef)(null),k=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("myFile",n.target.files[0]),t.append("fecha",y),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:t});case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent)&&((0,p.q)(r.status,r.msg),m(),C(!1),_.current.value=null);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,v.jsx)("input",{type:"file",ref:_,onChange:k,style:{display:"none"}}),b?(0,v.jsx)(h,{placeholder:"Ingresa una nombre...",onChange:function(e){return w(e.target.value)},style:{width:300}}):(0,v.jsxs)("div",{style:{width:"100%"},children:[!1!==t?(0,v.jsx)(d.ZP,{onClick:function(){n(!0)},children:"Registrar"}):"",!1!==u&&null!==g&&void 0!==g&&g.firma_gerente&&null!==g&&void 0!==g&&g.firma_jefe&&null!==g&&void 0!==g&&g.foto?(0,v.jsx)(d.ZP,{onClick:function(e){var n,t,i=null===(n=g.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var n;return(0,o.Z)({},null===e||void 0===e||null===(n=e.asistencium)||void 0===n?void 0:n.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),s=Object.assign.apply(Object,[{}].concat((0,r.Z)(i))),c=null===g||void 0===g||null===(t=g.trabajador_asistencia)||void 0===t?void 0:t.slice(0,1).map((function(e,n){var t,r;return(0,a.Z)({Nro:n+1,Nombre:null===g||void 0===g?void 0:g.nombre,Dni:null===g||void 0===g?void 0:g.dni,Celular:null===g||void 0===g?void 0:g.telefono,Cargo:null===g||void 0===g||null===(t=g.contratos)||void 0===t?void 0:t.puesto,"\xc1rea":null===g||void 0===g||null===(r=g.contratos)||void 0===r?void 0:r.area},s)}));(0,f.H)(c,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==j?(0,v.jsx)(d.ZP,{onClick:function(){Z(!0)},children:"Validaci\xf3n "}):"",!1!==x?(0,v.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsx)(h,{placeholder:"Ingresa una nombre...",onChange:function(e){return w(e.target.value)},style:{width:300}}),(0,v.jsx)(d.ZP,{style:{width:"100px"},onClick:function(){_.current.click()},children:"Cargar"})]}):""]})]})}},96202:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(4942),r=t(74165),o=t(15861),i=t(29439),s=t(97892),c=t.n(s),l=t(72791),u=t(38411),d=t(79260),p=t(99763),f=t(83188),v=t(34664),h=t(43513),x=t(80184),m=function(e){var n=e.columns,t=e.table;e.set;return(0,x.jsx)("div",{className:"table-container",children:(0,x.jsx)(h.ZP,{columns:n,data:t,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){e.data;return(0,x.jsx)(x.Fragment,{})},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,x.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE,description:(0,x.jsx)("span",{children:"No hay registros para mostrar."})})})})},b=(t(91906),function(){var e=(0,l.useState)([]),n=(0,i.Z)(e,2),t=n[0],s=n[1],v=(0,l.useContext)(u.s),h=v.getData,b=v.updateData,g=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("planilla/aprobacion");case 2:(n=e.sent)&&s(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){g()}),[]);var j=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o,i,s,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",n.target.checked&&(i=JSON.parse(localStorage.getItem("firma"))),o={},(0,a.Z)(o,n.target.name,i||null),(0,a.Z)(o,"contrato_id",t.contrato_id),(0,a.Z)(o,"subarray_id",t.subArray_id),(0,a.Z)(o,"fecha",c()(new Date).format("DD-MM-YYYY")),s=o,l=t.aprobacion_id?t.aprobacion_id:0,e.next=6,b(s,l,"planilla/asistencia");case 6:(u=e.sent)&&((0,p.q)(u.status,u.msg),g());case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Z=(0,d.x6)(j);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Z,{text:"Aprobaciones",user:"Usuario",ruta:"/planillas"}),(0,x.jsx)("div",{className:"margenes",children:(0,x.jsx)(m,{columns:Z,table:t})})]})})},2541:function(e,n,t){t.d(n,{H:function(){return i},S:function(){return o}});var a=t(93433),r=t(34045),o=function(e,n,t){var a=r.P6.book_new(),o=r.P6.json_to_sheet(e);r.P6.book_append_sheet(a,o,n),(0,r.Fv)(a,"".concat(t,".xlsx"))},i=function(e,n,t){var o=r.P6.book_new(),i=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],s=[i,Object.keys(e[0])],c=[].concat(s,(0,a.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,n,t){return e[i[t]]=n,e}),{})})),l=r.P6.json_to_sheet(c);l["!cols"]=i.map((function(){return{width:20,height:40,textAlign:"center"}})),l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],l.A1.s={font:{bold:!0}},l.B1.s={font:{bold:!0}},l.C1.s={font:{bold:!0}},l.D1.s={font:{bold:!0}},l.E1.s={font:{bold:!0}},l.F1.s={font:{bold:!0}},r.P6.book_append_sheet(o,l,n),(0,r.Fv)(o,"".concat(t,".xlsx"))}}}]);
//# sourceMappingURL=202.5365e38e.chunk.js.map