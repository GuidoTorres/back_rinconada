"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[202],{91743:function(e,n,a){a.d(n,{Z:function(){return g}});var t=a(1413),r=a(93433),o=a(4942),i=a(74165),s=a(15861),c=a(29439),l=a(72791),u=a(38411),d=a(71368),p=a(300),f=a(87309),v=a(99763),x=(a(37530),a(4333),a(80184)),m=a(2541),h=p.Z.Search,g=function(e){var n=e.abrirModal,a=e.registrar,p=(e.crear,e.exportar),g=e.cargar,b=e.actualizarTabla,Z=(e.actualizarAsistencia,e.actualizar,e.buscador),j=(e.cargando,e.setCargando,e.data1),C=(e.data2,e.validacion),_=e.modal,w=(e.data,(0,l.useContext)(u.s)),k=(w.createData,w.setFilterText),y=(0,l.useContext)(d.c).setControlAsistencia,P=(0,l.useState)(!1),D=(0,c.Z)(P,2),F=(D[0],D[1],(0,l.useState)(null)),H=(0,c.Z)(F,2),A=(H[0],H[1],(0,l.useRef)(null)),S=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var a,t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("myFile",n.target.files[0]),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:a});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent)&&((0,v.q)(r.status,r.msg),b(),y(!1),A.current.value=null),A.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return console.log("===================================="),console.log(j),console.log("===================================="),(0,x.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,x.jsx)("input",{type:"file",ref:A,onChange:S,style:{display:"none"}}),Z?(0,x.jsx)(h,{placeholder:"Ingresa una nombre...",onChange:function(e){return k(e.target.value)},style:{width:300}}):(0,x.jsxs)("div",{children:[!1!==a?(0,x.jsx)(f.ZP,{onClick:function(){n(!0)},children:"Registrar"}):"",!1!==p&&null!==j&&void 0!==j&&j.firma_gerente&&null!==j&&void 0!==j&&j.firma_jefe&&null!==j&&void 0!==j&&j.foto?(0,x.jsx)(f.ZP,{onClick:function(e){var n,a,i=null===(n=j.trabajador_asistencia)||void 0===n?void 0:n.map((function(e){var n;return(0,o.Z)({},null===e||void 0===e||null===(n=e.asistencium)||void 0===n?void 0:n.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),s=Object.assign.apply(Object,[{}].concat((0,r.Z)(i))),c=null===j||void 0===j||null===(a=j.trabajador_asistencia)||void 0===a?void 0:a.slice(0,1).map((function(e,n){var a,r;return(0,t.Z)({Nro:n+1,Nombre:null===j||void 0===j?void 0:j.nombre,Dni:null===j||void 0===j?void 0:j.dni,Celular:null===j||void 0===j?void 0:j.telefono,Cargo:null===j||void 0===j||null===(a=j.contratos)||void 0===a?void 0:a.puesto,"\xc1rea":null===j||void 0===j||null===(r=j.contratos)||void 0===r?void 0:r.area},s)}));(0,m.H)(c,"Hoja de tareo","prueba")},children:"Descargar"}):"",!1!==C?(0,x.jsx)(f.ZP,{onClick:function(){_(!0)},children:"Validaci\xf3n "}):"",!1!==g?(0,x.jsx)(f.ZP,{style:{width:"100px"},onClick:function(){A.current.click()},children:"Cargar"}):""]})]})}},96202:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var t=a(4942),r=a(74165),o=a(15861),i=a(29439),s=a(97892),c=a.n(s),l=a(72791),u=a(38411),d=a(79260),p=a(99763),f=a(83188),v=a(34664),x=a(43513),m=a(80184),h=function(e){var n=e.columns,a=e.table;e.set;return(0,m.jsx)("div",{className:"table-container",children:(0,m.jsx)(x.ZP,{columns:n,data:a,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){e.data;return(0,m.jsx)(m.Fragment,{})},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,m.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE,description:(0,m.jsx)("span",{children:"No hay registros para mostrar."})})})})},g=(a(91743),function(){var e=(0,l.useState)([]),n=(0,i.Z)(e,2),a=n[0],s=n[1],v=(0,l.useContext)(u.s),x=v.getData,g=v.updateData,b=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("planilla/aprobacion");case 2:(n=e.sent)&&s(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){b()}),[]);var Z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,a){var o,i,s,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",n.target.checked&&(i=JSON.parse(localStorage.getItem("firma"))),o={},(0,t.Z)(o,n.target.name,i||null),(0,t.Z)(o,"contrato_id",a.contrato_id),(0,t.Z)(o,"subarray_id",a.subArray_id),(0,t.Z)(o,"fecha",c()(new Date).format("DD-MM-YYYY")),s=o,l=a.aprobacion_id?a.aprobacion_id:0,e.next=6,g(s,l,"planilla/asistencia");case 6:(u=e.sent)&&((0,p.q)(u.status,u.msg),b());case 8:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),j=(0,d.x6)(Z);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.Z,{text:"Aprobaciones",user:"Usuario",ruta:"/planillas"}),(0,m.jsx)("div",{className:"margenes",children:(0,m.jsx)(h,{columns:j,table:a})})]})})},2541:function(e,n,a){a.d(n,{H:function(){return i},S:function(){return o}});var t=a(93433),r=a(34045),o=function(e,n,a){var t=r.P6.book_new(),o=r.P6.json_to_sheet(e);r.P6.book_append_sheet(t,o,n),(0,r.Fv)(t,"".concat(a,".xlsx"))},i=function(e,n,a){var o=r.P6.book_new(),i=["Hoja de Tareo","Header 2","Header 3","Header 4","Header 5","Header 6"],s=[i,Object.keys(e[0])],c=[].concat(s,(0,t.Z)(e.map((function(e){return Object.values(e)})))).map((function(e){return e.reduce((function(e,n,a){return e[i[a]]=n,e}),{})})),l=r.P6.json_to_sheet(c);l["!cols"]=i.map((function(){return{width:20,height:40,textAlign:"center"}})),l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:1}}],l.A1.s={font:{bold:!0}},l.B1.s={font:{bold:!0}},l.C1.s={font:{bold:!0}},l.D1.s={font:{bold:!0}},l.E1.s={font:{bold:!0}},l.F1.s={font:{bold:!0}},r.P6.book_append_sheet(o,l,n),(0,r.Fv)(o,"".concat(a,".xlsx"))}}}]);
//# sourceMappingURL=202.200f5d8f.chunk.js.map