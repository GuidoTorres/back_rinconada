"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[759],{32163:function(e,n,t){var a=t(49389),o=t(87309),i=t(72791),l=t(38411),r=t(71368),s=t(80184),c=a.Z.Search;n.Z=function(e){e.abrirModal;var n=e.registrar,t=(0,i.useContext)(r.c).setJuntarTeletrans,a=(0,i.useContext)(l.s).setFilterText;return(0,s.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(c,{placeholder:"Ingresa un termino aqui...",onChange:function(e){return a(e.target.value)},style:{width:300}}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,s.jsx)("div",{children:!1!==n?(0,s.jsx)(o.ZP,{onClick:function(){t(!0)},style:{width:"150px"},children:"Juntar teletrans"}):""})})]})}},75999:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var a=t(4942),o=t(1413),i=t(74165),l=t(15861),r=t(29439),s=t(72791),c=t(38411),d=t(71368),u=t(83188),v=t(4808),f=(t(50657),t(97603),t(85530)),h=t(38316),p=t(53939),x=t(69967),m=t(80184),j=function(e){var n=e.selected,t=(e.actualizarTabla,(0,s.useState)([])),a=(0,r.Z)(t,2),o=(a[0],a[1]),u=(0,s.useState)([]),j=(0,r.Z)(u,2),b=j[0],g=j[1],Z=(0,s.useContext)(d.c),C=Z.setPlanillaControl,w=Z.setPago,E=Z.planillaControl,N=(0,s.useContext)(c.s).getData,T=(0,s.useState)([]),_=(0,r.Z)(T,2),P=_[0],S=_[1],y=(0,s.useState)(!1),A=(0,r.Z)(y,2),I=A[0],O=A[1],D=(0,s.useState)(!1),F=(0,r.Z)(D,2),M=F[0],R=F[1],k=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.dni){e.next=8;break}return t="planilla/tareo/".concat(n.dni),e.next=4,N(t);case 4:a=e.sent,S(a.data),e.next=13;break;case 8:return o="planilla/tareo/asociacion/".concat(n.asociacion_id),e.next=11,N(o);case 11:l=e.sent,S(l.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){k()}),[n]),(0,s.useEffect)((function(){o([n])}),[n]);var L=(0,p.qQ)((function(e){""===n.codigo?(R(!0),g(e)):(O(!0),g(e))}),(function(e){w(!0),g(e)}));return(0,m.jsxs)(x.Z,{className:"modal-planilla",title:"Control de planilla",open:E,width:900,closeModal:function(){C(!1)},children:[(0,m.jsx)(v.Z,{columns:L,table:P}),I&&(0,m.jsx)(f.Z,{data:b,modal:I,setModal:O,actualizarTabla:k}),M&&(0,m.jsx)(h.Z,{data:b,modal:M,setModal:R,actualizarTabla:k})]})},b=t(32163),g=t(95579),Z=t(34664),C=t(43513),w=t(78820),E=(t(51279),function(e){var n=e.table,t=e.handleContrato,a=e.filas,o=(0,s.useState)(0),i=(0,r.Z)(o,2),l=(i[0],i[1]),c=[{id:"Nro",name:"Nro",width:"60px",selector:function(e,n){return null===e||void 0===e?void 0:e.id}},{id:"nombres",name:"Nombres y apellidos",selector:function(e){return null===e||void 0===e?void 0:e.nombre},width:"250px",sortable:!0},{id:"celular",name:"Celular",width:"150px",sortable:!0,selector:function(e){return null!==e&&void 0!==e&&e.telefono?e.telefono:"---"},center:!0},{id:"fecha_inicio",name:"Fecha de inicio",width:"150px",selector:function(e){return null===e||void 0===e?void 0:e.fecha_inicio}},{id:"fecha_fin",name:"Fecha de fin",width:"150px",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.fecha_fin}},{id:"recomendado_por",name:"Recomendado por",width:"150px",button:!0,selector:function(e){var n,t,a,o;return null!==e&&void 0!==e&&null!==(n=e.evaluacion)&&void 0!==n&&null!==(t=n.at(-1))&&void 0!==t&&t.recomendado_por?null===e||void 0===e||null===(a=e.evaluacion)||void 0===a||null===(o=a.at(-1))||void 0===o?void 0:o.recomendado_por:"---"}},{id:"Dias",name:"Dias laborados",button:!0,selector:function(e){return null!==e&&void 0!==e&&e.asistencia?e.asistencia:"--"},style:{borderBotton:"none",color:"#555555"}},{id:"volquete",name:"Volquete",selector:function(e){return null!==e&&void 0!==e&&e.volquete?null===e||void 0===e?void 0:e.volquete:0},center:!0},{id:"teletrans",name:"Teletrans",selector:function(e){return null!==e&&void 0!==e&&e.teletran?e.teletran:0},center:!0},{id:"total",name:"Total",button:!0,selector:function(e){return null===e||void 0===e?void 0:e.total},center:!0},{id:"control",name:"Control",button:!0,center:!0,cell:function(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(w.w8I,{onClick:function(){return t(e)},style:{cursor:"pointer"}})})}}];return(0,m.jsx)("div",{className:"table-container",children:(0,m.jsx)(C.ZP,{columns:c,data:n,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},paginationPerPage:a,paginationRowsPerPageOptions:[a,2*a,3*a,4*a,5*a],onChangePage:function(e){l(e)},noDataComponent:(0,m.jsx)(Z.Z,{image:Z.Z.PRESENTED_IMAGE_SIMPLE,description:(0,m.jsx)("span",{children:"No hay registros para mostrar."})})})})}),N=t(80458),T=t(87309),_=t(34045),P=function(){var e=(0,s.useContext)(d.c),n=e.planillaControl,t=e.setPlanillaControl,v=e.setUserdata,f=(0,s.useContext)(c.s),h=f.getData,x=f.setResult,Z=(0,s.useState)([]),C=(0,r.Z)(Z,2),w=C[0],P=C[1],S=(0,s.useState)([]),y=(0,r.Z)(S,2),A=y[0],I=y[1],O=(0,s.useState)([]),D=(0,r.Z)(O,2),F=D[0],M=D[1],R=(0,s.useState)([]),k=(0,r.Z)(R,2),L=k[0],q=k[1],z=(0,s.useState)([]),U=(0,r.Z)(z,2),V=(U[0],U[1],(0,s.useState)({})),B=(0,r.Z)(V,2),H=B[0],G=B[1],J=(0,s.useState)([]),Q=(0,r.Z)(J,2),$=Q[0],K=Q[1],X=(0,g.Z)($).result,W=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var n,t,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla","area","cargo","campamento",n=h("planilla"),t=h("area"),a=h("cargo"),o=h("campamento"),e.next=10,Promise.all([n,t,a,o]);case 10:l=e.sent,K(l[0].data),I(l[1].data),M(l[2].data),q(l[3].data);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){W()}),[]),(0,s.useEffect)((function(){if(H.campamento){var e=null===$||void 0===$?void 0:$.filter((function(e){return(null===e||void 0===e?void 0:e.campamento)===H.campamento}));x(e)}if(H.area){var n=null===$||void 0===$?void 0:$.filter((function(e){return(null===e||void 0===e?void 0:e.area)===H.area}));x(n)}if(H.puesto){var t=null===$||void 0===$?void 0:$.filter((function(e){return(null===e||void 0===e?void 0:e.puesto)===H.puesto}));x(t)}}),[H]);var Y=function(e){t(!0),P(e),v(e)},ee=function(e,n){G((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,a.Z)({},n,e))}))},ne=(0,p.B)(Y);return(0,m.jsxs)("div",{children:[(0,m.jsx)(u.Z,{text:"Planilla",user:"Usuario",ruta:"/planilla"}),(0,m.jsxs)("div",{className:"margenes",children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,m.jsx)(b.Z,{registrar:!1,crear:!1,exportar:!1,cargar:!1}),(0,m.jsx)(N.Z,{name:"campamento",placeholder:"Campamento",onChange:function(e){return ee(e,"campamento")},style:{width:"200px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:L.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,m.jsx)(N.Z,{name:"area",placeholder:"\xc1rea",showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},onChange:function(e){return ee(e,"area")},style:{width:"200px"},options:A.map((function(e){return{label:e.nombre,value:e.nombre}}))}),(0,m.jsx)(N.Z,{name:"puesto",placeholder:"Puesto",onChange:function(e){return ee(e,"puesto")},style:{width:"200px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:F.map((function(e){return{id:e.id,value:e.nombre}}))}),(0,m.jsx)(T.ZP,{onClick:function(){console.log("===================================="),console.log(X),console.log("===================================="),function(e,n,t){var a=_.P6.book_new(),o=_.P6.json_to_sheet(e);_.P6.book_append_sheet(a,o,n),(0,_.Fv)(a,"".concat(t,".xlsx"))}(null===X||void 0===X?void 0:X.map((function(e,n){var t,a,o,i,l,r,s,c;return{Nro:n+1,DNI:null===e||void 0===e?void 0:e.dni,NOMBRE:null===e||void 0===e?void 0:e.nombre,FECHA_NACIMIENTO:null===e||void 0===e||null===(t=e.fecha_nacimiento)||void 0===t?void 0:t.split("T")[0],CELULAR:null===e||void 0===e?void 0:e.telefono,CARGO:null===e||void 0===e?void 0:e.puesto,"\xc1REA":null===e||void 0===e?void 0:e.area,COOPERATIVA:null===e||void 0===e||null===(a=e.evaluacion)||void 0===a||null===(o=a.at(-1))||void 0===o?void 0:o.cooperativa,FECHA_DE_INGRESO:null===e||void 0===e||null===(i=e.fecha_inicio)||void 0===i?void 0:i.split("T")[0],VOLQUETE:null===e||void 0===e?void 0:e.volquete,TELETRAN:null===e||void 0===e?void 0:e.teletran,PERIODO_DE_TRABAJO:null===e||void 0===e?void 0:e.asistencia,FECHA_DE_SALIDA:null===e||void 0===e||null===(l=e.fecha_fin)||void 0===l?void 0:l.split("T")[0],ANTECEDENTES:!1===(null===e||void 0===e||null===(r=e.contratos)||void 0===r?void 0:r.suspendido)?"Ninguno":"Suspendido",RECOMENDADO_POR:null===e||void 0===e||null===(s=e.evaluacion)||void 0===s||null===(c=s.at(-1))||void 0===c?void 0:c.recomendado_por,PROXIMA_QUINCENA:"",NUMERO_DE_QUINCENAS_TRABAJADOS:parseInt(null===e||void 0===e?void 0:e.asistencia)%15===0?parseInt(null===e||void 0===e?void 0:e.asistencia)/15:""}})),"Planilla","reporte")},children:" Descargar"})]}),(0,m.jsx)(E,{columns:ne,table:X,handleContrato:Y,filas:10})]}),n&&(0,m.jsx)(j,{selected:w,actualizarTabla:W})]})}},85530:function(e,n,t){t.d(n,{Z:function(){return b}});var a=t(74165),o=t(15861),i=t(29439),l=t(72791),r=t(38411),s=t(71368),c=t(4808),d=t(50657),u=t(53939),v=(t(95579),t(69967)),f=t(17615),h=t(87309),p=t(99763),x=t(72966),m=t(80184),j=function(e){var n=e.modal,t=e.setModal,r=e.data,s=e.actualizarTabla,c=(0,l.useState)(null),d=(0,i.Z)(c,2),u=d[0],j=d[1],b=function(){t(!1)},g=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,(null===u||void 0===u?void 0:u.file)&&n.set("image",u.file||""),e.next=4,fetch("".concat("http://13.58.131.42:3000/api/v1","/planilla/huella/").concat(null===r||void 0===r?void 0:r.aprobacion_id),{method:"PUT",body:n});case 4:return t=e.sent,e.next=7,t.json();case 7:(o=e.sent)&&((0,p.q)(o.status,o.msg),b(),s());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(v.Z,{title:"Validaci\xf3n del trabajador",className:"modal-validacion",open:n,width:400,closeModal:b,children:(0,m.jsxs)(f.Z,{onFinish:g,layout:"horizontal",children:[(0,m.jsx)(f.Z.Item,{children:(0,m.jsx)("div",{className:"drag-container",children:(0,m.jsx)(x.Z,{avatar:u,setAvatar:j,selected:r})})}),(0,m.jsx)("div",{className:"button-container",children:(0,m.jsx)(h.ZP,{htmlType:"submit",children:"Guardar"})})]})})},b=function(e){var n,t=e.data,f=e.modal,h=e.setModal,p=e.actualizarTabla,x=(0,l.useContext)(s.c),b=(x.verificacion,x.setVerificacion,(0,l.useContext)(r.s)),g=(b.getDataById,b.data2,(0,l.useState)()),Z=(0,i.Z)(g,2),C=(Z[0],Z[1],(0,l.useState)([])),w=(0,i.Z)(C,2),E=w[0],N=(w[1],(0,l.useState)(!1)),T=(0,i.Z)(N,2),_=T[0],P=T[1],S=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"planilla/tareo";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){S()}),[]);var y=(0,u.MK)();return(0,m.jsxs)(v.Z,{className:"modal-validacion",title:"Hoja de tareo",open:f,width:900,closeModal:function(){h(!1)},children:[(0,m.jsxs)("div",{className:"tareo-container",children:[(0,m.jsxs)("section",{className:"tareo-datos",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Nombre: "}),null===t||void 0===t?void 0:t.nombre]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Dni: "}),null===t||void 0===t?void 0:t.dni]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Tel\xe9fono: "}),null===t||void 0===t?void 0:t.celular]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Cargo:"})," ",null===t||void 0===t?void 0:t.cargo]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{htmlFor:"",children:[(0,m.jsx)("strong",{children:"Total de d\xedas asistidos: "}),null===t||void 0===t?void 0:t.asistencia]})})]}),(0,m.jsx)("section",{className:"tareo-boton",children:(0,m.jsx)(d.Z,{registrar:!1,crear:!1,exportar:!0,validacion:!0,cargar:!1,data1:t,data2:E,modal:P})})]}),(0,m.jsx)(c.Z,{columns:y,table:null===t||void 0===t||null===(n=t.asistencia_completa)||void 0===n?void 0:n.reverse()}),_&&(0,m.jsx)(j,{modal:_,setModal:P,data:t,actualizarTabla:p})]})}},38316:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(29439),o=t(72791),i=t(38411),l=t(50657),r=(t(4808),t(71368)),s=t(69967),c=t(80184),d=function(e){var n=e.data,t=e.modal,d=e.setModal,u=(0,o.useContext)(r.c),v=(u.setValidacionPagosAsociacion,u.setFechas,u.fechas,u.verificacion,u.setVerificacion,(0,o.useContext)(i.s)),f=(v.getData,v.data3,v.setData3,v.data2,v.dataToEdit,(0,o.useState)()),h=(0,a.Z)(f,2);h[0],h[1];return(0,c.jsxs)(s.Z,{className:"modal-validacion",title:"Hoja de tareo asociacion",open:t,width:950,closeModal:function(){d(!1)},children:[(0,c.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsxs)("section",{children:[(0,c.jsx)("div",{children:(0,c.jsxs)("label",{htmlFor:"",children:[(0,c.jsx)("strong",{children:" Nombre: "})," ",n&&null!==n&&void 0!==n&&n.nombre?n.nombre:"---"]})}),(0,c.jsx)("div",{children:(0,c.jsx)("div",{children:(0,c.jsxs)("label",{htmlFor:"",children:[(0,c.jsx)("strong",{children:"Tel\xe9fono:"})," ",n&&null!==n&&void 0!==n&&n.telefono?n.telefono:"---"]})})})]}),(0,c.jsx)("section",{className:"tareo-boton",children:(0,c.jsx)(l.Z,{registrar:!1,crear:!1,exportar:!1,validacion:!1,cargar:!1,data1:n,data2:null,modal:null,descargar:!0})})]}),(0,c.jsx)("section",{className:"table-container",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Nro"}),(0,c.jsx)("th",{children:"Apellidos y nombres"}),n.trabajadores.length>0&&Object.keys(n.trabajadores[0]).filter((function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)})).map((function(e,n){return(0,c.jsx)("th",{style:{writingMode:"vertical-lr",transform:"scale(-1)"},children:(0,c.jsx)("span",{children:e})},n)}))]})}),(0,c.jsx)("tbody",{children:n.trabajadores.map((function(e,n){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:n+1}),(0,c.jsx)("td",{children:e.nombres}),Object.entries(e).filter((function(e){var n=(0,a.Z)(e,1)[0];return/^\d{4}-\d{2}-\d{2}$/.test(n)})).map((function(e,n){var t=(0,a.Z)(e,2),o=(t[0],t[1]);return(0,c.jsx)("td",{children:o},n)}))]},n)}))})]})})]})}},97603:function(){}}]);
//# sourceMappingURL=759.341a9851.chunk.js.map