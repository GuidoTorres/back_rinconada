"use strict";(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[2049],{68041:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var o=n(74165),r=n(15861),i=n(29439),a=n(34664),l=n(72791),s=n(38411),d=n(53939),u=n(99763),c=n(83188),v=n(43513),p=n(80184),x=function(e){var t=e.columns,n=e.table;return(0,p.jsx)("div",{className:"table-container",children:(0,p.jsx)(v.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){var t=e.data;return(0,p.jsxs)("div",{style:{padding:"10px 20px 10px 20px"},children:[(0,p.jsxs)("label",{htmlFor:"",children:[(0,p.jsx)("strong",{children:"Solicitante del pedido: "}),t.solicitante]}),(0,p.jsx)("br",{}),(0,p.jsxs)("label",{htmlFor:"",children:[(0,p.jsx)("strong",{children:"C\xf3digo de requerimiento: "}),t.requerimiento_pedidos.map((function(e){return e.requerimiento_id})).toString()]}),(0,p.jsx)("br",{}),(0,p.jsxs)("label",{htmlFor:"",children:[(0,p.jsx)("strong",{children:"Fecha de pedido: "}),t.fecha]}),(0,p.jsx)("br",{}),(0,p.jsxs)("table",{style:{marginTop:"20px"},children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,p.jsx)("strong",{children:"Producto"})}),(0,p.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,p.jsx)("strong",{children:"Cantidad"})})]}),null===t||void 0===t?void 0:t.productos.map((function(e,t){var n;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e||null===(n=e.producto)||void 0===n?void 0:n.nombre}),(0,p.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.cantidad})]},t)}))]})]})},expandableRowDisabled:function(e){var t;return 0===(null===e||void 0===e||null===(t=e.trabajador)||void 0===t?void 0:t.length)},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:"No se encontraron resultados."})})},h=n(12469),m=n(49389),f=n(87309),g=m.Z.Search,j=function(e){var t=e.generar,n=e.data,i=e.setFilterText,a=(0,l.useContext)(s.s),d=(a.createData,a.multipleRequerimientos,a.modal,a.setModal),u=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"buscador-almacen",children:[(0,p.jsx)(g,{placeholder:"Ingresa un...",onChange:function(e){return i(e.target.value)},style:{width:300}}),t&&(null===n||void 0===n?void 0:n.length)>0?(0,p.jsx)("div",{className:"button-container",children:(0,p.jsx)(f.ZP,{onClick:function(){return u()},children:"Realizar pedido"})}):""]})},w=n(96972),Z=n(1413),b=n(4942),C=n(63998),y=n(69967),q=n(78820),R=n(17615),S=function(e){var t=e.actualizarTabla,n=R.Z.useForm(),a=(0,i.Z)(n,1)[0],d=(0,l.useState)([]),c=(0,i.Z)(d,2),v=(c[0],c[1],(0,l.useContext)(s.s)),x=v.setModal,h=v.dataToEdit,m=v.setDataToEdit,g=v.multipleRequerimientos,j=v.createData,w=v.getData,S=v.modal,T=v.cargando,L=v.setCargando,F=v.setMultipleRequerimientos,E=(0,l.useState)({solicitante:"",area:"",proyecto:"",celular:"",fecha:""}),_=(0,i.Z)(E,2),A=_[0],N=_[1],D=(0,l.useState)([]),P=(0,i.Z)(D,2),k=P[0],I=P[1],M=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"area",e.next=3,w("area");case 3:t=e.sent,I(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){M()}),[]);var z=function(){x(!1),m(null)},H=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pedido",r={fecha:A.fecha,estado:"Completado",req_id:g.map((function(e){return e.id})),solicitante:A.solicitante,area:A.area,proyecto:A.proyecto,celular:A.celular},L(!0),e.next=5,j(r,"pedido");case 5:(i=e.sent)&&((0,u.q)(i.status,i.msg),t(),z(),L(!1),F([]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=(0,C.ej)(A,(function(e,t){if(!t&&e.target){var n=e.target,o=n.name,r=n.value;a.setFieldsValue((0,b.Z)({},o,r)),N((function(e){return(0,Z.Z)((0,Z.Z)({},e),{},(0,b.Z)({},o,r))}))}else a.setFieldsValue((0,b.Z)({},t,e)),N((function(n){return(0,Z.Z)((0,Z.Z)({},n),{},(0,b.Z)({},t,e))}))}),k);return(0,p.jsx)(y.Z,{className:"modal-pedido",title:"Generar pedido",open:S,width:400,closeModal:z,children:(0,p.jsxs)(R.Z,{form:a,className:"modal-body",onFinish:H,layout:"horizontal",children:[O.map((function(e){return(0,p.jsxs)(R.Z.Item,{name:e.name,rules:e.rules,style:{marginBottom:"8px"},children:["\xa0",e.label,e.type]})})),(0,p.jsx)(R.Z.Item,{className:"button-container",children:(0,p.jsx)(f.ZP,{htmlType:"submit",icon:(0,p.jsx)(q.lFz,{}),loading:!!T,children:h?" Editar":" Registrar"})})]})})},T=function(){var e=(0,l.useContext)(s.s),t=e.getData,n=(e.data,e.setData,e.dataToEdit,e.setDataToEdit),v=e.modal,m=e.setMultipleRequerimientos,f=e.updateData,g=e.modal3,Z=e.setModal3,b=e.multipleRequerimientos,C=e.deleteData,y=(0,l.useState)([]),q=(0,i.Z)(y,2),R=q[0],T=q[1],L=(0,l.useState)([]),F=(0,i.Z)(L,2),E=F[0],_=F[1],A=(0,l.useState)(""),N=(0,i.Z)(A,2),D=N[0],P=N[1],k=(0,l.useState)([]),I=(0,i.Z)(k,2),M=I[0],z=I[1],H=(0,l.useState)(""),O=(0,i.Z)(H,2),G=O[0],V=O[1],B=(0,l.useState)([]),U=(0,i.Z)(B,2),J=U[0],K=U[1],Q=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",n="pedido",e.next=4,t("requerimiento");case 4:return r=e.sent,e.next=7,t(n);case 7:i=e.sent,T(r.data),_(i.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){Q()}),[]);var W=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requerimiento_pedidos.map((function(e){return e.requerimiento_id})),"pedido",e.next=4,C("pedido","".concat(t.id,"?ids=").concat(n));case 4:(r=e.sent)&&((0,u.q)(r.status,r.msg),Q());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"requerimiento",e.next=3,C("requerimiento",t.id);case 3:(n=e.sent)&&((0,u.q)(n.status,n.msg),Q());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=R&&R.filter((function(e){var t,n,o,r,i,a,l,s,d,u,c,v,p,x;return(null===e||void 0===e||null===(t=e.id.toString())||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===D||void 0===D?void 0:D.toLowerCase()))||(null===e||void 0===e||null===(o=e.fecha_pedido)||void 0===o||null===(r=o.toLowerCase())||void 0===r?void 0:r.includes(null===D||void 0===D?void 0:D.toLowerCase()))||(null===e||void 0===e||null===(i=e.solicitante)||void 0===i||null===(a=i.toLowerCase())||void 0===a?void 0:a.includes(null===D||void 0===D?void 0:D.toLowerCase()))||(null===e||void 0===e||null===(l=e.almacen)||void 0===l||null===(s=l.toLowerCase())||void 0===s?void 0:s.includes(null===D||void 0===D?void 0:D.toLowerCase()))||(null===e||void 0===e||null===(d=e.area)||void 0===d||null===(u=d.toLowerCase())||void 0===u?void 0:u.includes(null===D||void 0===D?void 0:D.toLowerCase()))||(null===e||void 0===e||null===(c=e.requerimiento_productos)||void 0===c||null===(v=c.map((function(e){var t;return null===e||void 0===e||null===(t=e.producto)||void 0===t?void 0:t.nombre})))||void 0===v||null===(p=v.toString())||void 0===p||null===(x=p.toLowerCase())||void 0===x?void 0:x.includes(null===D||void 0===D?void 0:D.toLowerCase()))}));z(e)}),[D,R]),(0,l.useEffect)((function(){var e=E&&E.filter((function(e){var t,n,o,r,i,a,l,s,d,u,c,v,p,x;return(null===e||void 0===e||null===(t=e.id.toString())||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(G.toLowerCase()))||(null===e||void 0===e||null===(o=e.fecha)||void 0===o||null===(r=o.toLowerCase())||void 0===r?void 0:r.includes(G.toLowerCase()))||(null===e||void 0===e||null===(i=e.solicitante)||void 0===i||null===(a=i.toLowerCase())||void 0===a?void 0:a.includes(G.toLowerCase()))||(null===e||void 0===e||null===(l=e.productos)||void 0===l||null===(s=l.map((function(e){var t;return null===e||void 0===e||null===(t=e.producto)||void 0===t?void 0:t.nombre})))||void 0===s||null===(d=s.toString())||void 0===d||null===(u=d.toLowerCase())||void 0===u?void 0:u.includes(G.toLowerCase()))||(null===e||void 0===e||null===(c=e.requerimiento_pedidos)||void 0===c||null===(v=c.map((function(e){return null===e||void 0===e?void 0:e.requerimiento_id})))||void 0===v||null===(p=v.toString())||void 0===p||null===(x=p.toLowerCase())||void 0===x?void 0:x.includes(G.toLowerCase()))}));K(e)}),[G,E]);var Y=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(t,n,r){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pedido",i={estado:t},e.next=4,f(i,n.id,"pedido");case 4:200===e.sent.status&&Q();case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),$=(0,d.bI)((function(e){Z(!0),n(e)}),X),ee=(0,d.g6)(Y,W);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Z,{text:"Requerimientos - pedidos",user:"Usuario",ruta:"/logistica"}),(0,p.jsxs)("div",{className:"requerimiento_container",children:[(0,p.jsxs)("div",{className:"requerimiento_group",children:[(0,p.jsxs)("label",{htmlFor:"",children:[(0,p.jsx)("strong",{children:"Requerimientos"})," "]}),(0,p.jsx)(j,{generar:!0,data:b,setFilterText:P}),(0,p.jsx)(h.Z,{columns:$,table:M,set:m})]}),(0,p.jsxs)("div",{className:"requerimiento_group",children:[(0,p.jsx)("label",{htmlFor:"",children:(0,p.jsx)("strong",{children:"Pedidos"})}),(0,p.jsx)(j,{generar:!1,setFilterText:V}),(null===E||void 0===E?void 0:E.length)>0?(0,p.jsx)(x,{columns:ee,table:J}):(0,p.jsx)(a.Z,{image:a.Z.PRESENTED_IMAGE_SIMPLE,description:(0,p.jsx)("span",{children:"No hay registros para mostrar."})})]})]}),v&&(0,p.jsx)(S,{actualizarTabla:Q}),g&&(0,p.jsx)(w.Z,{actualizarTabla:Q,modal3:g,setModal3:Z})]})}},69967:function(e,t,n){n(72791);var o=n(49998),r=n(80184);t.Z=function(e){var t=e.className,n=e.title,i=e.open,a=e.width,l=e.closeModal,s=e.children;return(0,r.jsx)(o.Z,{destroyOnClose:!0,className:t,title:n,open:i,centered:!0,onCancel:l,footer:null,width:a,children:s})}},12469:function(e,t,n){var o=n(34664),r=(n(72791),n(43513)),i=(n(51279),n(80184));t.Z=function(e){var t=e.columns,n=e.table,a=e.set;return(0,i.jsx)("div",{className:"table-container",children:(0,i.jsx)(r.ZP,{columns:t,data:n,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,selectableRows:!0,expandableRows:!0,expandableRowsComponent:function(e){var t,n=e.data;return(0,i.jsx)("div",{style:{padding:"10px 20px 10px 60px"},children:(0,i.jsxs)("div",{style:{marginTop:"5px"},children:[(0,i.jsxs)("label",{htmlFor:"",children:[(0,i.jsx)("strong",{children:"Solicitante:"})," ",null===n||void 0===n?void 0:n.solicitante]}),(0,i.jsx)("br",{}),(0,i.jsxs)("label",{htmlFor:"",children:[(0,i.jsx)("strong",{children:"Tel\xe9fono:"})," ",null===n||void 0===n?void 0:n.celular]}),(0,i.jsxs)("table",{style:{marginTop:"20px"},children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{width:"140px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Fecha de pedido"})}),(0,i.jsx)("td",{style:{width:"240px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Producto"})}),(0,i.jsx)("td",{style:{width:"180px",textAlign:"center"},children:(0,i.jsx)("strong",{children:"Cantidad"})})]}),null===n||void 0===n||null===(t=n.requerimiento_productos)||void 0===t?void 0:t.map((function(e,t){var o;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{textAlign:"center"},children:null===n||void 0===n?void 0:n.fecha_pedido}),(0,i.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e||null===(o=e.producto)||void 0===o?void 0:o.nombre}),(0,i.jsx)("td",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.cantidad})]},t)}))]})]})})},expandableRowDisabled:function(e){return 1===(null===e||void 0===e?void 0:e.completado)},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,i.jsx)(o.Z,{image:o.Z.PRESENTED_IMAGE_SIMPLE,description:(0,i.jsx)("span",{children:"No hay registros para mostrar."})}),onSelectedRowsChange:function(e){var t=e.selectedRows;void 0!==a&&a(t)},selectableRowDisabled:function(e){return"Aprobado"!==e.estado}})})}}}]);
//# sourceMappingURL=2049.7b382bf7.chunk.js.map