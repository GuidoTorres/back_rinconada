(self.webpackChunkrinconada=self.webpackChunkrinconada||[]).push([[202],{91743:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var n=r(1413),l=r(93433),i=r(4942),o=r(74165),a=r(15861),s=r(29439),d=r(72791),c=r(71368),u=r(49389),h=r(87309),f=r(99763),x=r(4333),m=r(37530),b=r(97892),p=r.n(b),v=r(99893),g=r.n(v),y=(r(52563),r(80184));p().extend(g()),p().locale("es");var _=function(e){console.log(e);var t=x.mM.create({page:{display:"flex",alignItems:"center",width:"100%"},tableContainer:{padding:6,width:"100%"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,marginTop:20},tableRow:{display:"flex",alignItems:"center",flexDirection:"row",height:50},tableRow1:{display:"flex",alignItems:"center",flexDirection:"row",height:30},tableRow2:{display:"flex",alignItems:"center",flexDirection:"row",height:60},tableColHeader1:{flex:1.5,borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:50,justifyContent:"center",alignItems:"center"},tableColHeader2:{flex:1.5,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:50,textAlign:"center"},tableColHeader3:{flex:1.8,backgroundColor:"#c5e0b3",height:50},tableCell:{margin:"auto",marginTop:5,fontSize:10},tableCell1:{marginTop:"25px",fontSize:10,transform:"rotate(-90deg)"},text1:{fontSize:8,backgroundColor:"#c5e0b3",textAlign:"center",padding:2,width:"40%"},text2:{fontSize:8,textAlign:"center",padding:2,width:"60%"},tableCol1:{flex:.2,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol2:{flex:.8,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol3:{flex:.4,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",backgroundColor:"#8EAADB"},tableCol4:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol5:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol1Data:{flex:.2,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol2Data:{flex:.8,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol3Data:{flex:.4,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},tableCol4Data:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%",transform:"rotate(-90deg)"},tableCol5Data:{flex:.1,justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,height:"100%"},firma:{position:"absolute",bottom:220,left:5},firma2:{position:"absolute",bottom:220,left:15},firmaDiv:{display:"flex",flexDirection:"column"},firmaImg:{height:"60px",width:"160px",marginLeft:40,marginTop:20},firmaText:{fontSize:13,textAlign:"center",padding:2,width:"40%"},img:{height:30,width:30,position:"absolute",left:5,borderRadius:"50%"}}),r=/^\d{4}-\d{2}-\d{2}$/;return(0,y.jsx)(x.BB,{children:(0,y.jsxs)(x.T3,{orientation:"landscape",size:"A4",style:t.page,children:[(0,y.jsx)(x.G7,{style:t.tableContainer,children:(0,y.jsxs)(x.G7,{style:t.table,children:[(0,y.jsxs)(x.G7,{style:t.tableRow,children:[(0,y.jsx)(x.G7,{style:t.tableColHeader1,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",width:"100%",textAlign:"center",verticalAlign:"middle",paddingTop:"12px",fontSize:"15px"}],children:"Hoja de Tareo"})}),(0,y.jsx)(x.G7,{style:t.tableColHeader2,children:(0,y.jsx)(x.Ee,{src:m,style:[t.img,{height:"40px",width:"40px",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"100px"}]})}),(0,y.jsxs)(x.G7,{style:t.tableColHeader3,children:[(0,y.jsx)(x.G7,{style:[t.tableColHeader3,{backgroundColor:"#8EAADB"}],children:(0,y.jsx)(x.G7,{style:t.tableRow,children:null===e||void 0===e?void 0:e.map((function(e,n){return Object.keys(e).filter((function(e){return r.test(e)})).map((function(e){return(0,y.jsx)(x.G7,{style:t.tableCol5,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:p()(e).date()})})}))}))})}),(0,y.jsx)(x.G7,{style:[t.tableColHeader3,{backgroundColor:"white"}],children:(0,y.jsx)(x.G7,{style:t.tableRow,children:null===e||void 0===e?void 0:e.map((function(e,n){return Object.keys(e).filter((function(e){return r.test(e)})).map((function(e){return(0,y.jsx)(x.G7,{style:t.tableCol4,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:p()(e).format("ddd")})})}))}))})})]})]}),(0,y.jsxs)(x.G7,{style:[t.tableRow1,{height:"70px"}],children:[(0,y.jsx)(x.G7,{style:t.tableCol1,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"N\xba"})}),(0,y.jsx)(x.G7,{style:t.tableCol2,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Apellidos y nombres"})}),(0,y.jsx)(x.G7,{style:t.tableCol3,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Dni"})}),(0,y.jsx)(x.G7,{style:t.tableCol3,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Celular"})}),(0,y.jsx)(x.G7,{style:t.tableCol3,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"Cargo"})}),(0,y.jsx)(x.G7,{style:t.tableCol3,children:(0,y.jsx)(x.xv,{style:[t.tableCell,{height:"100%",marginTop:"30px"}],children:"\xc1rea"})}),null===e||void 0===e?void 0:e.map((function(e,n){return Object.keys(e).filter((function(e){return r.test(e)})).map((function(e){return(0,y.jsx)(x.G7,{style:t.tableCol4,children:(0,y.jsx)(x.xv,{style:t.tableCell1,children:p()(e).format("DD-MM-YYYY")})})}))}))]}),null===e||void 0===e?void 0:e.map((function(e,n){return(0,y.jsxs)(x.G7,{style:t.tableRow1,children:[(0,y.jsx)(x.G7,{style:t.tableCol1Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Nro})}),(0,y.jsx)(x.G7,{style:t.tableCol2Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Nombre})}),(0,y.jsx)(x.G7,{style:t.tableCol3Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Dni})}),(0,y.jsx)(x.G7,{style:t.tableCol3Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Celular})}),(0,y.jsx)(x.G7,{style:t.tableCol3Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Cargo})}),(0,y.jsx)(x.G7,{style:t.tableCol3Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:null===e||void 0===e?void 0:e.Area})}),Object.values(e).filter((function(t,n){var l=Object.keys(e)[n];return r.test(l)})).map((function(e){return(0,y.jsx)(x.G7,{style:t.tableCol5Data,children:(0,y.jsx)(x.xv,{style:t.tableCell,children:e})})}))]})}))]})}),e.map((function(e){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.G7,{style:t.firma,children:(0,y.jsxs)(x.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.firma_jefe)&&(0,y.jsx)(x.Ee,{src:null===e||void 0===e?void 0:e.firma_jefe,style:t.firmaImg}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"_____________________"}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"Gerente de Op. Mina"})]})}),(0,y.jsx)(x.G7,{style:[t.firma2,{marginLeft:"200px"}],children:(0,y.jsxs)(x.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.firma_gerente)&&(0,y.jsx)(x.Ee,{src:null===e||void 0===e?void 0:e.firma_gerente,style:t.firmaImg}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"_____________________"}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"Jefe de operaciones"})]})}),(0,y.jsx)(x.G7,{style:[t.firma2,{marginLeft:"400px"}],children:(0,y.jsxs)(x.G7,{style:t.firmaDiv,children:[Boolean(null===e||void 0===e?void 0:e.foto)&&(0,y.jsx)(x.Ee,{src:null===e||void 0===e?void 0:e.foto,style:t.firmaImg}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"_____________________"}),(0,y.jsx)(x.xv,{style:t.firmaText,children:"Huella trabajador"})]})})]})}))]})})},j=u.Z.Search,C=function(e){var t=e.abrirModal,r=e.registrar,u=(e.crear,e.exportar),m=e.cargar,b=e.actualizar,p=e.buscador,v=e.data1,g=e.validacion,C=e.modal,D=e.setFilterText,w=e.fecha,M=e.setModal,L=(0,d.useContext)(c.c).setControlAsistencia,T=(0,d.useState)(null),Y=(0,s.Z)(T,2),W=(Y[0],Y[1],(0,d.useRef)(null)),G=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("myFile",t.target.files[0]),r.append("fecha",w),e.next=5,fetch("".concat("http://13.58.131.42:3000/api/v1","/asistencia/excel"),{method:"post",body:r});case 5:return n=e.sent,e.next=8,n.json();case 8:(l=e.sent)&&((0,f.q)(l.status,l.msg),b(),L(!1),M(!1),W.current.value=null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a,s,d,c,u,h,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(r=v.trabajador_asistencia)||void 0===r?void 0:r.map((function(e){var t;return(0,i.Z)({},null===e||void 0===e||null===(t=e.asistencium)||void 0===t?void 0:t.fecha,"Permiso"===e.asistencia?"P":"Asistio"===e.asistencia?"X":"Falto"===e.asistencia?"F":"Dia libre"===e.asistencia?"DL":"Comision"===e.asistencia?"C":"F")})),d=Object.assign.apply(Object,[{}].concat((0,l.Z)(s))),!(c=null===v||void 0===v||null===(a=v.trabajador_asistencia)||void 0===a?void 0:a.slice(0,1).map((function(e,t){var r,l;return(0,n.Z)({Nro:t+1,Nombre:null===v||void 0===v?void 0:v.nombre,Dni:null===v||void 0===v?void 0:v.dni,Firma_jefe:null===v||void 0===v?void 0:v.firma_jefe,Firma_gerente:null===v||void 0===v?void 0:v.firma_gerente,Foto:null===v||void 0===v?void 0:v.foto,Celular:null===v||void 0===v?void 0:v.telefono,Cargo:null===v||void 0===v||null===(r=v.contratos)||void 0===r?void 0:r.puesto,"\xc1rea":null===v||void 0===v||null===(l=v.contratos)||void 0===l?void 0:l.area},d)})))){e.next=8;break}return e.next=6,(0,x.eA)(_(c)).toBlob();case 6:(u=e.sent)&&(h=URL.createObjectURL(u),(f=document.createElement("a")).href=h,f.download="nombre-del-archivo.pdf",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(h));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{className:"buscador-container",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,y.jsx)("input",{type:"file",ref:W,onChange:G,style:{display:"none"}}),p?(0,y.jsx)(j,{placeholder:"Ingresa una nombre...",onChange:function(e){return D(e.target.value)},style:{width:300}}):(0,y.jsxs)("div",{style:{width:"100%"},children:[!1!==r?(0,y.jsx)(h.ZP,{onClick:function(){t(!0)},children:"Registrar"}):"",!1!==u&&null!==v&&void 0!==v&&v.firma_gerente&&null!==v&&void 0!==v&&v.firma_jefe&&null!==v&&void 0!==v&&v.foto?(0,y.jsx)(h.ZP,{onClick:S,children:"Descargar"}):"",!1!==g?(0,y.jsx)(h.ZP,{onClick:function(){C(!0)},children:"Validaci\xf3n "}):"",!1!==m?(0,y.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)(j,{placeholder:"Ingresa una nombre...",onChange:function(e){return D(e.target.value)},style:{width:300}}),(0,y.jsx)(h.ZP,{style:{width:"100px"},onClick:function(){W.current.click()},children:"Cargar"})]}):""]})]})}},96202:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(4942),l=r(74165),i=r(15861),o=r(29439),a=r(97892),s=r.n(a),d=r(72791),c=r(38411),u=r(53939),h=r(99763),f=r(83188),x=r(34664),m=r(43513),b=r(80184),p=function(e){var t=e.columns,r=e.table;e.set;return(0,b.jsx)("div",{className:"table-container",children:(0,b.jsx)(m.ZP,{columns:t,data:r,pagination:!0,fixedHeader:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:function(e){e.data;return(0,b.jsx)(b.Fragment,{})},paginationComponentOptions:{rowsPerPageText:"Filas por p\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!1,selectAllRowsItemText:"Todos"},responsive:!0,noHeader:!0,noDataComponent:(0,b.jsx)(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE,description:(0,b.jsx)("span",{children:"No hay registros para mostrar."})})})})},v=(r(91743),function(){var e=(0,d.useState)([]),t=(0,o.Z)(e,2),r=t[0],a=t[1],x=(0,d.useContext)(c.s),m=x.getData,v=x.updateData,g=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("planilla/aprobacion");case 2:(t=e.sent)&&a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){g()}),[]);var y=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(t,r){var i,o,a,d,c;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"planilla/asistencia",t.target.checked&&(o=JSON.parse(localStorage.getItem("firma"))),i={},(0,n.Z)(i,t.target.name,o||null),(0,n.Z)(i,"contrato_id",r.contrato_id),(0,n.Z)(i,"subarray_id",r.subArray_id),(0,n.Z)(i,"fecha",s()(new Date).format("DD-MM-YYYY")),a=i,d=r.aprobacion_id?r.aprobacion_id:0,e.next=6,v(a,d,"planilla/asistencia");case 6:(c=e.sent)&&((0,h.q)(c.status,c.msg),g());case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),_=(0,u.x6)(y);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{text:"Aprobaciones",user:"Usuario",ruta:"/planillas"}),(0,b.jsx)("div",{className:"margenes",children:(0,b.jsx)(p,{columns:_,table:r})})]})})},52563:function(e,t,r){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return r.default.locale(n,null,!0),n}(r(97892))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,r,n){var l=r.prototype,i=l.format;n.en.formats=e,l.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var r=this.$locale().formats,n=function(t,r){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,l){var i=l&&l.toUpperCase();return n||r[l]||e[l]||r[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))}(t,void 0===r?{}:r);return i.call(this,n)}}}()}}]);
//# sourceMappingURL=202.424d54c2.chunk.js.map